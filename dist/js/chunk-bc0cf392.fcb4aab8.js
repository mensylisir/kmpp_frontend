(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bc0cf392"],{"0600":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));n("ac1f"),n("5319");var a=n("ff66"),c="/proxy/kubernetes/{cluster_name}/{resource_url}",r="api/v1/namespaces",o="api/v1/namespaces/{namespace}";function i(e){var t=c.replace("{cluster_name}",e).replace("{resource_url}",r);return Object(a["c"])(t)}function s(e,t){var n=c.replace("{cluster_name}",e).replace("{resource_url}",r);return Object(a["e"])(n,t)}function u(e,t){var n=c.replace("{cluster_name}",e).replace("{resource_url}",o).replace("{namespace}",t);return Object(a["b"])(n)}},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"1a55":function(e,t,n){"use strict";n("648b")},"4e53":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{staticStyle:{float:"right"},attrs:{disabled:!e.ko_nextToken||e.ko_btnLoading,size:"mini",icon:"el-icon-caret-right"},on:{click:function(t){return e.getPageNext()}}}),n("span",{staticStyle:{float:"right","margin-top":"7px"}},[e._v(e._s(e.ko_currentPage))]),n("el-button",{staticStyle:{float:"right"},attrs:{disabled:1===e.ko_currentPage||e.ko_btnLoading,size:"mini",icon:"el-icon-caret-left"},on:{click:function(t){return e.getPageAhead()}}})],1)},c=[],r=(n("a9e3"),{name:"K8sPage",props:{nextToken:String,currentPage:Number},watch:{nextToken:{handler:function(e){this.ko_nextToken=e},immediate:!0},currentPage:{handler:function(e){this.ko_currentPage=e||this.ko_currentPage},immediate:!0}},data:function(){return{ko_aheadToken:[],ko_continueToken:"",ko_nextToken:"",ko_currentPage:1,ko_btnLoading:!1}},methods:{getPageAhead:function(){this.ko_btnLoading=!0,this.ko_currentPage--,this.ko_continueToken=this.ko_aheadToken[this.ko_aheadToken.length-1],this.ko_aheadToken.pop(),this.$emit("pageChange",{token:this.ko_continueToken,page:this.ko_currentPage}),this.ko_btnLoading=!1},getPageNext:function(){this.ko_currentPage++,this.ko_aheadToken.push(this.ko_continueToken),this.ko_continueToken=this.ko_nextToken,this.$emit("pageChange",{token:this.ko_continueToken,page:this.ko_currentPage})}}}),o=r,i=n("2877"),s=Object(i["a"])(o,a,c,!1,null,null,null);t["a"]=s.exports},"648b":function(e,t,n){e.exports={theme:"#5354bb"}},"65e5":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));n("ac1f"),n("5319");var a=n("ff66"),c="/proxy/kubernetes/{cluster_name}/{resource_url}",r="api/v1/namespaces/{namespace}/events",o="/api/v1/clusters/events",i=10;function s(e,t,n){var s=c.replace("{cluster_name}",e);return s+="?limit="+i,t&&(s+="&continue="+t),s=n?s.replace("{resource_url}",r).replace("{namespace}",n):s.replace("{resource_url}",o),Object(a["c"])(s)}function u(e,t){var n="".concat(o,"/npd/").concat(t,"/")+e;return Object(a["e"])(n,{})}},"7ea2":function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"p",(function(){return l})),n.d(t,"c",(function(){return p})),n.d(t,"k",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return m})),n.d(t,"l",(function(){return h})),n.d(t,"m",(function(){return b})),n.d(t,"q",(function(){return g})),n.d(t,"h",(function(){return _})),n.d(t,"g",(function(){return v})),n.d(t,"i",(function(){return k})),n.d(t,"n",(function(){return x})),n.d(t,"o",(function(){return j})),n.d(t,"j",(function(){return y}));n("99af"),n("ac1f"),n("5319");var a=n("ff66"),c="/api/v1/clusters",r="/api/v1/clusters/logger/{cluster_name}",o="/api/v1/clusters/provisioner/log/{cluster_name}/{log_id}";function i(e){return Object(a["c"])("".concat(c,"/").concat(e))}function s(e){return Object(a["c"])("".concat(c,"/name/").concat(e))}function u(e){return Object(a["c"])("".concat(c,"/existence/").concat(e))}function l(e,t,n){return Object(a["e"])("".concat(c,"/search?pageNum=").concat(e,"&pageSize=").concat(t),n)}function p(e){return Object(a["e"])("".concat(c),e)}function f(e){return Object(a["c"])("".concat(c,"/health/").concat(e))}function d(e){return Object(a["e"])("".concat(c,"/recover/").concat(e),{})}function m(e,t){return Object(a["b"])("".concat(c,"/").concat(e,"?force=").concat(t))}function h(e){return Object(a["e"])("".concat(c,"/import/"),e)}function b(e){return Object(a["e"])("".concat(c,"/init/").concat(e,"/"),{})}function g(e,t){var n={clusterName:e,version:t};return Object(a["e"])("".concat(c,"/upgrade/"),n)}function _(e){return Object(a["c"])("".concat(c,"/status/").concat(e))}function v(e){return Object(a["c"])(r.replace("{cluster_name}",e))}function k(e,t){return Object(a["c"])(o.replace("{cluster_name}",e).replace("{log_id}",t))}function x(e){window.open("/ui/#/logger?clusterName=".concat(e),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function j(e,t){window.open("/ui/#/logger?clusterName=".concat(e,"&logId=").concat(t),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function y(e){return Object(a["c"])("".concat(c,"/secret/").concat(e))}},"841c":function(e,t,n){"use strict";var a=n("d784"),c=n("825a"),r=n("1d80"),o=n("129f"),i=n("577e"),s=n("14c3");a("search",(function(e,t,n){return[function(t){var n=r(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,n):new RegExp(t)[e](i(n))},function(e){var a=c(this),r=i(e),u=n(t,a,r);if(u.done)return u.value;var l=a.lastIndex;o(l,0)||(a.lastIndex=0);var p=s(a,r);return o(a.lastIndex,l)||(a.lastIndex=l),null===p?-1:p.index}]}))},"86ca":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"complex-table"},[e.$slots.header||e.header?n("div",{staticClass:"complex-table__header"},[e._t("header",(function(){return[e._v(e._s(e.header))]})),e.$slots.toolbar||e.searchConfig?n("div",{staticClass:"complex-table__toolbar"},[n("div",[e._t("toolbar")],2),n("fu-search-bar",e._b({on:{exec:e.search},scopedSlots:e._u([{key:"complex",fn:function(){return[e._t("complex")]},proxy:!0}],null,!0)},"fu-search-bar",e.searchConfig,!1),[e._t("buttons"),n("fu-table-column-select",{attrs:{columns:e.columns}})],2)],1):e._e()],2):e._e(),n("div",{staticClass:"complex-table__body"},[n("fu-table",e._g(e._b({attrs:{columns:e.columns,"local-key":e.localKey},on:{"selection-change":e.handleSelectionChange}},"fu-table",e.$attrs,!1),e.$listeners),[e._t("default")],2)],1),e.$slots.pagination||e.paginationConfig?n("div",{staticClass:"complex-table__pagination"},[e._t("pagination",(function(){return[n("fu-table-pagination",e._b({attrs:{"current-page":e.paginationConfig.currentPage,"page-size":e.paginationConfig.pageSize},on:{"update:currentPage":function(t){return e.$set(e.paginationConfig,"currentPage",t)},"update:current-page":function(t){return e.$set(e.paginationConfig,"currentPage",t)},"update:pageSize":function(t){return e.$set(e.paginationConfig,"pageSize",t)},"update:page-size":function(t){return e.$set(e.paginationConfig,"pageSize",t)},change:e.search}},"fu-table-pagination",e.paginationConfig,!1))]}))],2):e._e()])},c=[],r={name:"ComplexTable",props:{columns:{type:Array,default:function(){return[]}},localKey:String,header:String,searchConfig:Object,paginationConfig:Object,selects:Array},data:function(){return{condition:{}}},methods:{search:function(e,t){e&&(this.condition=e),this.$emit("search",this.condition,t)},handleSelectionChange:function(e){this.$emit("update:selects",e)}}},o=r,i=(n("1a55"),n("2877")),s=Object(i["a"])(o,a,c,!1,null,null,null);t["a"]=s.exports},"8e18":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("layout-content",{attrs:{header:"日志中心"}},[n("span",[e._v("集群名称：")]),n("el-select",{staticStyle:{"margin-bottom":"24px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.cluster,callback:function(t){e.cluster=t},expression:"cluster"}},e._l(e.options,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e.cluster?n("event",{attrs:{name:e.currCluster.name}}):e._e()],1)},c=[],r=(n("ac1f"),n("841c"),n("4de4"),n("159b"),n("b0c0"),n("be17")),o=n("7ea2"),i=n("b21e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("el-form",{attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"命名空间:"}},[n("el-select",{attrs:{size:"small","allow-create":"",filterable:""},on:{change:function(t){return e.changeNamespace()}},model:{value:e.currentNamespace,callback:function(t){e.currentNamespace=t},expression:"currentNamespace"}},e._l(e.namespaces,(function(e){return n("el-option",{key:e["metadata"].name,attrs:{label:e["metadata"].name,value:e["metadata"].name}})})),1)],1),n("el-form-item",{staticStyle:{float:"right"}},[n("el-switch",{attrs:{"active-text":e.$t("cluster.detail.event.enable_npd")},on:{change:function(t){return e.changeNpd()}},model:{value:e.isNPDon,callback:function(t){e.isNPDon=t},expression:"isNPDon"}})],1)],1),n("complex-table",{attrs:{data:e.data}},[n("el-table-column",{attrs:{label:e.$t("cluster.detail.event.msg_info"),"show-overflow-tooltip":"","min-width":"150",prop:"message",fix:""}}),n("el-table-column",{attrs:{label:e.$t("cluster.detail.event.msg_type"),"min-width":"80",prop:"type",fix:""}}),n("el-table-column",{attrs:{label:e.$t("cluster.detail.event.component"),"min-width":"80",prop:"source.component",fix:""}}),n("el-table-column",{attrs:{label:"Namespace","min-width":"80",prop:"metadata.namespace",fix:""}}),n("el-table-column",{attrs:{label:e.$t("cluster.detail.log.time")},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(e._f("datetimeFormat")(n.firstTimestamp))+" ")]}}])})],1),n("k8s-page",{attrs:{currentPage:e.page.currentPage,nextToken:e.page.nextToken},on:{pageChange:e.pageChange}})],1)},u=[],l=n("b85c"),p=n("86ca"),f=n("0600"),d=n("cacb"),m=n("4e53"),h=n("65e5"),b={name:"ClusterEvent",components:{ComplexTable:p["a"],K8sPage:m["a"]},props:["name"],data:function(){return{loading:!1,page:{continueToken:"",currentPage:1,nextToken:""},clusterName:"",namespaces:[],currentNamespace:"kube-operator",isNPDon:!1,data:[]}},methods:{search:function(){var e=this;this.loading=!0,Object(f["c"])(this.clusterName).then((function(t){e.namespaces=t.items,t.items.length>0&&(e.currentNamespace=e.currentNamespace?e.currentNamespace:e.namespaces[0].metadata.name,e.loadEvents(e.currentNamespace))})).catch((function(){e.loading=!1})),this.getNpdExists()},pageChange:function(e){this.page.continueToken=e.token,this.page.currentPage=e.page,this.search()},loadEvents:function(e){var t=this;Object(h["b"])(this.clusterName,this.page.continueToken,e).then((function(e){t.loading=!1,t.data=e.items,t.page.nextToken=e.metadata["continue"]?e.metadata["continue"]:""})).catch((function(){t.loading=!1}))},getNpdExists:function(){var e=this;Object(d["c"])(this.clusterName).then((function(t){var n,a=t.items,c=!1,r=Object(l["a"])(a);try{for(r.s();!(n=r.n()).done;){var o=n.value;if("node-problem-detector-"===o.metadata.generateName&&(c=!0,"Terminating"===o.status.phase)){e.isNPDon=!1,c=!1;break}}}catch(i){r.e(i)}finally{r.f()}c&&(e.isNPDon=!0)}))},changeNpd:function(){var e=this,t=this.isNPDon?"create":"delete";Object(h["a"])(this.clusterName,t).then((function(){"delete"!==t?e.$message({type:"success",message:e.$t("cluster.detail.event.enable_npd_success")}):e.$message({type:"success",message:e.$t("cluster.detail.event.disable_npd_success")})}))},changeNamespace:function(){this.loading=!0,this.page.currentPage=1,this.page.continueToken="",this.loadEvents(this.currentNamespace)}},created:function(){this.clusterName=this.name,this.search()}},g=b,_=n("2877"),v=Object(_["a"])(g,s,u,!1,null,"b03cf55c",null),k=v.exports,x={name:"serviceMesh",components:{LayoutContent:r["a"],event:k},data:function(){return{isAdmin:Object(i["a"])("ADMIN"),paginationConfig:{currentPage:1,pageSize:1e4,total:0},cluster:"",options:[],arch:""}},mounted:function(){this.search()},computed:{currCluster:function(){var e=this,t=this.options.filter((function(t){return t.value===e.cluster}));return t[0]||[]}},methods:{search:function(e){var t=this;this.loading=!0;var n=this.paginationConfig,a=n.currentPage,c=n.pageSize;Object(o["p"])(a,c,e).then((function(e){t.loading=!1,t.options=e.items,t.options.forEach((function(e){e.value=e.label=e.name})),t.cluster=t.options[0].value}))}}},j=x,y=(n("ff5c"),Object(_["a"])(j,a,c,!1,null,"bde6ad1e",null));t["default"]=y.exports},9237:function(e,t,n){},"992c":function(e,t,n){e.exports={theme:"#5354bb"}},a026:function(e,t,n){"use strict";n("992c")},b21e:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("caad"),n("2532");var a=n("4360"),c=function(e){var t=a["a"].getters&&a["a"].getters.roles;return t.some((function(t){return e.includes(t)}))}},b85c:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");var a=n("06c5");function c(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Object(a["a"])(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var c=0,r=function(){};return{s:r,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}},be17:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-container"},[e.$slots.description||e.description?n("div",{staticClass:"content-container__description"},[n("el-alert",{attrs:{title:e.description,type:"info"}}),n("br")],1):e._e(),e.$slots.header||e.header?n("div",{staticClass:"content-container__header"},[e._t("header",(function(){return[e.showBack?n("back-button",{attrs:{path:e.backPath,name:e.backName,to:e.backTo}}):e._e(),e._v(" "+e._s(e.header)+" ")]}))],2):e._e(),e.$slots.toolbar?n("div",{staticClass:"content-container__toolbar"},[e._t("toolbar")],2):e._e(),e._t("default")],2)},c=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-icon",{staticClass:"back-button",attrs:{name:"back"},nativeOn:{click:function(t){return e.jump.apply(null,arguments)}}})},o=[],i=(n("b0c0"),{name:"BackButton",props:{path:String,name:String,to:Object},methods:{jump:function(){var e=this.path,t=this.name,n=this.to;e&&this.$router.push(e),t&&this.$router.push(t),n&&this.$router.push(n)}}}),s=i,u=(n("eb9f"),n("2877")),l=Object(u["a"])(s,r,o,!1,null,null,null),p=l.exports,f={name:"LayoutContent",components:{BackButton:p},props:{header:String,description:String,backPath:String,backName:String,backTo:Object},computed:{showBack:function(e){var t=e.backPath,n=e.backName,a=e.backTo;return t||n||a}}},d=f,m=(n("a026"),Object(u["a"])(d,a,c,!1,null,null,null));t["a"]=m.exports},cacb:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return p}));n("ac1f"),n("5319");var a=n("ff66"),c="/proxy/kubernetes/{cluster_name}/{resource_url}",r="apis/apps/v1/deployments",o="apis/apps/v1/namespaces/{namespace}/deployments",i="api/v1/pods",s="api/v1/namespaces/{namespace}/pods/";function u(e,t,n){var i=c.replace("{cluster_name}",e);return i=void 0!==n&&null!==n?i.replace("{resource_url}",o).replace("{namespace}",n):i.replace("{resource_url}",r),Object(a["c"])(i)}function l(e,t,n){var r=c.replace("{cluster_name}",e);return r=void 0!==n&&null!==n?r.replace("{resource_url}",s).replace("{namespace}",n):r.replace("{resource_url}",i),Object(a["c"])(r)}function p(e){return Object(a["c"])("/api/v1/clusters/webkubectl/".concat(e,"?l=zh-CN"))}},eb9f:function(e,t,n){"use strict";n("f574")},f574:function(e,t,n){e.exports={theme:"#5354bb"}},ff5c:function(e,t,n){"use strict";n("9237")}}]);
//# sourceMappingURL=chunk-bc0cf392.fcb4aab8.js.map