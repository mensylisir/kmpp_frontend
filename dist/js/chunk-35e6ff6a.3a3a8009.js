(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35e6ff6a"],{2429:function(e,r,t){"use strict";t.d(r,"j",(function(){return p})),t.d(r,"b",(function(){return v})),t.d(r,"l",(function(){return f})),t.d(r,"f",(function(){return d})),t.d(r,"a",(function(){return _})),t.d(r,"i",(function(){return b})),t.d(r,"k",(function(){return h})),t.d(r,"d",(function(){return g})),t.d(r,"h",(function(){return k})),t.d(r,"e",(function(){return $})),t.d(r,"c",(function(){return y})),t.d(r,"g",(function(){return x}));t("2769"),t("0756");var a=t("ff66"),s="/proxy/kubernetes/{cluster_name}/{resource_url}",o=10,l="api/v1/persistentvolumes",n="apis/storage.k8s.io/v1/storageclasses",c="api/v1/persistentvolumes/{name}",i="apis/storage.k8s.io/v1/storageclasses/{name}",u="/api/v1/clusters/provisioner/{cluster_name}",m="api/v1/namespaces/{namespace}/secrets";function p(e){return Object(a["c"])(u.replace("{cluster_name}",e))}function v(e,r){return Object(a["e"])(u.replace("{cluster_name}",e),r)}function f(e,r){var t="/api/v1/clusters/provisioner/sync/{cluster_name}",s=t.replace("{cluster_name}",e);return Object(a["e"])(s,r)}function d(e,r){var t="/api/v1/clusters/provisioner/delete/{cluster_name}",s=t.replace("{cluster_name}",e);return Object(a["e"])(s,r)}function _(e,r){var t=s.replace("{cluster_name}",e).replace("{resource_url}",l);return Object(a["e"])(t,r)}function b(e,r){var t=s.replace("{cluster_name}",e).replace("{resource_url}",l);return t+="?limit="+o,void 0!==r&&null!==r&&(t+="&continue="+r),Object(a["c"])(t)}function h(e,r,t){var l=s.replace("{cluster_name}",e).replace("{resource_url}",n);return t||(l+="?limit="+o),void 0!==r&&null!==r&&(l+="&continue="+r),Object(a["c"])(l)}function g(e,r){var t=s.replace("{cluster_name}",e).replace("{resource_url}",n);return Object(a["e"])(t,r)}function k(e,r){var t=s.replace("{cluster_name}",e).replace("{resource_url}",i).replace("{name}",r);return Object(a["b"])(t)}function $(e,r){var t=s.replace("{cluster_name}",e).replace("{resource_url}",c).replace("{name}",r);return Object(a["b"])(t)}function y(e,r,t){var o=s.replace("{cluster_name}",e).replace("{resource_url}",m.replace("{namespace}",r));return Object(a["e"])(o,t)}function x(e,r,t){var o=s.replace("{cluster_name}",e).replace("{resource_url}",m.replace("{namespace}",r)+"/"+t);return Object(a["b"])(o)}},"43dd":function(e,r,t){e.exports={theme:"#5354bb"}},"52f4":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("layout-content",[t("el-row",{staticStyle:{"margin-top":"20px"}},[t("el-col",{attrs:{span:4}},[t("br")]),t("el-col",{attrs:{span:10}},[t("div",{staticClass:"grid-content bg-purple-light"},[t("el-form",{ref:"form",attrs:{"label-position":"left",model:e.form,"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.$t("commons.table.type")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},on:{change:function(r){return e.changeSelection()}},model:{value:e.createType,callback:function(r){e.createType=r},expression:"createType"}},[t("el-option",{attrs:{value:"nfs",label:"nfs"}},[e._v("nfs")]),t("el-option",{attrs:{value:"external-ceph",label:"external-ceph"}},[e._v("external-ceph")]),t("el-option",{attrs:{value:"rook-ceph",label:"rook-ceph"}},[e._v("rook-ceph")]),t("el-option",{attrs:{value:"cinder",label:"cinder"}},[e._v("cinder")]),t("el-option",{attrs:{value:"vsphere",label:"vsphere"}},[e._v("vsphere")]),t("el-option",{attrs:{value:"glusterfs",label:"glusterfs"}},[e._v("glusterfs")]),t("el-option",{attrs:{value:"oceanstor",label:"oceanstor"}},[e._v("oceanstor")])],1)],1),"nfs"===e.createType?t("div",[t("el-form-item",{attrs:{label:e.$t("commons.table.name"),prop:"name",rules:e.nameRules}},[t("el-input",{attrs:{placeholder:e.$t("commons.validate.common_name_help")},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"Version",prop:"vars.storage_nfs_server_version",rules:e.requiredRules}},[t("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.form.vars["storage_nfs_server_version"],callback:function(r){e.$set(e.form.vars,"storage_nfs_server_version",r)},expression:"form.vars['storage_nfs_server_version']"}},[t("el-option",{attrs:{value:"3",label:"3"}},[e._v("3")]),t("el-option",{attrs:{value:"4",label:"4"}},[e._v("4")])],1)],1),t("el-form-item",{attrs:{label:"Server",prop:"vars.storage_nfs_server",rules:e.requiredRules}},[t("el-input",{attrs:{clearable:""},model:{value:e.form.vars["storage_nfs_server"],callback:function(r){e.$set(e.form.vars,"storage_nfs_server",r)},expression:"form.vars['storage_nfs_server']"}})],1),t("el-form-item",{attrs:{label:"Path",prop:"vars.storage_nfs_server_path",rules:e.requiredRules}},[t("el-input",{attrs:{clearable:""},model:{value:e.form.vars["storage_nfs_server_path"],callback:function(r){e.$set(e.form.vars,"storage_nfs_server_path",r)},expression:"form.vars['storage_nfs_server_path']"}})],1)],1):e._e(),"external-ceph"===e.createType?t("div",[t("el-form-item",{attrs:{label:e.$t("commons.table.name")}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1)],1):e._e(),"rook-ceph"===e.createType?t("div",[t("el-form-item",{attrs:{label:e.$t("commons.table.name")}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.disk_name"),prop:"vars.storage_rook_path",rules:e.requiredRules}},[t("el-input",{attrs:{clearable:""},model:{value:e.form.vars["storage_rook_path"],callback:function(r){e.$set(e.form.vars,"storage_rook_path",r)},expression:"form.vars['storage_rook_path']"}}),t("div",[t("span",{staticClass:"input-help"},[e._v(e._s(e.$t("cluster.detail.storage.disk_name_help")))])])],1)],1):e._e(),"cinder"===e.createType?t("div",[t("el-form-item",{attrs:{label:e.$t("commons.table.name")}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"Identity",prop:"vars.cinder_auth_url",rules:e.requiredRules}},[t("el-input",{attrs:{placeholder:" http://128.110.154.166/identity",clearable:""},model:{value:e.form.vars["cinder_auth_url"],callback:function(r){e.$set(e.form.vars,"cinder_auth_url",r)},expression:"form.vars['cinder_auth_url']"}})],1),t("el-form-item",{attrs:{label:"UserName",prop:"vars.cinder_username",rules:e.requiredRules}},[t("el-input",{attrs:{placeholder:" admin",clearable:""},model:{value:e.form.vars["cinder_username"],callback:function(r){e.$set(e.form.vars,"cinder_username",r)},expression:"form.vars['cinder_username']"}})],1),t("el-form-item",{attrs:{label:"Password",prop:"vars.cinder_password",rules:e.passwordRules}},[t("el-input",{attrs:{type:"password",clearable:""},model:{value:e.form.vars["cinder_password"],callback:function(r){e.$set(e.form.vars,"cinder_password",r)},expression:"form.vars['cinder_password']"}})],1),t("el-form-item",{attrs:{label:"Region",prop:"vars.cinder_region",rules:e.requiredRules}},[t("el-input",{attrs:{placeholder:" RegionOne",clearable:""},model:{value:e.form.vars["cinder_region"],callback:function(r){e.$set(e.form.vars,"cinder_region",r)},expression:"form.vars['cinder_region']"}})],1),t("el-form-item",{attrs:{label:"Tenant Name",prop:"vars.cinder_tenant_name",rules:e.requiredRules}},[t("el-input",{attrs:{placeholder:" admin",clearable:""},model:{value:e.form.vars["cinder_tenant_name"],callback:function(r){e.$set(e.form.vars,"cinder_tenant_name",r)},expression:"form.vars['cinder_tenant_name']"}})],1),t("el-form-item",{attrs:{label:"Domain Name",prop:"vars.cinder_domain_name",rules:e.requiredRules}},[t("el-input",{attrs:{placeholder:" Default",clearable:""},model:{value:e.form.vars["cinder_domain_name"],callback:function(r){e.$set(e.form.vars,"cinder_domain_name",r)},expression:"form.vars['cinder_domain_name']"}})],1),t("el-form-item",{attrs:{label:e.$t("cluster.detail.tool.enable_storage")}},[t("el-switch",{staticStyle:{width:"80%"},attrs:{"active-value":"enable","inactive-value":"disable"},model:{value:e.enableBlockStorage,callback:function(r){e.enableBlockStorage=r},expression:"enableBlockStorage"}})],1),"enable"===e.enableBlockStorage?t("div",[t("el-form-item",{attrs:{label:"Version",prop:"vars.cinder_blockstorage_version",rules:e.requiredRules}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.form.vars["cinder_blockstorage_version"],callback:function(r){e.$set(e.form.vars,"cinder_blockstorage_version",r)},expression:"form.vars['cinder_blockstorage_version']"}},[t("el-option",{attrs:{value:"V3",label:"V3"}},[e._v("V3")])],1),t("div",[t("span",{staticClass:"input-help"},[e._v(e._s(e.$t("cluster.detail.storage.cinder_version_help")))])])],1),t("el-form-item",{attrs:{label:"Attach Limit",prop:"vars.node_volume_attach_limit",rules:e.requiredRules}},[t("el-input",{attrs:{placeholder:" 256",clearable:""},model:{value:e.form.vars["node_volume_attach_limit"],callback:function(r){e.$set(e.form.vars,"node_volume_attach_limit",r)},expression:"form.vars['node_volume_attach_limit']"}})],1)],1):e._e()],1):e._e(),"vsphere"===e.createType?t("div",[t("el-form-item",[t("div",[t("span",{staticClass:"input-help"},[e._v(e._s(e.$t("cluster.detail.storage.vsphere_select_help")))])])]),t("el-form-item",{attrs:{label:e.$t("commons.table.name")}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.vcenter_host"),prop:"vars.vc_host",rules:e.requiredRules}},[t("el-input",{attrs:{clearable:""},model:{value:e.form.vars["vc_host"],callback:function(r){e.$set(e.form.vars,"vc_host",r)},expression:"form.vars['vc_host']"}})],1),t("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.vcenter_port"),prop:"vars.vc_port",rules:e.requiredRules}},[t("el-input",{attrs:{clearable:""},model:{value:e.form.vars["vc_port"],callback:function(r){e.$set(e.form.vars,"vc_port",r)},expression:"form.vars['vc_port']"}})],1),t("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.vcenter_username"),prop:"vars.vc_username",rules:e.requiredRules}},[t("el-input",{attrs:{clearable:""},model:{value:e.form.vars["vc_username"],callback:function(r){e.$set(e.form.vars,"vc_username",r)},expression:"form.vars['vc_username']"}})],1),t("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.vcenter_password"),prop:"vars.vc_password",rules:e.requiredRules}},[t("el-input",{attrs:{type:"password",clearable:""},model:{value:e.form.vars["vc_password"],callback:function(r){e.$set(e.form.vars,"vc_password",r)},expression:"form.vars['vc_password']"}})],1),t("el-form-item",{attrs:{label:"Datacenter",prop:"vars.datacenter",rules:e.requiredRules}},[t("el-input",{attrs:{clearable:""},model:{value:e.form.vars["datacenter"],callback:function(r){e.$set(e.form.vars,"datacenter",r)},expression:"form.vars['datacenter']"}})],1),t("el-form-item",{attrs:{label:"Folder",prop:"vars.folder",rules:e.requiredRules}},[t("el-input",{attrs:{clearable:""},model:{value:e.form.vars["folder"],callback:function(r){e.$set(e.form.vars,"folder",r)},expression:"form.vars['folder']"}})],1)],1):e._e(),"glusterfs"===e.createType?t("div",[t("el-form-item",{attrs:{label:e.$t("commons.table.name")}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1)],1):e._e(),"oceanstor"===e.createType?t("div",[t("el-form-item",{attrs:{label:e.$t("commons.table.name")}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.deploy_mode"),prop:"vars.oceanstor_controller_type",rules:e.requiredRules}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.form.vars["oceanstor_controller_type"],callback:function(r){e.$set(e.form.vars,"oceanstor_controller_type",r)},expression:"form.vars['oceanstor_controller_type']"}},[t("el-option",{attrs:{value:"single",label:"single"}},[e._v("single")]),t("el-option",{attrs:{value:"multi",label:"single"}},[e._v("multi")])],1)],1),t("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.multi_path_networking"),prop:"vars.oceanstor_is_multipath",rules:e.requiredRules}},[t("el-switch",{staticStyle:{width:"80%"},attrs:{"active-value":"yes","inactive-value":"no"},model:{value:e.form.vars["oceanstor_is_multipath"],callback:function(r){e.$set(e.form.vars,"oceanstor_is_multipath",r)},expression:"form.vars['oceanstor_is_multipath']"}})],1),t("el-form-item",{attrs:{label:e.$t("commons.table.type"),prop:"vars.oceanstor_type",rules:e.requiredRules}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.form.vars["oceanstor_type"],callback:function(r){e.$set(e.form.vars,"oceanstor_type",r)},expression:"form.vars['oceanstor_type']"}},[t("el-option",{attrs:{value:"nfs",label:"nfs"}},[e._v("nfs")]),t("el-option",{attrs:{value:"iscsi",label:"iscsi"}},[e._v("iscsi")]),t("el-option",{attrs:{value:"fc",label:"fc"}},[e._v("fc")])],1)],1),t("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.product"),prop:"vars.oceanstor_product",rules:e.requiredRules}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.form.vars["oceanstor_product"],callback:function(r){e.$set(e.form.vars,"oceanstor_product",r)},expression:"form.vars['oceanstor_product']"}},[t("el-option",{attrs:{value:"V3",label:"V3"}},[e._v("V3")]),t("el-option",{attrs:{value:"V5",label:"V5"}},[e._v("V5")]),t("el-option",{attrs:{value:"Dorado",label:"Dorado"}},[e._v("Dorado")])],1)],1),t("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.manage_url"),prop:"vars.oceanstor_urls",rules:e.requiredRules}},[t("el-input",{attrs:{placeholder:"10.1.1.1,10.1.1.2",clearable:""},model:{value:e.form.vars["oceanstor_urls"],callback:function(r){e.$set(e.form.vars,"oceanstor_urls",r)},expression:"form.vars['oceanstor_urls']"}})],1),t("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.user_name"),prop:"vars.oceanstor_user",rules:e.requiredRules}},[t("el-input",{attrs:{clearable:""},model:{value:e.form.vars["oceanstor_user"],callback:function(r){e.$set(e.form.vars,"oceanstor_user",r)},expression:"form.vars['oceanstor_user']"}})],1),t("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.password"),prop:"vars.oceanstor_password",rules:e.passwordRules}},[t("el-input",{attrs:{type:"password",clearable:""},model:{value:e.form.vars["oceanstor_password"],callback:function(r){e.$set(e.form.vars,"oceanstor_password",r)},expression:"form.vars['oceanstor_password']"}})],1),t("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.storage_pool"),prop:"vars.oceanstor_pools",rules:e.requiredRules}},[t("el-input",{attrs:{placeholder:"pool1,pool2",clearable:""},model:{value:e.form.vars["oceanstor_pools"],callback:function(r){e.$set(e.form.vars,"oceanstor_pools",r)},expression:"form.vars['oceanstor_pools']"}})],1),"nfs"===e.form.vars["oceanstor_type"]?t("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.logic_port"),prop:"vars.oceanstor_portal",rules:e.requiredRules}},[t("el-input",{attrs:{placeholder:"test1,test2",clearable:""},model:{value:e.form.vars["oceanstor_portal"],callback:function(r){e.$set(e.form.vars,"oceanstor_portal",r)},expression:"form.vars['oceanstor_portal']"}}),t("div",[t("span",{staticClass:"input-help"},[e._v(e._s(e.$t("cluster.detail.storage.logic_port_help")))])])],1):e._e(),"iscsi"===e.form.vars["oceanstor_type"]?t("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.business_ip"),prop:"vars.oceanstor_portal",rules:e.requiredRules}},[t("el-input",{attrs:{placeholder:"10.1.1.1,10.1.1.2",clearable:""},model:{value:e.form.vars["oceanstor_portal"],callback:function(r){e.$set(e.form.vars,"oceanstor_portal",r)},expression:"form.vars['oceanstor_portal']"}}),t("div",[t("span",{staticClass:"input-help"},[e._v(e._s(e.$t("cluster.detail.storage.business_ip_help")))])])],1):e._e()],1):e._e(),t("el-form-item",[t("div",{staticStyle:{float:"right"}},[t("el-button",{on:{click:function(r){return e.onCancel()}}},[e._v(e._s(e.$t("commons.button.cancel")))]),t("el-button",{attrs:{type:"primary",disabled:!e.createType||e.submitLoading},on:{click:e.onSubmit}},[e._v(e._s(e.$t("commons.button.create")))])],1)])],1)],1)])],1)],1)},s=[],o=(t("f5bd"),t("be17")),l=t("2429"),n=t("0792"),c={name:"ClusterStorageProvionerCreate",components:{LayoutContent:o["a"]},data:function(){return{submitLoading:!1,createType:"",form:{name:"",type:"",vars:{}},nameRules:[n["a"].CommonNameRule],requiredRules:[n["a"].RequiredRule],passwordRules:[n["a"].PasswordRule],enableBlockStorage:"disable"}},methods:{onSubmit:function(){var e=this;this.$refs["form"].validate((function(r){if(!r)return!1;e.submitLoading=!0,e.form.type=e.createType,"conder"===e.form.type&&(e.form.vars["enable_blockstorage"]=e.enableBlockStorage),Object(l["b"])(e.clusterName,e.form).then((function(){e.$message({type:"success",message:e.$t("commons.msg.save_success")}),e.$router.push({name:"ClusterStorage"}),e.submitLoading=!0})).catch((function(){e.submitLoading=!1}))}))},onCancel:function(){this.$router.push({name:"ClusterStorage"})},changeSelection:function(){switch(this.$refs["form"].clearValidate(),this.form.vars={},this.form.name="",this.createType){case"external-ceph":this.form.name="external-ceph";break;case"rook-ceph":this.form.name="rook-ceph.rbd.csi.ceph.com";break;case"cinder":this.form.name="cinder.csi.openstack.org",this.enableBlockStorage="disable";break;case"glusterfs":this.form.name="kubernetes.io/glusterfs";break;case"oceanstor":this.form.name="csi.huawei.com",this.form.vars={oceanstor_controller_type:"single",oceanstor_is_multipath:"no"};break;case"vsphere":this.form.name="csi.vsphere.vmware.com";break}}},created:function(){this.clusterName=this.$route.params.name}},i=c,u=t("5d22"),m=Object(u["a"])(i,a,s,!1,null,"880770b0",null);r["default"]=m.exports},a026:function(e,r,t){"use strict";t("f5c4")},be17:function(e,r,t){"use strict";var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"content-container"},[e.$slots.description||e.description?t("div",{staticClass:"content-container__description"},[t("el-alert",{attrs:{title:e.description,type:"info"}}),t("br")],1):e._e(),e.$slots.header||e.header?t("div",{staticClass:"content-container__header"},[e._t("header",(function(){return[e.showBack?t("back-button",{attrs:{path:e.backPath,name:e.backName,to:e.backTo}}):e._e(),e._v(" "+e._s(e.header)+" ")]}))],2):e._e(),e.$slots.toolbar?t("div",{staticClass:"content-container__toolbar"},[e._t("toolbar")],2):e._e(),e._t("default")],2)},s=[],o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-icon",{staticClass:"back-button",attrs:{name:"back"},nativeOn:{click:function(r){return e.jump.apply(null,arguments)}}})},l=[],n=(t("f5bd"),{name:"BackButton",props:{path:String,name:String,to:Object},methods:{jump:function(){var e=this.path,r=this.name,t=this.to;e&&this.$router.push(e),r&&this.$router.push(r),t&&this.$router.push(t)}}}),c=n,i=(t("eb9f"),t("5d22")),u=Object(i["a"])(c,o,l,!1,null,null,null),m=u.exports,p={name:"LayoutContent",components:{BackButton:m},props:{header:String,description:String,backPath:String,backName:String,backTo:Object},computed:{showBack:function(e){var r=e.backPath,t=e.backName,a=e.backTo;return r||t||a}}},v=p,f=(t("a026"),Object(i["a"])(v,a,s,!1,null,null,null));r["a"]=f.exports},eb9f:function(e,r,t){"use strict";t("43dd")},f5c4:function(e,r,t){e.exports={theme:"#5354bb"}}}]);
//# sourceMappingURL=chunk-35e6ff6a.3a3a8009.js.map