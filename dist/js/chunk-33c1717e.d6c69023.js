(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33c1717e"],{b509:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("layout-content",{attrs:{header:t.$t("user.user")}},[s("complex-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.data,"local-key":"user_columns","search-config":t.searchConfig,"pagination-config":t.paginationConfig,selects:t.selects,fit:!0},on:{search:t.search,"update:selects":function(e){t.selects=e}},scopedSlots:t._u([{key:"toolbar",fn:function(){return[s("el-button-group",[s("el-button",{attrs:{size:"small"},on:{click:function(e){return t.create()}}},[t._v(t._s(t.$t("commons.button.create")))]),s("el-button",{attrs:{size:"small",disabled:0===t.selects.length},on:{click:function(e){return t.del()}}},[t._v(t._s(t.$t("commons.button.delete"))+" ")])],1)]},proxy:!0}])},[s("el-table-column",{attrs:{type:"selection",fix:""}}),s("el-table-column",{attrs:{label:t.$t("commons.table.name"),"mix-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[s("el-row",[s("el-col",{attrs:{span:18}},[t._v(" "+t._s(n.name)),s("br")])],1)]}}])}),s("el-table-column",{attrs:{label:t.$t("user.email"),"min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[s("el-row",[s("el-col",[t._v(" "+t._s(t._f("emailFormat")(n.email))+" ")])],1)]}}])}),s("el-table-column",{attrs:{label:t.$t("commons.table.status")},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[s("ko-status",{attrs:{status:e.status}})]}}])}),s("el-table-column",{attrs:{label:t.$t("user.type")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return["LDAP"===n.type?s("span",[t._v(t._s(t.$t("user.ldap")))]):t._e(),"LOCAL"===n.type?s("span",[t._v(t._s(t.$t("user.local")))]):t._e()]}}])}),s("el-table-column",{attrs:{label:t.$t("user.role"),"min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[s("span",{attrs:{size:"small"}},[t._v(t._s(t.$t("commons.role."+n.role)))])]}}])}),s("el-table-column",{attrs:{label:t.$t("commons.table.create_time"),"min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[t._v(" "+t._s(t._f("datetimeFormat")(s.createdAt))+" ")]}}])}),s("fu-table-operations",{attrs:{buttons:t.buttons,label:t.$t("commons.table.action"),fix:""}})],1)],1)},a=[],o=s("30d5"),i=(s("f5bd"),s("2769"),s("ecf1"),s("a5c9"),s("b1fa"),s("2e6f"),s("af21"),s("be17")),c=s("c24f"),l=s("86ca"),r=s("bda0"),u=s("3786"),m={name:"UserList",components:{KoStatus:r["a"],ComplexTable:l["a"],LayoutContent:i["a"]},data:function(){var t=this;return{buttons:[{label:this.$t("commons.button.edit"),icon:"el-icon-edit",click:function(e){t.$router.push({name:"UserEdit",params:{name:e.name}})},disabled:function(t){return"LDAP"===t.type}},{label:this.$t("commons.button.lock"),icon:"el-icon-lock",click:function(e){t.update(e)},disabled:function(e){return t.currentUser.user.name===e.name||"admin"===e.name||"LDAP"===e.type}},{label:this.$t("commons.button.delete"),icon:"el-icon-delete",click:function(e){t.del(e.name)},disabled:function(e){return t.currentUser.user.name===e.name||"admin"===e.name}}],searchConfig:{quickPlaceholder:this.$t("commons.search.quickSearch"),components:[{field:"name",label:this.$t("commons.table.name"),component:"FuComplexInput",defaultOperator:"eq"},{field:"is_active",label:this.$t("commons.table.status"),component:"FuComplexSelect",options:[{label:this.$t("commons.status.active"),value:1},{label:this.$t("commons.status.passive"),value:0}],multiple:!0},{field:"is_admin",label:this.$t("user.role"),component:"FuComplexSelect",options:[{label:this.$t("commons.role.admin"),value:1},{label:this.$t("commons.role.user"),value:0}],multiple:!0},{field:"created_at",label:this.$t("commons.table.create_time"),component:"FuComplexDateTime",valueFormat:"yyyy-MM-dd HH:mm:ss"}]},paginationConfig:{currentPage:1,pageSize:10,total:0},data:[],loading:!1,selects:[],currentUser:{}}},methods:{create:function(){this.$router.push({name:"UserCreate"})},search:function(t){var e=this;this.loading=!0;var s=this.paginationConfig,n=s.currentPage,a=s.pageSize;Object(c["d"])(n,a,t).then((function(t){e.loading=!1,e.data=t.items,e.paginationConfig.total=t.total}))},del:function(t){var e=this;this.$confirm(this.$t("commons.confirm_message.delete"),this.$t("commons.message_box.prompt"),{confirmButtonText:this.$t("commons.button.confirm"),cancelButtonText:this.$t("commons.button.cancel"),type:"warning"}).then((function(){if(t)Object(c["b"])(t).then((function(){e.search(),e.$message({type:"success",message:"".concat(t).concat(e.$t("commons.msg.delete_success"),"!")})}));else{var s,n=[],a=Object(o["a"])(e.selects);try{for(a.s();!(s=a.n()).done;){var i=s.value;n.push(Object(c["b"])(i.name))}}catch(l){a.e(l)}finally{a.f()}Promise.all(n).then((function(){e.search(),e.$message({type:"success",message:e.$t("commons.msg.delete_success")})}))}}))},update:function(t){var e=this;"active"===t.status?t.status="passive":t.status="active",Object(c["e"])(t.name,t).then((function(){e.$message({type:"success",message:"".concat(e.$t("commons.msg.save_success"),"!")}),e.search()}))}},created:function(){var t=this;Object(u["b"])().then((function(e){t.currentUser=e,t.search()}))}},d=m,f=s("5d22"),p=Object(f["a"])(d,n,a,!1,null,"be5f31f8",null);e["default"]=p.exports},bda0:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ko-status"},["Running"===t.status?s("div",[s("span",{staticClass:"iconfont iconduihao",staticStyle:{color:"#32B350"}}),t._v(" "+t._s(t.$t("commons.status.running"))+" ")]):t._e(),"Failed"===t.status?s("div",[s("span",{staticClass:"iconfont iconerror",staticStyle:{color:"#FA4147"}}),t._v("       "),s("el-link",{attrs:{type:"info"},on:{click:function(e){return t.getDetail()}}},[t._v(t._s(t.$t("commons.status.failed")))])],1):t._e(),"Initializing"===t.status?s("div",[s("i",{staticClass:"el-icon-loading"}),t._v("      "),"host"===t.other?s("span",[t._v(t._s(t.$t("commons.status.initializing")))]):s("el-link",{attrs:{type:"info"},on:{click:function(e){return t.getDetail()}}},[t._v(" "+t._s(t.$t("commons.status.initializing")))])],1):t._e(),"Upgrading"===t.status?s("div",[s("i",{staticClass:"el-icon-loading"}),t._v("       "),s("el-link",{attrs:{type:"info"},on:{click:function(e){return t.getDetail()}}},[t._v(" "+t._s(t.$t("commons.status.upgrading"))+" ")])],1):t._e(),"Terminating"===t.status&&"bareMetal"===t.other?s("div",[s("i",{staticClass:"el-icon-loading"}),t._v("       "),s("el-link",{attrs:{type:"info"},on:{click:function(e){return t.getDetail()}}},[t._v(t._s(t.$t("commons.status.terminating"))+" ")])],1):t._e(),"Terminating"===t.status&&"plan"===t.other?s("div",[s("i",{staticClass:"el-icon-loading"}),t._v("       "),s("span",[t._v(t._s(t.$t("commons.status.terminating"))+" ")])]):t._e(),"Terminating"===t.status&&"host"===t.other?s("div",[s("i",{staticClass:"el-icon-loading"}),t._v("       "),s("span",[t._v(t._s(t.$t("commons.status.terminating"))+" ")])]):t._e(),"Synchronizing"===t.status&&"host"===t.other?s("div",[s("i",{staticClass:"el-icon-loading"}),t._v("       "),s("span",[t._v(t._s(t.$t("commons.status.synchronizing"))+" ")])]):t._e(),"Creating"===t.status?s("div",[s("i",{staticClass:"el-icon-loading"}),t._v(t._s(t.$t("commons.status.creating"))+" ")]):t._e(),"active"===t.status?s("div",[s("span",{staticClass:"iconfont iconduihao",staticStyle:{color:"#32B350"}}),t._v(" "+t._s(t.$t("commons.status.active"))+" ")]):t._e(),"passive"===t.status?s("div",[s("span",{staticClass:"iconfont icondiable",staticStyle:{color:"#FA4147"}}),t._v(" "+t._s(t.$t("commons.status.passive"))+" ")]):t._e()])},a=[],o={name:"KoStatus",props:["status","content","other"],methods:{getDetail:function(){this.$emit("detail")}}},i=o,c=s("5d22"),l=Object(c["a"])(i,n,a,!1,null,"6921be58",null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-33c1717e.d6c69023.js.map