{"version":3,"sources":["webpack:///./src/business/system-setting/email/index.vue?319d","webpack:///src/business/system-setting/email/index.vue","webpack:///./src/business/system-setting/email/index.vue?fd1d","webpack:///./src/business/system-setting/email/index.vue","webpack:///./src/api/system-setting.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","directives","name","rawName","value","expression","ref","rules","form","staticStyle","$t","model","vars","callback","$$v","$set","btnSlect","on","verify","_v","_s","onSubmit","staticRenderFns","data","EMAIL_STATUS","SMTP_ADDRESS","SMTP_PASSWORD","SMTP_PORT","SMTP_TEST_USER","SMTP_USERNAME","tab","btn","loading","methods","$refs","validate","valid","computed","status","created","component","settingUrl","messageUrl","getSetting","tabName","get","check","post","createSetting","listRegistryAll","createRegistry","updateRegistry","arch","patch","searchRegistry","currentPage","pageSize","conditions","getRegistry","id","deleteRegistry","del","getMessageSetting","checkMessage","createMessageSetting","syncLDAP","createLDAP"],"mappings":"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","file":"js/chunk-6c4247d5.6e7e88ca.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('br'),_c('el-col',{attrs:{\"span\":1}},[_c('br')]),_c('el-col',{attrs:{\"span\":12}},[_c('div',{staticClass:\"grid-content bg-purple-light\"},[_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"form\",attrs:{\"label-position\":\"left\",\"rules\":_vm.rules,\"model\":_vm.form,\"label-width\":\"120px\"}},[_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":_vm.$t('setting.table.mail.smtp'),\"prop\":\"vars.SMTP_ADDRESS\"}},[_c('el-input',{model:{value:(_vm.form.vars.SMTP_ADDRESS),callback:function ($$v) {_vm.$set(_vm.form.vars, \"SMTP_ADDRESS\", $$v)},expression:\"form.vars.SMTP_ADDRESS\"}})],1),_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":_vm.$t('setting.table.mail.port'),\"prop\":\"vars.SMTP_PORT\"}},[_c('el-input',{model:{value:(_vm.form.vars.SMTP_PORT),callback:function ($$v) {_vm.$set(_vm.form.vars, \"SMTP_PORT\", $$v)},expression:\"form.vars.SMTP_PORT\"}})],1),_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":_vm.$t('setting.table.mail.username'),\"prop\":\"vars.SMTP_USERNAME\"}},[_c('el-input',{model:{value:(_vm.form.vars.SMTP_USERNAME),callback:function ($$v) {_vm.$set(_vm.form.vars, \"SMTP_USERNAME\", $$v)},expression:\"form.vars.SMTP_USERNAME\"}})],1),_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":_vm.$t('setting.table.mail.password'),\"prop\":\"vars.SMTP_PASSWORD\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('setting.helpInfo.inputPassword')},model:{value:(_vm.form.vars.SMTP_PASSWORD),callback:function ($$v) {_vm.$set(_vm.form.vars, \"SMTP_PASSWORD\", $$v)},expression:\"form.vars.SMTP_PASSWORD\"}})],1),_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":_vm.$t('setting.table.mail.testUser'),\"prop\":\"vars.SMTP_TEST_USER\"}},[_c('el-input',{model:{value:(_vm.form.vars.SMTP_TEST_USER),callback:function ($$v) {_vm.$set(_vm.form.vars, \"SMTP_TEST_USER\", $$v)},expression:\"form.vars.SMTP_TEST_USER\"}})],1),_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":_vm.$t('setting.table.mail.status'),\"required\":\"\"}},[_c('el-switch',{attrs:{\"active-value\":\"ENABLE\",\"inactive-value\":\"DISABLE\",\"active-text\":_vm.$t('commons.button.enable'),\"inactive-text\":_vm.$t('commons.button.disable')},model:{value:(_vm.form.vars.EMAIL_STATUS),callback:function ($$v) {_vm.$set(_vm.form.vars, \"EMAIL_STATUS\", $$v)},expression:\"form.vars.EMAIL_STATUS\"}})],1),_c('div',{staticStyle:{\"float\":\"right\"}},[_c('el-form-item',[_c('el-button',{attrs:{\"disabled\":!_vm.btnSlect},on:{\"click\":_vm.verify}},[_vm._v(_vm._s(_vm.$t('commons.button.verify')))]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(_vm._s(_vm.$t('commons.button.submit')))])],1)],1)],1)],1)]),_c('el-col',{attrs:{\"span\":4}},[_c('br')])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <br>\n      <el-col :span=\"1\"><br/></el-col>\n      <el-col :span=\"12\">\n        <div class=\"grid-content bg-purple-light\">\n          <el-form ref=\"form\" v-loading=\"loading\" label-position=\"left\" :rules=\"rules\"  :model=\"form\" label-width=\"120px\">\n            <el-form-item  style=\"width: 100%\" :label=\"$t('setting.table.mail.smtp')\" prop=\"vars.SMTP_ADDRESS\">\n              <el-input v-model=\"form.vars.SMTP_ADDRESS\"></el-input>\n            </el-form-item>\n            <el-form-item  style=\"width: 100%\" :label=\"$t('setting.table.mail.port')\"  prop=\"vars.SMTP_PORT\">\n              <el-input v-model=\"form.vars.SMTP_PORT\"></el-input>\n            </el-form-item>\n            <el-form-item  style=\"width: 100%\" :label=\"$t('setting.table.mail.username')\"  prop=\"vars.SMTP_USERNAME\">\n              <el-input v-model=\"form.vars.SMTP_USERNAME\"></el-input>\n            </el-form-item>\n            <el-form-item  style=\"width: 100%\" :label=\"$t('setting.table.mail.password')\"  prop=\"vars.SMTP_PASSWORD\">\n              <el-input :placeholder=\"$t('setting.helpInfo.inputPassword')\" v-model=\"form.vars.SMTP_PASSWORD\"></el-input>\n            </el-form-item>\n            <el-form-item  style=\"width: 100%\" :label=\"$t('setting.table.mail.testUser')\"  prop=\"vars.SMTP_TEST_USER\">\n              <el-input v-model=\"form.vars.SMTP_TEST_USER\"></el-input>\n            </el-form-item>\n            <el-form-item  style=\"width: 100%\" :label=\"$t('setting.table.mail.status')\" required>\n              <el-switch\n                v-model=\"form.vars.EMAIL_STATUS\"\n                active-value=\"ENABLE\"\n                inactive-value=\"DISABLE\"\n                :active-text=\"$t('commons.button.enable')\"\n                :inactive-text=\"$t('commons.button.disable')\">\n              </el-switch>\n            </el-form-item>\n            <div style=\"float: right\">\n              <el-form-item>\n                <el-button  @click=\"verify\" :disabled=\"!btnSlect\">{{$t('commons.button.verify')}}</el-button>\n                <el-button type=\"primary\" @click=\"onSubmit\" >{{$t('commons.button.submit')}}</el-button>\n              </el-form-item>\n            </div>\n          </el-form>\n        </div>\n      </el-col>\n      <el-col :span=\"4\"><br/></el-col>\n  </div>\n</template>\n\n<script>\nimport {check, createSetting, getSetting} from \"@/api/system-setting\";\nimport Rule from \"@/utils/rules\";\nexport default {\n  name: \"EMail\",\n  data() {\n    return {\n      form: {\n        vars: {\n          EMAIL_STATUS: '',\n          SMTP_ADDRESS: '',\n          SMTP_PASSWORD: '',\n          SMTP_PORT: '',\n          SMTP_TEST_USER: '',\n          SMTP_USERNAME: ''\n        },\n        tab: ''\n      },\n      btn: true,\n      loading: false,\n      rules: {\n        vars: {\n          SMTP_ADDRESS: [Rule.RequiredRule],\n          SMTP_PASSWORD: [Rule.RequiredRule],\n          SMTP_PORT: [Rule.RequiredRule],\n          SMTP_TEST_USER: [Rule.EmailRule, Rule.RequiredRule],\n          SMTP_USERNAME: [Rule.EmailRule, Rule.RequiredRule],\n        },\n      },\n    }\n  },\n  methods: {\n    onSubmit() {\n      this.$refs.form.validate((valid) => {\n          if (!valid) {\n            return false\n          }\n      this.loading = true\n      createSetting({\n        vars: this.form.vars,\n        tab: 'EMAIL'\n      }).then(() => {\n        this.loading = false\n        this.$message({\n          type: 'success',\n          message: this.$t('commons.msg.save_success')\n        });\n        setTimeout(() => location.reload(), 500)\n        this.$router.push({name: \"EMail\"})\n      }).finally(() => {\n        this.loading = false\n      })\n    })\n    },\n    verify(){\n      this.$refs.form.validate((valid) => {\n        if (!valid) {\n          return false\n        }\n      this.loading = true\n      check( 'EMAIL',{\n        vars: this.form.vars,\n        tab: 'EMAIL'\n      }\n      ).then(() => {\n        this.loading = false\n        this.$message({\n          type: 'success',\n          message: this.$t('commons.msg.verify_success')\n        });\n        this.btn = false\n      }).finally(() => {\n        this.loading = false\n      })\n    })\n    }\n  },\n  computed: {\n    btnSlect(){\n      let status = this.form.vars.EMAIL_STATUS\n      if (status == \"ENABLE\"){\n        return true\n      }else {\n        return false\n      }\n    }\n  },\n  created() {\n    getSetting('EMAIL').then( data => {\n      this.form.vars = data.vars,\n      this.form.tab = data.tab\n    })\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=36aa8318&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"36aa8318\",\n  null\n  \n)\n\nexport default component.exports","import {get, patch, post, del} from \"@/plugins/request\"\n\nconst settingUrl = \"/api/v1/settings\"\nconst messageUrl = \"/api/v1/message/setting\"\n\n// Settings\nexport function getSetting(tabName) {\n  return get(`${settingUrl}/${tabName}`)\n}\nexport function check(tabName,data){\n  return post(`${settingUrl}/check/${tabName}`,data)\n}\n\nexport function createSetting(data) {\n  return post(settingUrl,data)\n}\n\n// Registry\nexport function listRegistry(currentPage, pageSize) {\n  return get(`${settingUrl}/registry?pageNum=${currentPage}&pageSize=${pageSize}`)\n}\n\nexport function listRegistryAll() {\n  return get(`${settingUrl}/registry`)\n}\n\nexport function createRegistry(data) {\n  return post(`${settingUrl}/registry`,data)\n}\n\nexport function updateRegistry(arch, data) {\n  return patch(`${settingUrl}/registry/${arch}`,data)\n}\n\nexport function searchRegistry(currentPage, pageSize, conditions) {\n  return post(`${settingUrl}/registry/search?pageNum=${currentPage}&pageSize=${pageSize}`, conditions)\n}\n\nexport function getRegistry(id) {\n  return get(`${settingUrl}/registry/${id}`)\n}\n\nexport function deleteRegistry(id) {\n  return del(`${settingUrl}/registry/${id}`)\n}\n\n// Message\nexport function getMessageSetting(tabName) {\n  return get(`${messageUrl}/${tabName}`)\n}\nexport function checkMessage(tabName,data){\n  return post(`${messageUrl}/check/${tabName}`,data)\n}\n\nexport function createMessageSetting(tabName,data) {\n  return post(`${messageUrl}/${tabName}`,data)\n}\n\n// LDAP\nexport function syncLDAP(data){\n  return post(`/api/v1/ldap/sync`,data)\n}\n\nexport function createLDAP(data) {\n  return post(`/api/v1/ldap/`,data)\n}\n"],"sourceRoot":""}