(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76561758"],{2406:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-background"},[r("div",{staticClass:"login-container"},[r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"flex"}},[r("el-col",{staticClass:"left",attrs:{span:12}},[r("div",{staticClass:"login-logo"}),r("img",{staticClass:"login-image",attrs:{src:o("3511")}})]),r("el-col",{staticClass:"right",attrs:{span:12}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"default"}},[r("div",{staticClass:"login-title"},[e._v(" "+e._s(e.systemName)+" ")]),r("div",{staticClass:"login-form"},[r("el-form-item",{attrs:{prop:"username",label:e.$t("login.username")}},[r("el-input",{attrs:{placeholder:e.$t("login.username"),autofocus:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("el-form-item",{attrs:{prop:"password",label:e.$t("login.password")}},[r("el-input",{attrs:{type:"password",placeholder:e.$t("login.password"),maxlength:"30"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e.hasCode?r("el-form-item",[r("el-col",{attrs:{span:18}},[r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",[r("el-image",{staticStyle:{float:"right"},attrs:{src:e.captcha.image},on:{click:e.createCaptcha}})],1)],1)],1):e._e()],1),r("div",{staticClass:"forget-password"},[r("a",{staticStyle:{color:"#423ea9","font-weight":"400"},on:{click:e.forgetPassword}},[e._v(e._s(e.$t("login.forget_password"))+"?")])]),r("div",{staticClass:"login-btn"},[r("el-button",{staticClass:"submit",attrs:{type:"primary",size:"default"},on:{click:function(t){return e.submit("form")}}},[e._v(" "+e._s(e.$t("commons.button.login"))+" ")])],1)])],1)],1)],1),r("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPage,expression:"loadingPage"}],attrs:{title:e.$t("login.reset_password"),visible:e.opened,width:"30%"},on:{"update:visible":function(t){e.opened=t}}},[r("el-form",{ref:"forgetForm",attrs:{model:e.forgetForm,rules:e.forgetRules,size:"default"}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{placeholder:e.$t("login.username"),autofocus:""},model:{value:e.forgetForm.username,callback:function(t){e.$set(e.forgetForm,"username",t)},expression:"forgetForm.username"}})],1),r("el-form-item",{attrs:{prop:"email"}},[r("el-input",{attrs:{placeholder:e.$t("login.email"),autofocus:""},model:{value:e.forgetForm.email,callback:function(t){e.$set(e.forgetForm,"email",t)},expression:"forgetForm.email"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.opened=!1}}},[e._v(e._s(e.$t("commons.button.cancel")))]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForget("forgetForm")}}},[e._v(e._s(e.$t("commons.button.submit")))])],1)],1)],1)},a=[],s=(o("b64b"),o("a9e3"),o("d3b7"),o("25f0"),o("12de")),i=o("3786"),n={name:"Login",data:function(){return{loading:!1,form:{username:"",password:"",captchaId:"",code:""},rules:{username:[{required:!0,message:this.$tm("commons.validate.input","login.username"),trigger:"blur"}],password:[{required:!0,message:this.$tm("commons.validate.input","login.password"),trigger:"blur"},{min:6,max:30,message:this.$t("commons.validate.limit",[6,30]),trigger:"blur"}],code:[{required:!0,message:this.$tm("commons.validate.input","login.captcha"),trigger:"blur"}]},msg:"",redirect:void 0,otherQuery:{},systemName:this.$t("login.title"),captcha:{image:""},hasCode:!1,opened:!1,forgetForm:{username:"",email:""},forgetRules:{username:[{required:!0,message:this.$tm("commons.validate.input","login.username"),trigger:"blur"}],email:[{required:!0,message:this.$tm("commons.validate.input","login.email"),trigger:"blur"}]},loadingPage:!1}},watch:{$route:{handler:function(e){var t=e.query;t&&(this.redirect=t.redirect,this.otherQuery=this.getOtherQuery(t))},immediate:!0}},created:function(){document.addEventListener("keydown",this.watchEnter),this.getSystemName(),this.checkErrorNum()},destroyed:function(){document.removeEventListener("keydown",this.watchEnter)},methods:{watchEnter:function(e){var t=e.keyCode;13===t&&(this.opened?this.submitForget("forgetForm"):this.submit("form"))},submit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!0,t.form.captchaId=t.captcha.captchaId,t.$store.dispatch("user/login",t.form).then((function(){t.$router.push({path:t.redirect||"/",query:t.otherQuery}),t.loading=!1,localStorage.removeItem("loginErrorNum")})).catch((function(e){t.handleError(e),t.loading=!1}))}))},getOtherQuery:function(e){return Object.keys(e).reduce((function(t,o){return"redirect"!==o&&(t[o]=e[o]),t}),{})},getSystemName:function(){var e=this;Object(s["a"])().then((function(t){""!==t.systemName&&(e.systemName=t.systemName)})).catch((function(){return e.systemName=e.$t("login.title")}))},checkErrorNum:function(){if(null!=localStorage.getItem("loginErrorNum")){var e=Number(localStorage.getItem("loginErrorNum"));e>=3&&this.createCaptcha()}},createCaptcha:function(){var e=this;Object(i["a"])().then((function(t){e.captcha=t,e.hasCode=!0}))},forgetPassword:function(){this.opened=!0},submitForget:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loadingPage=!0,Object(i["f"])(t.forgetForm).then((function(){t.$message({type:"success",message:t.$t("login.reset_message")}),t.opened=!1,t.loadingPage=!1})).finally((function(){t.loadingPage=!1}))}))},handleError:function(e){if(this.msg=e,null!=localStorage.getItem("loginErrorNum")){var t=Number(localStorage.getItem("loginErrorNum"));if(t>=3)this.createCaptcha();else{var o=t+1;localStorage.setItem("loginErrorNum",o.toString())}}else localStorage.setItem("loginErrorNum","1")}}},l=n,c=(o("ad03"),o("2877")),m=Object(c["a"])(l,r,a,!1,null,"52926720",null);t["default"]=m.exports},"25f0":function(e,t,o){"use strict";var r=o("6eeb"),a=o("825a"),s=o("577e"),i=o("d039"),n=o("ad6d"),l="toString",c=RegExp.prototype,m=c[l],u=i((function(){return"/a/b"!=m.call({source:"a",flags:"b"})})),g=m.name!=l;(u||g)&&r(RegExp.prototype,l,(function(){var e=a(this),t=s(e.source),o=e.flags,r=s(void 0===o&&e instanceof RegExp&&!("flags"in c)?n.call(e):o);return"/"+t+"/"+r}),{unsafe:!0})},3511:function(e,t,o){e.exports=o.p+"img/login-img.6bf835a5.svg"},"42b6":function(e,t,o){},ad03:function(e,t,o){"use strict";o("42b6")}}]);
//# sourceMappingURL=chunk-76561758.88258bed.js.map