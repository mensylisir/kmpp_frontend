{"version":3,"sources":["webpack:///./src/business/login/index.vue?8fe1","webpack:///src/business/login/index.vue","webpack:///./src/business/login/index.vue?b1bc","webpack:///./src/business/login/index.vue","webpack:///./src/assets/login-img.svg","webpack:///./src/business/login/index.vue?d1b9","webpack:///./node_modules/_core-js@3.15.2@core-js/modules/es.regexp.to-string.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","ref","form","rules","_v","_s","systemName","$t","model","callback","$$v","$set","staticStyle","captcha","image","on","createCaptcha","_e","forgetPassword","$event","submit","opened","forgetForm","forgetRules","slot","submitForget","staticRenderFns","data","loading","username","password","captchaId","code","msg","redirect","undefined","otherQuery","hasCode","email","loadingPage","watch","$route","handler","query","getOtherQuery","immediate","created","document","addEventListener","watchEnter","getSystemName","checkErrorNum","destroyed","removeEventListener","methods","keyCode","$refs","validate","valid","Object","keys","reduce","cur","acc","localStorage","getItem","loginErrorNum","handleError","error","setItem","newNum","toString","component","module","exports","redefine","anObject","fails","flags","TO_STRING","RegExpPrototype","RegExp","prototype","nativeToString","NOT_GENERIC","call","source","INCORRECT_NAME","R","p","String","rf","f","unsafe"],"mappings":"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","file":"js/chunk-62a1216e.fdcd54e8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-background\"},[_c('div',{staticClass:\"login-container\"},[_c('el-row',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"type\":\"flex\"}},[_c('el-col',{staticClass:\"left\",attrs:{\"span\":12}},[_c('div',{staticClass:\"login-logo\"}),_c('img',{staticClass:\"login-image\",attrs:{\"src\":require(\"../../assets/login-img.svg\")}})]),_c('el-col',{staticClass:\"right\",attrs:{\"span\":12}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"size\":\"default\"}},[_c('div',{staticClass:\"login-title\"},[_vm._v(\" \"+_vm._s(_vm.systemName)+\" \")]),_c('div',{staticClass:\"login-form\"},[_c('el-form-item',{attrs:{\"prop\":\"username\",\"label\":_vm.$t('login.username')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('login.username'),\"autofocus\":\"\"},model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, \"username\", $$v)},expression:\"form.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\",\"label\":_vm.$t('login.password')}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":_vm.$t('login.password'),\"maxlength\":\"30\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1),(_vm.hasCode)?_c('el-form-item',[_c('el-col',{attrs:{\"span\":18}},[_c('el-form-item',{attrs:{\"prop\":\"code\"}},[_c('el-input',{model:{value:(_vm.form.code),callback:function ($$v) {_vm.$set(_vm.form, \"code\", $$v)},expression:\"form.code\"}})],1)],1),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',[_c('el-image',{staticStyle:{\"float\":\"right\"},attrs:{\"src\":_vm.captcha.image},on:{\"click\":_vm.createCaptcha}})],1)],1)],1):_vm._e()],1),_c('div',{staticClass:\"forget-password\"},[_c('a',{staticStyle:{\"color\":\"#423ea9\",\"font-weight\":\"400\"},on:{\"click\":_vm.forgetPassword}},[_vm._v(_vm._s(_vm.$t(\"login.forget_password\"))+\"?\")])]),_c('div',{staticClass:\"login-btn\"},[_c('el-button',{staticClass:\"submit\",attrs:{\"type\":\"primary\",\"size\":\"default\"},on:{\"click\":function($event){return _vm.submit('form')}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"commons.button.login\"))+\" \")])],1)])],1)],1)],1),_c('el-dialog',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loadingPage),expression:\"loadingPage\"}],attrs:{\"title\":_vm.$t('login.reset_password'),\"visible\":_vm.opened,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.opened=$event}}},[_c('el-form',{ref:\"forgetForm\",attrs:{\"model\":_vm.forgetForm,\"rules\":_vm.forgetRules,\"size\":\"default\"}},[_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('login.username'),\"autofocus\":\"\"},model:{value:(_vm.forgetForm.username),callback:function ($$v) {_vm.$set(_vm.forgetForm, \"username\", $$v)},expression:\"forgetForm.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"email\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('login.email'),\"autofocus\":\"\"},model:{value:(_vm.forgetForm.email),callback:function ($$v) {_vm.$set(_vm.forgetForm, \"email\", $$v)},expression:\"forgetForm.email\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.opened = false}}},[_vm._v(_vm._s(_vm.$t(\"commons.button.cancel\")))]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForget('forgetForm')}}},[_vm._v(_vm._s(_vm.$t(\"commons.button.submit\")))])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template xmlns:el-col=\"http://www.w3.org/1999/html\">\n  <div class=\"login-background\">\n    <div class=\"login-container\">\n      <el-row type=\"flex\" v-loading=\"loading\">\n        <el-col :span=\"12\" class=\"left\">\n          <div class=\"login-logo\"></div>\n            <img src=\"../../assets/login-img.svg\" class=\"login-image\"/>\n          <!-- <div class=\"login-image\"></div> -->\n        </el-col>\n        <el-col :span=\"12\" class=\"right\">\n          <el-form :model=\"form\" :rules=\"rules\" ref=\"form\" size=\"default\">\n            <div class=\"login-title\">\n              {{ systemName }}\n            </div>\n            <div class=\"login-form\">\n              <el-form-item prop=\"username\" :label=\"$t('login.username')\">\n                <el-input\n                  v-model=\"form.username\"\n                  :placeholder=\"$t('login.username')\"\n                  autofocus\n                />\n              </el-form-item>\n              <el-form-item prop=\"password\" :label=\"$t('login.password')\">\n                <el-input\n                  type=\"password\"\n                  v-model=\"form.password\"\n                  :placeholder=\"$t('login.password')\"\n                  maxlength=\"30\"\n                />\n              </el-form-item>\n              <el-form-item v-if=\"hasCode\">\n                <el-col :span=\"18\">\n                  <el-form-item prop=\"code\">\n                    <el-input v-model=\"form.code\"></el-input>\n                  </el-form-item>\n                </el-col>\n                <el-col :span=\"6\">\n                  <el-form-item>\n                    <el-image\n                      style=\"float: right\"\n                      :src=\"captcha.image\"\n                      @click=\"createCaptcha\"\n                    ></el-image>\n                  </el-form-item>\n                </el-col>\n              </el-form-item>\n            </div>\n                        <div class=\"forget-password\">\n              <a\n                style=\"color: #423ea9; font-weight: 400\"\n                @click=\"forgetPassword\"\n                >{{ $t(\"login.forget_password\") }}?</a\n              >\n            </div>\n            <div class=\"login-btn\">\n              <el-button\n                type=\"primary\"\n                class=\"submit\"\n                @click=\"submit('form')\"\n                size=\"default\"\n              >\n                {{ $t(\"commons.button.login\") }}\n              </el-button>\n            </div>\n\n          </el-form>\n        </el-col>\n      </el-row>\n    </div>\n    <el-dialog\n      :title=\"$t('login.reset_password')\"\n      :visible.sync=\"opened\"\n      width=\"30%\"\n      v-loading=\"loadingPage\"\n    >\n      <el-form\n        :model=\"forgetForm\"\n        :rules=\"forgetRules\"\n        ref=\"forgetForm\"\n        size=\"default\"\n      >\n        <el-form-item prop=\"username\">\n          <el-input\n            v-model=\"forgetForm.username\"\n            :placeholder=\"$t('login.username')\"\n            autofocus\n          />\n        </el-form-item>\n        <el-form-item prop=\"email\">\n          <el-input\n            v-model=\"forgetForm.email\"\n            :placeholder=\"$t('login.email')\"\n            autofocus\n          />\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"opened = false\">{{\n          $t(\"commons.button.cancel\")\n        }}</el-button>\n        <el-button type=\"primary\" @click=\"submitForget('forgetForm')\">{{\n          $t(\"commons.button.submit\")\n        }}</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport { getTheme } from \"@/api/theme\";\nimport { getCaptcha, resetPassword } from \"@/api/auth\";\n\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      loading: false,\n      form: {\n        username: \"\",\n        password: \"\",\n        captchaId: \"\",\n        code: \"\",\n      },\n      rules: {\n        username: [\n          {\n            required: true,\n            message: this.$tm(\"commons.validate.input\", \"login.username\"),\n            trigger: \"blur\",\n          },\n        ],\n        password: [\n          // 先去掉方便测试\n          {\n            required: true,\n            message: this.$tm(\"commons.validate.input\", \"login.password\"),\n            trigger: \"blur\",\n          },\n          {\n            min: 6,\n            max: 30,\n            message: this.$t(\"commons.validate.limit\", [6, 30]),\n            trigger: \"blur\",\n          },\n        ],\n        code: [\n          {\n            required: true,\n            message: this.$tm(\"commons.validate.input\", \"login.captcha\"),\n            trigger: \"blur\",\n          },\n        ],\n      },\n      msg: \"\",\n      redirect: undefined,\n      otherQuery: {},\n      systemName: this.$t(\"login.title\"),\n      captcha: {\n        image: \"\",\n      },\n      hasCode: false,\n      opened: false,\n      forgetForm: {\n        username: \"\",\n        email: \"\",\n      },\n      forgetRules: {\n        username: [\n          {\n            required: true,\n            message: this.$tm(\"commons.validate.input\", \"login.username\"),\n            trigger: \"blur\",\n          },\n        ],\n        email: [\n          {\n            required: true,\n            message: this.$tm(\"commons.validate.input\", \"login.email\"),\n            trigger: \"blur\",\n          },\n        ],\n      },\n      loadingPage: false,\n    };\n  },\n  watch: {\n    $route: {\n      handler: function (route) {\n        const query = route.query;\n        if (query) {\n          this.redirect = query.redirect;\n          this.otherQuery = this.getOtherQuery(query);\n        }\n      },\n      immediate: true,\n    },\n  },\n  created: function () {\n    document.addEventListener(\"keydown\", this.watchEnter);\n    this.getSystemName();\n    this.checkErrorNum();\n  },\n\n  destroyed() {\n    document.removeEventListener(\"keydown\", this.watchEnter);\n  },\n  methods: {\n    watchEnter(e) {\n      let keyCode = e.keyCode;\n      if (keyCode === 13) {\n        if (this.opened) {\n          this.submitForget(\"forgetForm\");\n        } else {\n          this.submit(\"form\");\n        }\n      }\n    },\n    submit(form) {\n      this.$refs[form].validate((valid) => {\n        if (valid) {\n          this.loading = true;\n          this.form.captchaId = this.captcha.captchaId;\n          this.$store\n            .dispatch(\"user/login\", this.form)\n            .then(() => {\n              this.$router.push({\n                path: this.redirect || \"/\",\n                query: this.otherQuery,\n              });\n              this.loading = false;\n              localStorage.removeItem(\"loginErrorNum\");\n            })\n            .catch((error) => {\n              this.handleError(error);\n              this.loading = false;\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n    getOtherQuery(query) {\n      return Object.keys(query).reduce((acc, cur) => {\n        if (cur !== \"redirect\") {\n          acc[cur] = query[cur];\n        }\n        return acc;\n      }, {});\n    },\n    getSystemName() {\n      getTheme()\n        .then((data) => {\n          if (data.systemName !== \"\") {\n            this.systemName = data.systemName;\n          }\n        })\n        .catch(() => (this.systemName = this.$t(\"login.title\")));\n    },\n    checkErrorNum() {\n      if (localStorage.getItem(\"loginErrorNum\") != null) {\n        const loginErrorNum = Number(localStorage.getItem(\"loginErrorNum\"));\n        if (loginErrorNum >= 3) {\n          this.createCaptcha();\n        }\n      }\n    },\n    createCaptcha() {\n      getCaptcha().then((res) => {\n        this.captcha = res;\n        this.hasCode = true;\n      });\n    },\n    forgetPassword() {\n      this.opened = true;\n    },\n    submitForget(form) {\n      this.$refs[form].validate((valid) => {\n        if (!valid) {\n          return false;\n        }\n        this.loadingPage = true;\n        resetPassword(this.forgetForm)\n          .then(() => {\n            this.$message({\n              type: \"success\",\n              message: this.$t(\"login.reset_message\"),\n            });\n            this.opened = false;\n            this.loadingPage = false;\n          })\n          .finally(() => {\n            this.loadingPage = false;\n          });\n      });\n    },\n    handleError(error) {\n      this.msg = error;\n      if (localStorage.getItem(\"loginErrorNum\") != null) {\n        const loginErrorNum = Number(localStorage.getItem(\"loginErrorNum\"));\n        if (loginErrorNum >= 3) {\n          this.createCaptcha();\n        } else {\n          const newNum = loginErrorNum + 1;\n          localStorage.setItem(\"loginErrorNum\", newNum.toString());\n        }\n      } else {\n        localStorage.setItem(\"loginErrorNum\", \"1\");\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../styles/common/variables\";\n\n@mixin login-center {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.login-background {\n  background-color: $--background-color-base;\n  height: 100%;\n  @include login-center;\n}\n\n.login-container {\n  // min-width: 640px;\n  width: 100%;\n  height: 100%;\n  background-color: #ffffff;\n  @media only screen and (max-width: 1280px) {\n    width: 100%;\n    height: 100%;\n  }\n  .left {\nposition: relative;\n    background-color: rgba(238,243,253,100);\n    overflow: hidden;\n    height: 100vh;\n  }\n  .login-logo {\n    margin-top: 48px;\n    margin-left: 64px;\n    @media only screen and (max-width: 1280px) {\n      margin-top: 20px;\n    }\n\n    img {\n      height: 45px;\n    }\n  }\n\n  .el-button--primary {\n    background: #5354BB;\n    border-radius: 4px;\n    border-color: #5354BB;\n  }\n  .login-title {\n    margin-top: 50px;\n    letter-spacing: 0;\n    text-align: center;\n    font-size: 28px;\n    color: #2c2e33;\n    line-height: 36px;\n    font-weight: 500;\n\n    @media only screen and (max-width: 1280px) {\n      margin-top: 20px;\n    }\n  }\n  .right {\n    padding: 0 9%;\n    align-self: center;\n  }\n  .login-border {\n    height: 2px;\n    margin: 20px auto 20px;\n    position: relative;\n    width: 80px;\n    background: $--color-primary;\n    @media only screen and (max-width: 1280px) {\n      margin: 10px auto 10px;\n    }\n  }\n\n  .login-welcome {\n    margin-top: 10px;\n    font-size: 14px;\n    color: #999999;\n    letter-spacing: 0;\n    line-height: 18px;\n    text-align: center;\n    @media only screen and (max-width: 1280px) {\n      margin-top: 20px;\n    }\n  }\n\n  .login-form {\n    margin-top: 30px;\n    padding: 0 40px;\n\n    @media only screen and (max-width: 1280px) {\n      margin-top: 10px;\n    }\n\n    & ::v-deep .el-input__inner {\n      border-radius: 0;\n    }\n  }\n\n  .login-btn {\n    margin-top: 40px;\n    padding: 0 40px;\n    @media only screen and (max-width: 1280px) {\n      margin-top: 20px;\n    }\n\n    .submit {\n      width: 100%;\n    }\n  }\n\n  .login-msg {\n    margin-top: 10px;\n    padding: 0 40px;\n    color: $--color-danger;\n    text-align: center;\n  }\n\n  .login-image {\n    top: 90px;\n    width: 100%;\n    position: absolute;\n    right: 0;\n    @media only screen and (max-width: 1280px) {\n      // width: 90%;\n    }\n  }\n  .login-logo {\n    background: url(../../assets/logo.svg) no-repeat;\n    height: 48px;\n  }\n\n  .submit {\n    width: 100%;\n  }\n\n  .forget-password {\n    margin-top: -6px;\n    margin-bottom: 24px;\n    padding: 0 40px;\n    float: right;\n    @media only screen and (max-width: 1280px) {\n      margin-top: 20px;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=52926720&scoped=true&xmlns%3Ael-col=http%3A%2F%2Fwww.w3.org%2F1999%2Fhtml&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=52926720&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"52926720\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/login-img.6bf835a5.svg\";","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@10.2.0@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=52926720&lang=scss&scoped=true&\"","'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n"],"sourceRoot":""}