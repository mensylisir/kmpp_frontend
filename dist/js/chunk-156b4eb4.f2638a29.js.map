{"version":3,"sources":["webpack:///./src/business/xpack/message-center/message/index.vue?29c9","webpack:///src/business/xpack/message-center/message/index.vue","webpack:///./src/business/xpack/message-center/message/index.vue?c151","webpack:///./src/business/xpack/message-center/message/index.vue","webpack:///./src/api/xpack/message.js","webpack:///./src/business/xpack/message-center/message/index.vue?c436"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","attrs","$t","selects","prop","order","data","columns","paginationConfig","searchConfig","on","$event","search","scopedSlots","_u","key","fn","length","markAsRead","_v","_s","del","proxy","ref","row","readStatus","staticClass","style","color","_e","onDetail","message","title","_f","createdAt","buttons","dialogVisible","handleClose","detail","clusterName","msgContent","slot","staticRenderFns","components","ComplexTable","currentPage","pageSize","total","loading","quickPlaceholder","methods","handleSelectionChange","val","Promise","all","ps","then","type","$confirm","confirmButtonText","cancelButtonText","messageID","console","log","readItems","push","items","operation","done","created","component","messageUrl","deleteMessagesBy","getMessageReceiver","get","getMessageOfSubscribe","updateMessageOfSubscribe","post","updateMessageReceicver","updateMessageStatus","searchMessages","conditions"],"mappings":"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","file":"js/chunk-156b4eb4.f2638a29.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('complex-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"header\":_vm.$t('message.message'),\"selects\":_vm.selects,\"fit\":true,\"default-sort\":{prop: 'create_time', order: 'descending'},\"data\":_vm.data,\"columns\":_vm.columns,\"pagination-config\":_vm.paginationConfig,\"search-config\":_vm.searchConfig},on:{\"update:selects\":function($event){_vm.selects=$event},\"search\":_vm.search},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('el-button-group',[_c('el-button',{attrs:{\"size\":\"small\",\"disabled\":_vm.selects.length < 1},on:{\"click\":function($event){return _vm.markAsRead()}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"message.mark_as_read\"))+\" \")]),_c('el-button',{attrs:{\"size\":\"small\",\"disabled\":_vm.selects.length < 1},on:{\"click\":function($event){return _vm.del()}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"commons.button.delete\"))+\" \")])],1)]},proxy:true}])},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"fix\":\"\"}}),_c('el-table-column',{attrs:{\"label\":_vm.$t('message.content'),\"min-width\":\"100\",\"fix\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.readStatus === 'READ')?_c('svg',{staticClass:\"icon svg-icon\",style:({ color: '#969696'}),attrs:{\"aria-hidden\":\"true\",\"size\":\"5x\"}},[_c('use',{attrs:{\"xlink:href\":\"#iconyidu1\"}})]):_vm._e(),(row.readStatus === 'UNREAD')?_c('svg',{staticClass:\"icon svg-icon\",style:({ color: '#0079b8' }),attrs:{\"aria-hidden\":\"true\"}},[_c('use',{attrs:{\"xlink:href\":\"#iconweidu1\"}})]):_vm._e(),_c('span',{staticClass:\"message-link\",style:({'color':row.readStatus === 'UNREAD'?'#0079b8':'#969696'}),on:{\"click\":function($event){return _vm.onDetail(row)}}},[_vm._v(\" \"+_vm._s(_vm.$t('message.title.'+row.message.title)))])]}}])}),_c('el-table-column',{attrs:{\"label\":_vm.$t('message.type'),\"min-width\":\"100\",\"prop\":\"message.type\",\"fix\":\"\"}}),_c('el-table-column',{attrs:{\"label\":_vm.$t('message.level'),\"min-width\":\"100\",\"prop\":\"message.level\"}}),_c('el-table-column',{attrs:{\"label\":_vm.$t('commons.table.status'),\"min-width\":\"100\",\"prop\":\"readStatus\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.readStatus === 'READ')?_c('svg',{staticClass:\"icon svg-icon\",attrs:{\"aria-hidden\":\"true\"}},[_c('use',{attrs:{\"xlink:href\":\"#iconyidu3\"}})]):_vm._e(),(row.readStatus === 'UNREAD')?_c('svg',{staticClass:\"icon svg-icon\",attrs:{\"aria-hidden\":\"true\"}},[_c('use',{attrs:{\"xlink:href\":\"#iconinform-weidu\"}})]):_vm._e(),_vm._v(\" \"+_vm._s(_vm.$t('message.'+row.readStatus))+\" \")]}}])}),_c('el-table-column',{attrs:{\"sortable\":\"\",\"sort-by\":\"createdAt\",\"label\":_vm.$t('commons.table.create_time')},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(_vm._f(\"datetimeFormat\")(row.createdAt))+\" \")]}}])}),_c('fu-table-operations',{attrs:{\"buttons\":_vm.buttons,\"label\":_vm.$t('commons.table.action'),\"fix\":\"\"}})],1),_c('el-dialog',{attrs:{\"title\":_vm.$t('message.detail.message_detail'),\"visible\":_vm.dialogVisible,\"width\":\"40%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('span',[_vm._v(_vm._s(_vm.$t('message.detail.basicInformation')))]),_c('el-divider'),(_vm.detail.message.title === 'cluster_event_warning')?_c('div',[_c('p',[_vm._v(_vm._s(_vm.$t('message.detail.clusterName'))+\": \"+_vm._s(_vm.detail.clusterName)+\" \")]),_c('p',[_vm._v(_vm._s(_vm.$t('message.detail.host'))+\": \"+_vm._s(_vm.detail.msgContent['host']))]),_c('p',[_vm._v(_vm._s(_vm.$t('message.detail.name'))+\": \"+_vm._s(_vm.detail.msgContent['name']))]),_c('p',[_vm._v(_vm._s(_vm.$t('message.detail.type'))+\": \"+_vm._s(_vm.detail.msgContent['type']))]),_c('p',[_vm._v(_vm._s(_vm.$t('message.detail.component'))+\": \"+_vm._s(_vm.detail.msgContent['component']))]),_c('p',[_vm._v(_vm._s(_vm.$t('message.detail.detail'))+\": \"+_vm._s(_vm.detail.msgContent['message']))]),_c('p',[_vm._v(_vm._s(_vm.$t('message.detail.kind'))+\": \"+_vm._s(_vm.detail.msgContent['kind']))]),_c('p',[_vm._v(_vm._s(_vm.$t('message.detail.cause'))+\": \"+_vm._s(_vm.detail.msgContent['reason']))]),_c('p',[_vm._v(_vm._s(_vm.$t('message.detail.time'))+\": \"+_vm._s(_vm._f(\"datetimeFormat\")(_vm.detail.msgContent['createdAt'])))])]):_vm._e(),(_vm.detail.message.title !== 'cluster_event_warning')?_c('div',[_c('p',[_vm._v(_vm._s(_vm.$t('message.detail.clusterName'))+\": \"+_vm._s(_vm.detail.clusterName)+\" \")]),_c('p',[_vm._v(_vm._s(_vm.$t('message.detail.detail'))+\": \"+_vm._s(_vm.detail.msgContent['message']))]),_c('p',[_vm._v(_vm._s(_vm.$t('message.detail.time'))+\": \"+_vm._s(_vm._f(\"datetimeFormat\")(_vm.detail['createdAt'])))])]):_vm._e(),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(_vm._s(_vm.$t('commons.button.ok')))])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <complex-table :header=\"$t('message.message')\" :selects.sync=\"selects\" :fit=\"true\" :default-sort = \"{prop: 'create_time', order: 'descending'}\"\n                   v-loading=\"loading\" :data=\"data\" :columns=\"columns\" @search=\"search\" :pagination-config=\"paginationConfig\" :search-config=\"searchConfig\" >\n      <template #header>\n        <el-button-group>\n          <el-button size=\"small\" :disabled=\"selects.length < 1\"  @click=\"markAsRead()\">\n            {{ $t(\"message.mark_as_read\") }}\n          </el-button>\n          <el-button size=\"small\" :disabled=\"selects.length < 1\"  @click=\"del()\">\n            {{ $t(\"commons.button.delete\") }}\n          </el-button>\n        </el-button-group>\n      </template>\n      <el-table-column type=\"selection\" fix></el-table-column>\n      <el-table-column :label=\"$t('message.content')\" min-width=\"100\"  fix>\n        <template v-slot:default=\"{row}\">\n          <svg v-if=\"row.readStatus === 'READ'\" class=\"icon svg-icon\" aria-hidden=\"true\" :style=\"{ color: '#969696'}\" size=\"5x\">\n            <use xlink:href=\"#iconyidu1\"></use>\n          </svg>\n          <svg v-if=\"row.readStatus === 'UNREAD'\" class=\"icon svg-icon\" aria-hidden=\"true\" :style=\"{ color: '#0079b8' }\">\n            <use xlink:href=\"#iconweidu1\"></use>\n          </svg>\n          <span class=\"message-link\" @click=\"onDetail(row)\" :style=\"{'color':row.readStatus === 'UNREAD'?'#0079b8':'#969696'}\" > {{$t('message.title.'+row.message.title)}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column :label=\"$t('message.type')\" min-width=\"100\" prop=\"message.type\" fix />\n      <el-table-column :label=\"$t('message.level')\" min-width=\"100\" prop=\"message.level\" />\n      <el-table-column :label=\"$t('commons.table.status')\" min-width=\"100\" prop=\"readStatus\">\n        <template v-slot:default=\"{row}\">\n          <svg v-if=\"row.readStatus === 'READ'\" class=\"icon svg-icon\" aria-hidden=\"true\">\n            <use xlink:href=\"#iconyidu3\"></use>\n          </svg>\n          <svg v-if=\"row.readStatus === 'UNREAD'\" class=\"icon svg-icon\" aria-hidden=\"true\">\n            <use xlink:href=\"#iconinform-weidu\"></use>\n          </svg>\n          {{$t('message.'+row.readStatus)}}\n        </template>\n      </el-table-column>\n      <el-table-column sortable sort-by=\"createdAt\" :label=\"$t('commons.table.create_time')\" >\n        <template v-slot:default=\"{ row }\">\n          {{ row.createdAt | datetimeFormat }}\n        </template>\n      </el-table-column>\n      <fu-table-operations :buttons=\"buttons\" :label=\"$t('commons.table.action')\" fix/>\n    </complex-table>\n\n    <el-dialog\n      :title=\"$t('message.detail.message_detail')\"\n      :visible.sync=\"dialogVisible\"\n      width=\"40%\"\n      :before-close=\"handleClose\">\n      <span>{{ $t('message.detail.basicInformation') }}</span>\n      <el-divider></el-divider>\n      <div v-if=\"detail.message.title === 'cluster_event_warning'\">\n          <p>{{ $t('message.detail.clusterName') }}: {{detail.clusterName}} </p>\n          <p>{{ $t('message.detail.host') }}: {{detail.msgContent['host']}}</p>\n          <p>{{ $t('message.detail.name') }}: {{detail.msgContent['name']}}</p>\n          <p>{{ $t('message.detail.type') }}: {{detail.msgContent['type']}}</p>\n          <p>{{ $t('message.detail.component') }}: {{detail.msgContent['component']}}</p>\n          <p>{{ $t('message.detail.detail') }}: {{detail.msgContent['message']}}</p>\n          <p>{{ $t('message.detail.kind') }}: {{detail.msgContent['kind']}}</p>\n          <p>{{ $t('message.detail.cause') }}: {{detail.msgContent['reason']}}</p>\n          <p>{{ $t('message.detail.time') }}: {{detail.msgContent['createdAt'] | datetimeFormat }}</p>\n      </div>\n      <div v-if=\"detail.message.title !== 'cluster_event_warning'\">\n          <p>{{ $t('message.detail.clusterName') }}: {{detail.clusterName}} </p>\n          <p>{{ $t('message.detail.detail') }}: {{detail.msgContent['message']}}</p>\n          <p>{{ $t('message.detail.time') }}: {{detail['createdAt'] | datetimeFormat }}</p>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"dialogVisible = false\">{{$t('commons.button.ok')}}</el-button>\n      </span>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport ComplexTable from \"@/components/complex-table\";\nimport {deleteMessagesBy, searchMessages, updateMessageStatus} from \"@/api/xpack/message\";\n\nexport default {\n  name: \"MessageCenter\",\n  components: {\n    ComplexTable\n  },\n  data() {\n    return {\n      paginationConfig: {\n        currentPage: 1,\n        pageSize: 10,\n        total: 0,\n      },\n      selects: [],\n      loading: false,\n      data: [],\n      buttons: [\n         {\n          label: this.$t('commons.button.delete'), icon: \"el-icon-delete\",  click: (row) => {\n            this.del(row.id)\n          }\n        },\n      ],\n      columns: [],\n      dialogVisible: false,\n      searchConfig: {\n        quickPlaceholder: this.$t(\"commons.search.quickSearch\"),\n        components: [\n          { field: \"type\", label: this.$t('message.type'), component: \"FuComplexInput\", defaultOperator: \"eq\" },\n          {\n            field: \"level\",\n            label: this.$t('message.level'),\n            component: \"FuComplexSelect\",\n            options: [\n              { label: \"Warning\", value: 'Warning' },\n              { label: \"Info\", value: 'Info' },\n            ],\n            multiple: true\n          },\n          {\n            field: \"table.status\",\n            label: this.$t('commons.table.status'),\n            component: \"FuComplexSelect\",\n            options: [\n              { label: this.$t(\"message.READ\"), value: \"READ\" },\n              { label: this.$t(\"message.UNREAD\"), value: \"UNREAD\" },\n            ],\n            multiple: true\n          },\n          { field: \"created_at\", label: this.$t(\"commons.table.create_time\"), component: \"FuComplexDateTime\", valueFormat: \"yyyy-MM-dd HH:mm:ss\" },\n        ]\n      },\n      detail: {\n        message: {},\n        readStatus: '',\n        msgContent: {},\n        clusterName: '',\n      }\n    }\n  },\n  methods: {\n    handleSelectionChange(val) {\n      this.selects = val\n    },\n    markAsRead() {\n      const ps = []\n      const items = []\n      for (const item of this.selects) {\n        items.push(item)\n        ps.push(updateMessageStatus({\n          items: items,\n          operation: \"update\"\n        }))\n      }\n      Promise.all(ps).then(() => {\n        this.search()\n        this.$message({\n          type: 'success',\n          message: this.$t('commons.msg.op_success'),\n        });\n      })\n    },\n    del(messageID) {\n      this.$confirm(this.$t('commons.confirm_message.delete'), this.$t('commons.message_box.prompt'), {\n        confirmButtonText: this.$t('commons.button.confirm'),\n        cancelButtonText: this.$t('commons.button.cancel'),\n        type: 'warning'\n      }).then(() => {\n        if (messageID) {\n          deleteMessagesBy(messageID).then(() => {\n            this.search()\n            this.$message({\n              type: 'success',\n              message: `${this.$t('message.message')}+${this.$t('commons.msg.delete_success')}!`\n            });\n          })\n        } else {\n          const ps = []\n          for (const item of this.selects) {\n            ps.push(deleteMessagesBy(item.id))\n          }\n          Promise.all(ps).then(() => {\n            this.search()\n            this.$message({\n              type: 'success',\n              message: this.$t('commons.msg.delete_success'),\n            });\n          })\n        }\n      })\n    },\n    search(condition) {\n      this.loading = true\n      const { currentPage, pageSize } = this.paginationConfig\n      searchMessages(currentPage, pageSize,condition).then((data) => {\n        this.loading = false\n        this.data = data.items\n        console.log(123,data)\n        this.paginationConfig.total = data.total\n      })\n    },\n    onDetail(row) {\n      if (row.readStatus === \"UNREAD\"){\n        row.readStatus = \"READ\"\n        const readItems = [];\n        readItems.push(row);\n        updateMessageStatus({\n          items: readItems,\n          operation: \"update\"\n        })\n      }\n      this.detail = row\n      this.dialogVisible = true\n    },\n    handleClose(done) {\n      done();\n    }\n  },\n  created() {\n    this.search()\n  },\n}\n</script>\n\n<style scoped>\n.message-link {\n  cursor: pointer;\n}\n</style>\n","import mod from \"-!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=29ff4fee&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=29ff4fee&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"29ff4fee\",\n  null\n  \n)\n\nexport default component.exports","import {del, get, post} from \"@/plugins/request\"\n\nconst messageUrl = \"/api/v1/message\"\n\nexport function getMessages(page, size) {\n  return get(`${messageUrl}/mail?pageNum=${page}&pageSize=${size}`)\n}\n\nexport function deleteMessagesBy(messageID) {\n  return del(`${messageUrl}/${messageID}`)\n}\n\nexport function getMessageReceiver() {\n  return get(`${messageUrl}/receiver`)\n}\n\nexport function getMessageOfSubscribe() {\n  return get(`${messageUrl}/subscribe`)\n}\n\nexport function updateMessageOfSubscribe(data) {\n  return post(`${messageUrl}/subscribe`, data)\n}\n\nexport function updateMessageReceicver(data) {\n  return post(`${messageUrl}/receiver`, data)\n}\n\nexport function updateMessageStatus(data) {\n  return post(`${messageUrl}/mail/batch`, data)\n}\n\nexport function searchMessages(currentPage, pageSize, conditions) {\n  return post(`${messageUrl}/search?pageNum=${currentPage}&pageSize=${pageSize}`, conditions)\n}\n","export * from \"-!../../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=29ff4fee&scoped=true&lang=css&\""],"sourceRoot":""}