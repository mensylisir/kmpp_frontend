(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f14aaa8"],{"0280":function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"e",(function(){return i})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return r}));n("a5c9");var a=n("ff66"),o="/api/v1/backupaccounts";function c(t){return Object(a["e"])("".concat(o),t)}function s(t){return Object(a["e"])("".concat(o,"/buckets"),t)}function i(t,e){return Object(a["d"])("".concat(o,"/").concat(t),e)}function l(t){return Object(a["b"])("".concat(o,"/").concat(t))}function r(t,e,n){return Object(a["e"])("".concat(o,"/search?pageNum=").concat(t,"&pageSize=").concat(e),n)}},"7e97":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("layout-content",{attrs:{header:t.$t("backup_account.name")}},[n("complex-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.data,"local-key":"backup_columns","search-config":t.searchConfig,selects:t.selects,"pagination-config":t.paginationConfig},on:{"update:selects":function(e){t.selects=e},search:t.search},scopedSlots:t._u([{key:"toolbar",fn:function(){return[n("el-button-group",[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN"],expression:"['ADMIN']"}],attrs:{size:"small"},on:{click:function(e){return t.create()}}},[t._v(t._s(t.$t("commons.button.create"))+" ")]),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN"],expression:"['ADMIN']"}],attrs:{size:"small",disabled:0===t.selects.length},on:{click:function(e){return t.del()}}},[t._v(" "+t._s(t.$t("commons.button.delete"))+" ")]),n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.onGrant()}}},[t._v(" "+t._s(t.$t("commons.button.authorize"))+" ")])],1)]},proxy:!0}])},[n("el-table-column",{attrs:{type:"selection",fix:""}}),n("el-table-column",{attrs:{label:t.$t("commons.table.name"),"show-overflow-tooltip":"",fix:"",prop:"name"}}),t.isAdmin?n("el-table-column",{attrs:{label:t.$t("project.project"),"show-overflow-tooltip":"",prop:"projects"}}):t._e(),t.isAdmin?n("el-table-column",{attrs:{label:t.$t("cluster.cluster"),"show-overflow-tooltip":"",prop:"clusters"}}):t._e(),n("el-table-column",{attrs:{label:t.$t("backup_account.table.bucket"),"show-overflow-tooltip":"",prop:"bucket"}}),n("el-table-column",{attrs:{label:t.$t("commons.table.type"),prop:"credentialVars.type"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return["OSS"===a.type?n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#iconoss"}})]):t._e(),"AZURE"===a.type?n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#iconAzure"}})]):t._e(),"SFTP"===a.type?n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#iconSFTP"}})]):t._e(),"S3"===a.type?n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icons3"}})]):t._e(),t._v("     "),n("span",[t._v(t._s(a.type))])]}}])}),n("el-table-column",{attrs:{label:t.$t("commons.table.status"),prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return["VALID"===a.status?n("div",[n("span",{staticClass:"iconfont iconduihao",staticStyle:{color:"#32B350"}}),t._v(" "+t._s(t.$t("commons.status.normal"))+" ")]):n("div",[n("span",{staticClass:"iconfont iconerror",staticStyle:{color:"#FA4147"}}),t._v(" "+t._s(t.$t("commons.status.failure"))+" ")])]}}])}),n("el-table-column",{attrs:{label:t.$t("commons.table.create_time")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(t._f("datetimeFormat")(n.createdAt))+" ")]}}])}),t.isAdmin?n("fu-table-operations",{attrs:{buttons:t.buttons,label:t.$t("commons.table.action"),fix:""}}):t._e()],1)],1)},o=[],c=n("30d5"),s=(n("f5bd"),n("b1fa"),n("2769"),n("ecf1"),n("a5c9"),n("2e6f"),n("af21"),n("86ca")),i=n("be17"),l=n("0280"),r=n("b21e"),u={name:"BackupAccountList",components:{LayoutContent:i["a"],ComplexTable:s["a"]},data:function(){var t=this;return{selects:[],loading:!1,formLabelWidth:"120px",buttons:[{label:this.$t("commons.button.edit"),icon:"el-icon-edit",disabled:!Object(r["a"])("ADMIN"),click:function(e){t.$router.push({name:"BackupAccountEdit",params:{data:e}})}},{label:this.$t("commons.button.delete"),icon:"el-icon-delete",disabled:!Object(r["a"])("ADMIN"),click:function(e){t.del(e.name)}}],searchConfig:{quickPlaceholder:this.$t("commons.search.quickSearch"),components:[{field:"name",label:this.$t("commons.table.name"),component:"FuComplexInput",defaultOperator:"eq"},{field:"bucket",label:this.$t("backup_account.table.bucket"),component:"FuComplexInput",defaultOperator:"eq"},{field:"type",label:this.$t("commons.table.type"),component:"FuComplexSelect",options:[{label:"OSS",value:"OSS"},{label:"S3",value:"S3"},{label:"SFTP",value:"SFTP"},{label:"AZURE",value:"AZURE"}],multiple:!0},{field:"created_at",label:this.$t("commons.table.create_time"),component:"FuComplexDateTime",valueFormat:"yyyy-MM-dd"}]},paginationConfig:{currentPage:1,pageSize:10,total:0},data:[],isAdmin:Object(r["a"])("ADMIN")}},methods:{search:function(t){var e=this;this.loading=!0;var n=this.paginationConfig,a=n.currentPage,o=n.pageSize;Object(l["d"])(a,o,t).then((function(t){e.data=t.items,e.paginationConfig.total=t.total})).finally((function(){e.loading=!1}))},create:function(){this.$router.push({name:"BackupAccountCreate"})},onGrant:function(){this.$router.push({name:"ProjectAuthorizationList"})},del:function(t){var e=this;this.$confirm(this.$t("commons.confirm_message.delete"),this.$t("commons.message_box.prompt"),{confirmButtonText:this.$t("commons.button.confirm"),cancelButtonText:this.$t("commons.button.cancel"),type:"warning"}).then((function(){if(t)Object(l["b"])(t).then((function(){e.search(),e.$message({type:"success",message:"".concat(t).concat(e.$t("commons.msg.delete_success"),"!")})}));else{var n,a=[],o=Object(c["a"])(e.selects);try{for(o.s();!(n=o.n()).done;){var s=n.value;a.push(Object(l["b"])(s.name))}}catch(i){o.e(i)}finally{o.f()}Promise.all(a).then((function(){e.search(),e.$message({type:"success",message:e.$t("commons.msg.delete_success")})}))}}))}},created:function(){this.search()}},m=u,p=n("5d22"),f=Object(p["a"])(m,a,o,!1,null,"14cde769",null);e["default"]=f.exports},b21e:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("bc44"),n("3979");var a=n("4360"),o=function(t){var e=a["a"].getters&&a["a"].getters.roles;return e.some((function(e){return t.includes(e)}))}}}]);
//# sourceMappingURL=chunk-4f14aaa8.1cac2e0e.js.map