(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b330e33"],{"1c4e":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("layout-content",{attrs:{header:e.$t("commons.button.create"),"back-to":{name:"HostList"}}},[n("el-row",[n("el-col",{attrs:{span:4}},[n("br")]),n("el-col",{attrs:{span:10}},[n("div",{staticClass:"grid-content bg-purple-light"},[n("el-form",{ref:"form",attrs:{"label-position":"left",model:e.form,rules:e.rules,"label-width":"160px"}},[n("el-form-item",{attrs:{label:e.$t("commons.table.name"),prop:"name"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),n("div",[n("span",{staticClass:"input-help"},[e._v(e._s(e.$t("commons.validate.name_help")))])])],1),n("el-form-item",{attrs:{label:"IP",prop:"ip"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.ip,callback:function(t){e.$set(e.form,"ip",t)},expression:"form.ip"}})],1),n("el-form-item",{attrs:{label:e.$t("host.port"),prop:"port"}},[n("el-input-number",{attrs:{step:1,max:65535,"step-strictly":"",clearable:""},model:{value:e.form.port,callback:function(t){e.$set(e.form,"port",e._n(t))},expression:"form.port"}})],1),n("el-form-item",{attrs:{label:e.$t("host.project_auth"),prop:"project"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:""},on:{change:e.getClusters},model:{value:e.form.project,callback:function(t){e.$set(e.form,"project",t)},expression:"form.project"}},e._l(e.projectList,(function(e){return n("el-option",{key:e.id,attrs:{value:e.name,label:e.name}})})),1)],1),n("el-form-item",{attrs:{label:e.$t("host.cluster_auth"),prop:"cluster"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:""},model:{value:e.form.cluster,callback:function(t){e.$set(e.form,"cluster",t)},expression:"form.cluster"}},e._l(e.clusterList,(function(e,t){return n("el-option",{key:t,attrs:{value:e,label:e}})})),1),n("div",[n("span",{staticClass:"input-help"},[e._v(e._s(e.$t("host.cluster_auth_help")))])])],1),n("el-form-item",{attrs:{label:e.$t("credential.type"),required:""}},[n("el-radio-group",{on:{change:e.updateCredentialType},model:{value:e.credentialType,callback:function(t){e.credentialType=t},expression:"credentialType"}},[n("el-radio",{attrs:{label:"exists"}},[e._v(e._s(e.$t("host.exists_credential")))]),n("el-radio",{attrs:{label:"new"}},[e._v(e._s(e.$t("host.new_credential")))])],1)],1),"exists"===e.credentialType?n("el-form-item",{attrs:{label:e.$t("host.credential_name"),prop:"credentialId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:""},model:{value:e.form.credentialId,callback:function(t){e.$set(e.form,"credentialId",t)},expression:"form.credentialId"}},e._l(e.credentialList,(function(e){return n("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1):e._e(),"new"===e.credentialType?n("span",[n("el-form-item",{attrs:{label:e.$t("credential.name"),prop:"credential.name"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.credential.name,callback:function(t){e.$set(e.form.credential,"name",t)},expression:"form.credential.name"}})],1),n("el-form-item",{attrs:{label:e.$t("credential.username"),prop:"credential.username"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.credential.username,callback:function(t){e.$set(e.form.credential,"username",t)},expression:"form.credential.username"}})],1),n("el-form-item",{attrs:{label:e.$t("host.credential_type"),prop:"credential.type",required:""}},[n("el-radio-group",{model:{value:e.form.credential.type,callback:function(t){e.$set(e.form.credential,"type",t)},expression:"form.credential.type"}},[n("el-radio",{attrs:{label:"password"}},[e._v(e._s(e.$t("credential.password")))]),n("el-radio",{attrs:{label:"privateKey"}},[e._v(e._s(e.$t("credential.privateKey")))])],1)],1),"password"===e.form.credential.type?n("el-form-item",{attrs:{label:e.$t("credential.password"),prop:"credential.password"}},[n("el-input",{attrs:{type:"password",clearable:""},model:{value:e.form.credential.password,callback:function(t){e.$set(e.form.credential,"password",t)},expression:"form.credential.password"}})],1):e._e(),"privateKey"===e.form.credential.type?n("el-form-item",{attrs:{label:e.$t("credential.privateKey"),prop:"credential.privateKey"}},[n("el-input",{attrs:{type:"textarea",clearable:""},model:{value:e.form.credential.privateKey,callback:function(t){e.$set(e.form.credential,"privateKey",t)},expression:"form.credential.privateKey"}})],1):e._e()],1):e._e(),n("el-form-item",{staticStyle:{float:"right"}},[n("el-button",{on:{click:function(t){return e.onCancel()}}},[e._v(e._s(e.$t("commons.button.cancel")))]),n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("commons.button.create")))])],1)],1)],1)])],1)],1)},a=[],c=n("30d5"),o=(n("f5bd"),n("be17")),i=n("f253"),l=(n("a5c9"),n("ff66")),s="/api/v1/credentials";function u(){return Object(l["c"])("".concat(s))}var f=n("7273"),d=n("7ea2"),p=n("0792"),m={name:"HostCreate",components:{LayoutContent:o["a"]},data:function(){return{credentialType:"exists",form:{name:"",ip:"",port:22,project:"",cluster:"",credentialId:"",credential:{username:"",password:"",name:"",type:"password",privateKey:""}},rules:{name:[p["a"].NameRule],ip:[p["a"].RequiredRule],port:[p["a"].NumberRule],project:[p["a"].RequiredRule],credentialId:[p["a"].RequiredRule],credential:{username:[p["a"].RequiredRule],password:[p["a"].RequiredRule],name:[p["a"].RequiredRule],privateKey:[p["a"].RequiredRule]}},credentialList:[],projectList:[],clusterList:[]}},methods:{onSubmit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return!1;Object(i["a"])(e.form).then((function(){e.$message({type:"success",message:e.$t("commons.msg.create_success")}),e.$router.push({name:"HostList"})}))}))},updateCredentialType:function(){this.form.credentialId="exists"===this.credentialType?this.form.credentialId:""},getCredentials:function(){var e=this;u().then((function(t){e.credentialList=t.items}))},getProjects:function(){var e=this;Object(f["a"])().then((function(t){e.projectList=t.items}))},getClusters:function(){var e=this;this.clusterList=[],this.form.cluster="",""!==this.form.project&&this.form.project&&Object(d["f"])(this.form.project).then((function(t){e.clusterList=[];var n,r=Object(c["a"])(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;"plan"!==a.provider&&e.clusterList.push(a.name)}}catch(o){r.e(o)}finally{r.f()}}))},onCancel:function(){this.$router.push({name:"HostList"})}},created:function(){this.getCredentials(),this.getProjects()}},b=m,h=n("5d22"),v=Object(h["a"])(b,r,a,!1,null,"df617390",null);t["default"]=v.exports},"30d5":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("79fd"),n("45af"),n("b1fa"),n("1ec5"),n("2e6f"),n("af21");var r=n("ec81");function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Object(r["a"])(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,c=function(){};return{s:c,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(l)throw o}}}}},"43dd":function(e,t,n){e.exports={theme:"#5354bb"}},"7ea2":function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return s})),n.d(t,"p",(function(){return u})),n.d(t,"c",(function(){return f})),n.d(t,"k",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"l",(function(){return b})),n.d(t,"m",(function(){return h})),n.d(t,"q",(function(){return v})),n.d(t,"h",(function(){return _})),n.d(t,"g",(function(){return y})),n.d(t,"i",(function(){return j})),n.d(t,"n",(function(){return $})),n.d(t,"o",(function(){return g})),n.d(t,"j",(function(){return k}));n("a5c9"),n("2769"),n("0756");var r=n("ff66"),a="/api/v1/clusters",c="/api/v1/clusters/logger/{cluster_name}",o="/api/v1/clusters/provisioner/log/{cluster_name}/{log_id}";function i(e){return Object(r["c"])("".concat(a,"/").concat(e))}function l(e){return Object(r["c"])("".concat(a,"/name/").concat(e))}function s(e){return Object(r["c"])("".concat(a,"/existence/").concat(e))}function u(e,t,n){return Object(r["e"])("".concat(a,"/search?pageNum=").concat(e,"&pageSize=").concat(t),n)}function f(e){return Object(r["e"])("".concat(a),e)}function d(e){return Object(r["c"])("".concat(a,"/health/").concat(e))}function p(e){return Object(r["e"])("".concat(a,"/recover/").concat(e),{})}function m(e,t){return Object(r["b"])("".concat(a,"/").concat(e,"?force=").concat(t))}function b(e){return Object(r["e"])("".concat(a,"/import/"),e)}function h(e){return Object(r["e"])("".concat(a,"/init/").concat(e,"/"),{})}function v(e,t){var n={clusterName:e,version:t};return Object(r["e"])("".concat(a,"/upgrade/"),n)}function _(e){return Object(r["c"])("".concat(a,"/status/").concat(e))}function y(e){return Object(r["c"])(c.replace("{cluster_name}",e))}function j(e,t){return Object(r["c"])(o.replace("{cluster_name}",e).replace("{log_id}",t))}function $(e){window.open("/ui/#/logger?clusterName=".concat(e),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function g(e,t){window.open("/ui/#/logger?clusterName=".concat(e,"&logId=").concat(t),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function k(e){return Object(r["c"])("".concat(a,"/secret/").concat(e))}},a026:function(e,t,n){"use strict";n("f5c4")},be17:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-container"},[e.$slots.description||e.description?n("div",{staticClass:"content-container__description"},[n("el-alert",{attrs:{title:e.description,type:"info"}}),n("br")],1):e._e(),e.$slots.header||e.header?n("div",{staticClass:"content-container__header"},[e._t("header",(function(){return[e.showBack?n("back-button",{attrs:{path:e.backPath,name:e.backName,to:e.backTo}}):e._e(),e._v(" "+e._s(e.header)+" ")]}))],2):e._e(),e.$slots.toolbar?n("div",{staticClass:"content-container__toolbar"},[e._t("toolbar")],2):e._e(),e._t("default")],2)},a=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-icon",{staticClass:"back-button",attrs:{name:"back"},nativeOn:{click:function(t){return e.jump.apply(null,arguments)}}})},o=[],i=(n("f5bd"),{name:"BackButton",props:{path:String,name:String,to:Object},methods:{jump:function(){var e=this.path,t=this.name,n=this.to;e&&this.$router.push(e),t&&this.$router.push(t),n&&this.$router.push(n)}}}),l=i,s=(n("eb9f"),n("5d22")),u=Object(s["a"])(l,c,o,!1,null,null,null),f=u.exports,d={name:"LayoutContent",components:{BackButton:f},props:{header:String,description:String,backPath:String,backName:String,backTo:Object},computed:{showBack:function(e){var t=e.backPath,n=e.backName,r=e.backTo;return t||n||r}}},p=d,m=(n("a026"),Object(s["a"])(p,r,a,!1,null,null,null));t["a"]=m.exports},eb9f:function(e,t,n){"use strict";n("43dd")},f253:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return s}));n("a5c9");var r=n("ff66"),a="/api/v1/hosts";function c(e){return Object(r["e"])(a,e)}function o(e){return Object(r["b"])("".concat(a,"/").concat(e))}function i(e,t,n){return Object(r["e"])("".concat(a,"/search?pageNum=").concat(e,"&pageSize=").concat(t),n)}function l(e){var t="".concat(a,"/sync/");return Object(r["e"])(t,e)}function s(e){var t="".concat(a,"/upload");return Object(r["e"])(t,e)}},f5c4:function(e,t,n){e.exports={theme:"#5354bb"}}}]);
//# sourceMappingURL=chunk-5b330e33.89355a8e.js.map