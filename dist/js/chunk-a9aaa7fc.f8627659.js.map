{"version":3,"sources":["webpack:///./src/business/hosts/create/index.vue?6b2b","webpack:///src/business/hosts/create/index.vue","webpack:///./src/business/hosts/create/index.vue?c52a","webpack:///./src/business/hosts/create/index.vue","webpack:///./src/api/cluster.js","webpack:///./src/api/hosts.js","webpack:///./src/api/credentials.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","$t","name","staticClass","ref","form","rules","model","value","callback","$$v","$set","expression","_v","_s","_n","staticStyle","on","getClusters","_l","pro","key","id","item","index","updateCredentialType","credentialType","cre","_e","credential","type","$event","onCancel","onSubmit","staticRenderFns","components","data","ip","port","project","cluster","credentialId","username","password","privateKey","credentialList","projectList","clusterList","methods","$refs","validate","valid","getCredentials","getProjects","$router","push","created","component","clusterUrl","clusterLoggerUrl","storageProvisionerLoggerUrl","getClusterByName","clusterName","get","getClusterByProject","projectNames","checkClusterNameExistence","searchClusters","page","size","condition","post","createCluster","healthCheck","clusterRecover","deleteCluster","force","del","importCluster","allClusters","initCluster","upgradeCluster","version","req","getClusterStatus","getClusterLog","replace","getProvisionerLog","logId","openLogger","window","open","openProvisionerLogger","getSecret","hostUrl","createHost","deleteHost","searchHosts","currentPage","pageSize","syncHosts","hosts","itemUrl","importHosts","file","settingUrl","listCredentialAll","searchCredential","conditions","createCredentials","updateCredentials","patch","deleteCredentials","listAllCredentials"],"mappings":"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","file":"js/chunk-a9aaa7fc.f8627659.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('layout-content',{attrs:{\"header\":_vm.$t('commons.button.create'),\"back-to\":{ name: 'HostList' }}},[_c('el-row',[_c('el-col',{attrs:{\"span\":4}},[_c('br')]),_c('el-col',{attrs:{\"span\":10}},[_c('div',{staticClass:\"grid-content bg-purple-light\"},[_c('el-form',{ref:\"form\",attrs:{\"label-position\":\"left\",\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"160px\"}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('commons.table.name'),\"prop\":\"name\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}}),_c('div',[_c('span',{staticClass:\"input-help\"},[_vm._v(_vm._s(_vm.$t('commons.validate.name_help')))])])],1),_c('el-form-item',{attrs:{\"label\":\"IP\",\"prop\":\"ip\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.form.ip),callback:function ($$v) {_vm.$set(_vm.form, \"ip\", $$v)},expression:\"form.ip\"}})],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('host.port'),\"prop\":\"port\"}},[_c('el-input-number',{attrs:{\"step\":1,\"max\":65535,\"step-strictly\":\"\",\"clearable\":\"\"},model:{value:(_vm.form.port),callback:function ($$v) {_vm.$set(_vm.form, \"port\", _vm._n($$v))},expression:\"form.port\"}})],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('host.project_auth'),\"prop\":\"project\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"clearable\":\"\",\"filterable\":\"\"},on:{\"change\":_vm.getClusters},model:{value:(_vm.form.project),callback:function ($$v) {_vm.$set(_vm.form, \"project\", $$v)},expression:\"form.project\"}},_vm._l((_vm.projectList),function(pro){return _c('el-option',{key:pro.id,attrs:{\"value\":pro.name,\"label\":pro.name}})}),1)],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('host.cluster_auth'),\"prop\":\"cluster\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"clearable\":\"\",\"filterable\":\"\"},model:{value:(_vm.form.cluster),callback:function ($$v) {_vm.$set(_vm.form, \"cluster\", $$v)},expression:\"form.cluster\"}},_vm._l((_vm.clusterList),function(item,index){return _c('el-option',{key:index,attrs:{\"value\":item,\"label\":item}})}),1),_c('div',[_c('span',{staticClass:\"input-help\"},[_vm._v(_vm._s(_vm.$t('host.cluster_auth_help')))])])],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('credential.type'),\"required\":\"\"}},[_c('el-radio-group',{on:{\"change\":_vm.updateCredentialType},model:{value:(_vm.credentialType),callback:function ($$v) {_vm.credentialType=$$v},expression:\"credentialType\"}},[_c('el-radio',{attrs:{\"label\":\"exists\"}},[_vm._v(_vm._s(_vm.$t('host.exists_credential')))]),_c('el-radio',{attrs:{\"label\":\"new\"}},[_vm._v(_vm._s(_vm.$t('host.new_credential')))])],1)],1),(_vm.credentialType==='exists')?_c('el-form-item',{attrs:{\"label\":_vm.$t('host.credential_name'),\"prop\":\"credentialId\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"clearable\":\"\",\"filterable\":\"\"},model:{value:(_vm.form.credentialId),callback:function ($$v) {_vm.$set(_vm.form, \"credentialId\", $$v)},expression:\"form.credentialId\"}},_vm._l((_vm.credentialList),function(cre){return _c('el-option',{key:cre.id,attrs:{\"value\":cre.id,\"label\":cre.name}})}),1)],1):_vm._e(),(_vm.credentialType==='new')?_c('span',[_c('el-form-item',{attrs:{\"label\":_vm.$t('credential.name'),\"prop\":\"credential.name\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.form.credential.name),callback:function ($$v) {_vm.$set(_vm.form.credential, \"name\", $$v)},expression:\"form.credential.name\"}})],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('credential.username'),\"prop\":\"credential.username\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.form.credential.username),callback:function ($$v) {_vm.$set(_vm.form.credential, \"username\", $$v)},expression:\"form.credential.username\"}})],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('host.credential_type'),\"prop\":\"credential.type\",\"required\":\"\"}},[_c('el-radio-group',{model:{value:(_vm.form.credential.type),callback:function ($$v) {_vm.$set(_vm.form.credential, \"type\", $$v)},expression:\"form.credential.type\"}},[_c('el-radio',{attrs:{\"label\":\"password\"}},[_vm._v(_vm._s(_vm.$t('credential.password')))]),_c('el-radio',{attrs:{\"label\":\"privateKey\"}},[_vm._v(_vm._s(_vm.$t('credential.privateKey')))])],1)],1),(_vm.form.credential.type==='password')?_c('el-form-item',{attrs:{\"label\":_vm.$t('credential.password'),\"prop\":\"credential.password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"clearable\":\"\"},model:{value:(_vm.form.credential.password),callback:function ($$v) {_vm.$set(_vm.form.credential, \"password\", $$v)},expression:\"form.credential.password\"}})],1):_vm._e(),(_vm.form.credential.type==='privateKey')?_c('el-form-item',{attrs:{\"label\":_vm.$t('credential.privateKey'),\"prop\":\"credential.privateKey\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"clearable\":\"\"},model:{value:(_vm.form.credential.privateKey),callback:function ($$v) {_vm.$set(_vm.form.credential, \"privateKey\", $$v)},expression:\"form.credential.privateKey\"}})],1):_vm._e()],1):_vm._e(),_c('el-form-item',{staticStyle:{\"float\":\"right\"}},[_c('el-button',{on:{\"click\":function($event){return _vm.onCancel()}}},[_vm._v(_vm._s(_vm.$t(\"commons.button.cancel\")))]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(_vm._s(_vm.$t(\"commons.button.create\")))])],1)],1)],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <layout-content :header=\"$t('commons.button.create')\" :back-to=\"{ name: 'HostList' }\">\n    <el-row>\n      <el-col :span=\"4\"><br /></el-col>\n      <el-col :span=\"10\">\n        <div class=\"grid-content bg-purple-light\">\n          <el-form label-position='left' ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"160px\">\n            <el-form-item :label=\"$t('commons.table.name')\" prop=\"name\">\n              <el-input v-model=\"form.name\" clearable></el-input>\n              <div><span class=\"input-help\">{{$t('commons.validate.name_help')}}</span></div>\n            </el-form-item>\n            <el-form-item label=\"IP\" prop=\"ip\">\n              <el-input v-model=\"form.ip\" clearable></el-input>\n            </el-form-item>\n            <el-form-item :label=\"$t('host.port')\" prop=\"port\">\n              <el-input-number :step=\"1\" :max=\"65535\" step-strictly v-model.number=\"form.port\" clearable></el-input-number>\n            </el-form-item>\n            <el-form-item :label=\"$t('host.project_auth')\" prop=\"project\">\n              <el-select style=\"width:100%\" v-model=\"form.project\" @change=\"getClusters\" clearable filterable>\n                <el-option v-for=\"pro in projectList\" :key=\"pro.id\" :value=\"pro.name\" :label=\"pro.name\" />\n              </el-select>\n            </el-form-item>\n            <el-form-item :label=\"$t('host.cluster_auth')\" prop=\"cluster\">\n              <el-select style=\"width:100%\" v-model=\"form.cluster\" clearable filterable>\n                <el-option v-for=\"(item,index) in clusterList\" :key=\"index\" :value=\"item\" :label=\"item\" />\n              </el-select>\n              <div><span class=\"input-help\">{{$t('host.cluster_auth_help')}}</span></div>\n\n            </el-form-item>\n\n            <el-form-item :label=\"$t('credential.type')\" required>\n              <el-radio-group v-model=\"credentialType\" @change=\"updateCredentialType\">\n                <el-radio label=\"exists\">{{$t('host.exists_credential')}}</el-radio>\n                <el-radio label=\"new\">{{$t('host.new_credential')}}</el-radio>\n              </el-radio-group>\n            </el-form-item>\n            <el-form-item v-if=\"credentialType==='exists'\" :label=\"$t('host.credential_name')\" prop=\"credentialId\">\n              <el-select style=\"width:100%\" v-model=\"form.credentialId\" clearable filterable>\n                <el-option v-for=\"cre in credentialList\" :key=\"cre.id\" :value=\"cre.id\" :label=\"cre.name\" />\n              </el-select>\n            </el-form-item>\n\n            <span v-if=\"credentialType==='new'\">\n              <el-form-item :label=\"$t('credential.name')\" prop=\"credential.name\">\n                <el-input v-model=\"form.credential.name\" clearable></el-input>\n              </el-form-item>\n              <el-form-item :label=\"$t('credential.username')\" prop=\"credential.username\">\n                <el-input v-model=\"form.credential.username\" clearable></el-input>\n              </el-form-item>\n              <el-form-item :label=\"$t('host.credential_type')\" prop=\"credential.type\" required>\n                <el-radio-group v-model=\"form.credential.type\">\n                  <el-radio label=\"password\">{{$t('credential.password')}}</el-radio>\n                  <el-radio label=\"privateKey\">{{$t('credential.privateKey')}}</el-radio>\n                </el-radio-group>\n              </el-form-item>\n              <el-form-item v-if=\"form.credential.type==='password'\" :label=\"$t('credential.password')\" prop=\"credential.password\">\n                <el-input type=\"password\" v-model=\"form.credential.password\" clearable></el-input>\n              </el-form-item>\n              <el-form-item v-if=\"form.credential.type==='privateKey'\" :label=\"$t('credential.privateKey')\" prop=\"credential.privateKey\">\n                <el-input type=\"textarea\" v-model=\"form.credential.privateKey\" clearable></el-input>\n              </el-form-item>\n            </span>\n            <el-form-item style=\"float: right\">\n              <el-button @click=\"onCancel()\">{{ $t(\"commons.button.cancel\") }}</el-button>\n              <el-button type=\"primary\" @click=\"onSubmit\">{{ $t(\"commons.button.create\") }}</el-button>\n            </el-form-item>\n          </el-form>\n        </div>\n      </el-col>\n    </el-row>\n  </layout-content>\n</template>\n\n<script>\nimport LayoutContent from \"@/components/layout/LayoutContent\"\nimport { createHost } from \"@/api/hosts\"\nimport { listCredentialAll } from \"@/api/credentials\"\nimport { allProjects } from \"@/api/projects\"\nimport { getClusterByProject } from \"@/api/cluster\"\nimport Rule from \"@/utils/rules\"\n\nexport default {\n  name: \"HostCreate\",\n  components: { LayoutContent },\n  data() {\n    return {\n      credentialType: \"exists\",\n      form: {\n        name: \"\",\n        ip: \"\",\n        port: 22,\n        project: \"\",\n        cluster: \"\",\n        credentialId: \"\",\n        credential: {\n          username: \"\",\n          password: \"\",\n          name: \"\",\n          type: \"password\",\n          privateKey: \"\",\n        },\n      },\n      rules: {\n        name: [Rule.NameRule],\n        ip: [Rule.RequiredRule],\n        port: [Rule.NumberRule],\n        project: [Rule.RequiredRule],\n        credentialId: [Rule.RequiredRule],\n        credential: {\n          username: [Rule.RequiredRule],\n          password: [Rule.RequiredRule],\n          name: [Rule.RequiredRule],\n          privateKey: [Rule.RequiredRule],\n        },\n      },\n      credentialList: [],\n      projectList: [],\n      clusterList: [],\n    }\n  },\n  methods: {\n    onSubmit() {\n      this.$refs[\"form\"].validate((valid) => {\n        if (valid) {\n          createHost(this.form).then(() => {\n            this.$message({ type: \"success\", message: this.$t(\"commons.msg.create_success\") })\n            this.$router.push({ name: \"HostList\" })\n          })\n        } else {\n          return false\n        }\n      })\n    },\n    updateCredentialType() {\n      this.form.credentialId = this.credentialType === \"exists\" ? this.form.credentialId : \"\"\n    },\n    getCredentials() {\n      listCredentialAll().then((data) => {\n        this.credentialList = data.items\n      })\n    },\n    getProjects() {\n      allProjects().then((data) => {\n        this.projectList = data.items\n      })\n    },\n    getClusters() {\n      this.clusterList = []\n      this.form.cluster = \"\"\n      if (this.form.project === \"\") {\n        return\n      }\n      if (this.form.project) {\n        getClusterByProject(this.form.project).then((data) => {\n          this.clusterList = []\n          for (const clu of data) {\n            if (clu.provider !== \"plan\") {\n              this.clusterList.push(clu.name)\n            }\n          }\n        })\n      }\n    },\n    onCancel() {\n      this.$router.push({ name: \"HostList\" })\n    },\n  },\n  created() {\n    this.getCredentials()\n    this.getProjects()\n  },\n}\n</script>\n\n<style scoped>\n</style>\n","import mod from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=df617390&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"df617390\",\n  null\n  \n)\n\nexport default component.exports","import {get, post, del} from \"@/plugins/request\"\n\nconst clusterUrl = \"/api/v1/clusters\"\nconst clusterLoggerUrl = \"/api/v1/clusters/logger/{cluster_name}\"\nconst clusterNodeLoggerUrl = \"/api/v1/clusters/node/logger/{cluster_name}/{node_name}\"\nconst storageProvisionerLoggerUrl = \"/api/v1/clusters/provisioner/log/{cluster_name}/{log_id}\"\n\nexport function getClusterByName(clusterName) {\n  return get(`${clusterUrl}/${clusterName}`)\n}\n\nexport function getClusterByProject(projectNames) {\n  return get(`${clusterUrl}/name/${projectNames}`)\n}\n\nexport function checkClusterNameExistence(clusterName) {\n  return get(`${clusterUrl}/existence/${clusterName}`)\n}\n\nexport function listClusters(page, size) {\n  return get(`${clusterUrl}?pageNum=${page}&pageSize=${size}`)\n}\n\nexport function searchClusters(page, size, condition) {\n  return post(`${clusterUrl}/search?pageNum=${page}&pageSize=${size}`, condition)\n}\n\nexport function createCluster(data) {\n  return post(`${clusterUrl}`, data)\n}\n\nexport function healthCheck(clusterName) {\n  return get(`${clusterUrl}/health/${clusterName}`)\n}\n\nexport function clusterRecover(clusterName) {\n  return post(`${clusterUrl}/recover/${clusterName}`, {})\n}\n\nexport function deleteCluster(clusterName, force) {\n  return del(`${clusterUrl}/${clusterName}?force=${force}`)\n}\n\nexport function importCluster(data) {\n  return post(`${clusterUrl}/import/`, data)\n}\n\nexport function allClusters() {\n  return get(`${clusterUrl}`)\n}\n\nexport function initCluster(clusterName) {\n  return post(`${clusterUrl}/init/${clusterName}/`, {})\n}\n\nexport function upgradeCluster(clusterName, version) {\n  let req = {\n    clusterName: clusterName,\n    version: version,\n  }\n  return post(`${clusterUrl}/upgrade/`, req)\n}\n\nexport function getClusterStatus(clusterName) {\n  return get(`${clusterUrl}/status/${clusterName}`)\n}\n\nexport function getClusterLog(clusterName) {\n  return get(clusterLoggerUrl.replace(\"{cluster_name}\", clusterName))\n}\n\nexport function getClusterNodeLog(clusterName, nodeName) {\n  return get(clusterNodeLoggerUrl.replace(\"{cluster_name}\", clusterName).replace(\"{node_name}\", nodeName))\n}\n\nexport function getProvisionerLog(clusterName, logId) {\n  return get(storageProvisionerLoggerUrl.replace(\"{cluster_name}\", clusterName).replace(\"{log_id}\", logId))\n}\n\nexport function openLogger(clusterName) {\n  window.open(`/ui/#/logger?clusterName=${clusterName}`, \"_blank\", \"height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no\")\n}\n\nexport function openProvisionerLogger(clusterName, logId) {\n  window.open(`/ui/#/logger?clusterName=${clusterName}&logId=${logId}`, \"_blank\", \"height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no\")\n}\n\nexport function getSecret(clusterName) {\n  return get(`${clusterUrl}/secret/${clusterName}`)\n}\n","import {get, post, del} from \"@/plugins/request\"\n\nconst hostUrl = \"/api/v1/hosts\"\n\nexport function createHost(data) {\n  return post(hostUrl, data)\n}\n\nexport function deleteHost(name) {\n  return del(`${hostUrl}/${name}`)\n}\n\nexport function listHosts(currentPage, pageSize) {\n  return get(`${hostUrl}?pageNum=${currentPage}&pageSize=${pageSize}`)\n}\n\nexport function searchHosts(currentPage, pageSize,condition) {\n  return post(`${hostUrl}/search?pageNum=${currentPage}&pageSize=${pageSize}`,condition)\n}\n\nexport function syncHosts(hosts) {\n  const itemUrl = `${hostUrl}/sync/`\n  return post(itemUrl, hosts)\n}\n\nexport function importHosts(file) {\n  const itemUrl = `${hostUrl}/upload`\n  return post(itemUrl, file)\n}\n","import {get, patch, post, del} from \"@/plugins/request\"\n\nconst settingUrl = \"/api/v1/credentials\"\n\n// Registry\nexport function listCredentials(currentPage, pageSize) {\n  return get(`${settingUrl}/?pageNum=${currentPage}&pageSize=${pageSize}`)\n}\n\nexport function listCredentialAll() {\n  return get(`${settingUrl}`)\n}\n\nexport function searchCredential(currentPage, pageSize, conditions) {\n  return post(`${settingUrl}/search?pageNum=${currentPage}&pageSize=${pageSize}`, conditions)\n}\n\nexport function createCredentials(data) {\n  return post(settingUrl,data)\n}\n\nexport function updateCredentials(name, data) {\n  return patch(`${settingUrl}/${name}`,data)\n}\n\nexport function deleteCredentials(name) {\n  return del(`${settingUrl}/${name}`)\n}\n\nexport function listAllCredentials() {\n  return get(`${settingUrl}`)\n}\n"],"sourceRoot":""}