(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72e92a56"],{"7ea2":function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"p",(function(){return u})),n.d(t,"c",(function(){return m})),n.d(t,"k",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"l",(function(){return b})),n.d(t,"m",(function(){return h})),n.d(t,"q",(function(){return v})),n.d(t,"h",(function(){return y})),n.d(t,"g",(function(){return g})),n.d(t,"i",(function(){return _})),n.d(t,"n",(function(){return k})),n.d(t,"o",(function(){return j})),n.d(t,"j",(function(){return O}));n("99af"),n("ac1f"),n("5319");var r=n("ff66"),o="/api/v1/clusters",a="/api/v1/clusters/logger/{cluster_name}",c="/api/v1/clusters/provisioner/log/{cluster_name}/{log_id}";function i(e){return Object(r["c"])("".concat(o,"/").concat(e))}function s(e){return Object(r["c"])("".concat(o,"/name/").concat(e))}function l(e){return Object(r["c"])("".concat(o,"/existence/").concat(e))}function u(e,t,n){return Object(r["e"])("".concat(o,"/search?pageNum=").concat(e,"&pageSize=").concat(t),n)}function m(e){return Object(r["e"])("".concat(o),e)}function f(e){return Object(r["c"])("".concat(o,"/health/").concat(e))}function d(e){return Object(r["e"])("".concat(o,"/recover/").concat(e),{})}function p(e,t){return Object(r["b"])("".concat(o,"/").concat(e,"?force=").concat(t))}function b(e){return Object(r["e"])("".concat(o,"/import/"),e)}function h(e){return Object(r["e"])("".concat(o,"/init/").concat(e,"/"),{})}function v(e,t){var n={clusterName:e,version:t};return Object(r["e"])("".concat(o,"/upgrade/"),n)}function y(e){return Object(r["c"])("".concat(o,"/status/").concat(e))}function g(e){return Object(r["c"])(a.replace("{cluster_name}",e))}function _(e,t){return Object(r["c"])(c.replace("{cluster_name}",e).replace("{log_id}",t))}function k(e){window.open("/ui/#/logger?clusterName=".concat(e),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function j(e,t){window.open("/ui/#/logger?clusterName=".concat(e,"&logId=").concat(t),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function O(e){return Object(r["c"])("".concat(o,"/secret/").concat(e))}},9015:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("layout-content",{attrs:{header:e.$t("commons.button.create"),"back-to":{name:e.fromName}}},[n("el-row",[n("el-col",{attrs:{span:4}},[n("br")]),n("el-col",{attrs:{span:10}},[n("div",{staticClass:"grid-content bg-purple-light"},[n("el-form",{ref:"form",attrs:{"label-position":"left",model:e.form,rules:e.rules,"label-width":"160px"}},[n("el-form-item",{attrs:{label:e.$t("commons.table.name"),prop:"name"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),n("div",[n("span",{staticClass:"input-help"},[e._v(e._s(e.$t("commons.validate.name_help")))])])],1),n("el-form-item",{attrs:{label:"类型",prop:"type",required:""}},[n("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[n("el-radio",{attrs:{label:"common"}},[e._v("普通证书")]),n("el-radio",{attrs:{label:"root"}},[e._v("根证书")])],1)],1),"common"===e.form.type?n("el-form-item",{attrs:{required:"",label:"根证书",prop:"ca_id"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.ca_id,callback:function(t){e.$set(e.form,"ca_id",t)},expression:"form.ca_id"}},e._l(e.certification,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),n("el-form-item",{attrs:{required:"",label:"大小",prop:"key.size"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.key.size,callback:function(t){e.$set(e.form.key,"size",t)},expression:"form.key.size"}},[n("el-option",{attrs:{label:"1024",value:"1024"}}),n("el-option",{attrs:{label:"2048",value:"2048"}}),n("el-option",{attrs:{label:"4096",value:"4096"}})],1)],1),"root"===e.form.type?n("el-form-item",{attrs:{required:"",label:"CN",prop:"cn"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.cn,callback:function(t){e.$set(e.form,"cn",t)},expression:"form.cn"}})],1):e._e(),"common"===e.form.type?n("el-form-item",{attrs:{required:"",label:"hosts",prop:"hosts"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.hosts,callback:function(t){e.$set(e.form,"hosts",t)},expression:"form.hosts"}})],1):e._e(),n("el-form-item",{attrs:{required:"",label:"O",prop:"names.organization"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.names.organization,callback:function(t){e.$set(e.form.names,"organization",t)},expression:"form.names.organization"}})],1),n("el-form-item",{attrs:{label:"C",prop:"names.country",required:""}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.names.country,callback:function(t){e.$set(e.form.names,"country",t)},expression:"form.names.country"}})],1),n("el-form-item",{attrs:{label:"S",prop:"names.province"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.names.province,callback:function(t){e.$set(e.form.names,"province",t)},expression:"form.names.province"}})],1),n("el-form-item",{attrs:{label:"L",prop:"names.locality",required:""}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.names.locality,callback:function(t){e.$set(e.form.names,"locality",t)},expression:"form.names.locality"}})],1),n("el-form-item",{attrs:{label:"STREET",prop:"names.streetaddress",required:""}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.names.streetaddress,callback:function(t){e.$set(e.form.names,"streetaddress",t)},expression:"form.names.streetaddress"}})],1),n("el-form-item",{attrs:{label:"PostalCode",prop:"names.postalcode"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.names.postalcode,callback:function(t){e.$set(e.form.names,"postalcode",t)},expression:"form.names.postalcode"}})],1),n("el-form-item",{attrs:{label:"OU",prop:"names.organizationunit",required:""}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.names.organizationunit,callback:function(t){e.$set(e.form.names,"organizationunit",t)},expression:"form.names.organizationunit"}})],1),n("el-form-item",{staticStyle:{float:"right"}},[n("el-button",{on:{click:function(t){return e.onCancel()}}},[e._v(e._s(e.$t("commons.button.cancel")))]),n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("commons.button.create")))])],1)],1)],1)])],1)],1)},o=[],a=n("b85c"),c=(n("a9e3"),n("b0c0"),n("4de4"),n("be17")),i=n("fb0a"),s=n("a6c5"),l=n("7ea2"),u=n("0792"),m={name:"HostCreate",components:{LayoutContent:c["a"]},data:function(){return{credentialType:"new",form:{name:"",cn:"",type:"common",ca_id:void 0,hosts:"",key:{algo:"rsa",size:1024},names:{organization:"",country:"",province:"",locality:"",streetaddress:"",postalcode:"",organizationunit:""}},rules:{name:[u["a"].NameRule],cn:[u["a"].RequiredRule],ca_id:[u["a"].RequiredRule],hosts:[u["a"].RequiredRule],key:{size:[u["a"].RequiredRule]},names:{organization:[u["a"].RequiredRule],country:[u["a"].RequiredRule],locality:[u["a"].RequiredRule],streetaddress:[u["a"].RequiredRule],organizationunit:[u["a"].RequiredRule]}},certification:[],fromName:""}},methods:{onSubmit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return!1;var n={key:{},names:{}};n.is_ca="common"!==e.form.type,n.names.organization=[e.form.names.organization],n.names.country=[e.form.names.country],n.names.province=[e.form.names.province],n.names.locality=[e.form.names.locality],n.names.streetaddress=[e.form.names.streetaddress],n.names.postalcode=[e.form.names.postalcode],n.names.organizationunit=[e.form.names.organizationunit],n.key.algo="rsa",n.key.size=Number(e.form.key.size),n.name=e.form.name,n.is_ca?n.cn=e.form.cn:(n.hosts=[e.form.hosts],n.ca_id=e.form.ca_id),Object(s["a"])(n).then((function(){e.$message({type:"success",message:e.$t("commons.msg.create_success")}),e.$router.push({name:"certification"})}))}))},updateCredentialType:function(){this.form.credentialId="exists"===this.credentialType?this.form.credentialId:""},getCredentials:function(){var e=this;Object(i["a"])().then((function(t){e.credentialList=t.items}))},getCertification:function(){var e=this;Object(s["b"])(1,1e3).then((function(t){e.certification=t.items.filter((function(e){return e.is_ca}))})).catch((function(){e.loading=!1}))},getClusters:function(){var e=this;this.clusterList=[],this.form.cluster="",""!==this.form.project&&this.form.project&&Object(l["f"])(this.form.project).then((function(t){e.clusterList=[];var n,r=Object(a["a"])(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;"plan"!==o.provider&&e.clusterList.push(o.name)}}catch(c){r.e(c)}finally{r.f()}}))},onCancel:function(){this.$router.push({name:this.fromName})}},beforeRouteEnter:function(e,t,n){n((function(e){e.fromName=t.name}))},created:function(){this.getCredentials(),this.getCertification()}},f=m,d=n("2877"),p=Object(d["a"])(f,r,o,!1,null,"6f25ecac",null);t["default"]=p.exports},"992c":function(e,t,n){e.exports={theme:"#5354bb"}},a026:function(e,t,n){"use strict";n("992c")},a6c5:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return i}));n("99af");var r=n("ff66"),o="/api/v1/certificates";function a(e,t,n){return Object(r["e"])("".concat(o,"/search?pageNum=").concat(e,"&pageSize=").concat(t),n)}function c(e){return Object(r["e"])("".concat(o),e)}function i(e){return Object(r["e"])("".concat(o,"/upload"),e)}},b85c:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");var r=n("06c5");function o(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Object(r["a"])(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,c=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(s)throw c}}}}},be17:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-container"},[e.$slots.description||e.description?n("div",{staticClass:"content-container__description"},[n("el-alert",{attrs:{title:e.description,type:"info"}}),n("br")],1):e._e(),e.$slots.header||e.header?n("div",{staticClass:"content-container__header"},[e._t("header",(function(){return[e.showBack?n("back-button",{attrs:{path:e.backPath,name:e.backName,to:e.backTo}}):e._e(),e._v(" "+e._s(e.header)+" ")]}))],2):e._e(),e.$slots.toolbar?n("div",{staticClass:"content-container__toolbar"},[e._t("toolbar")],2):e._e(),e._t("default")],2)},o=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-icon",{staticClass:"back-button",attrs:{name:"back"},nativeOn:{click:function(t){return e.jump.apply(null,arguments)}}})},c=[],i=(n("b0c0"),{name:"BackButton",props:{path:String,name:String,to:Object},methods:{jump:function(){var e=this.path,t=this.name,n=this.to;e&&this.$router.push(e),t&&this.$router.push(t),n&&this.$router.push(n)}}}),s=i,l=(n("eb9f"),n("2877")),u=Object(l["a"])(s,a,c,!1,null,null,null),m=u.exports,f={name:"LayoutContent",components:{BackButton:m},props:{header:String,description:String,backPath:String,backName:String,backTo:Object},computed:{showBack:function(e){var t=e.backPath,n=e.backName,r=e.backTo;return t||n||r}}},d=f,p=(n("a026"),Object(l["a"])(d,r,o,!1,null,null,null));t["a"]=p.exports},eb9f:function(e,t,n){"use strict";n("f574")},f574:function(e,t,n){e.exports={theme:"#5354bb"}},fb0a:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("99af");var r=n("ff66"),o="/api/v1/credentials";function a(){return Object(r["c"])("".concat(o))}}}]);
//# sourceMappingURL=chunk-72e92a56.91c0e95c.js.map