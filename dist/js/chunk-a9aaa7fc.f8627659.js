(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a9aaa7fc"],{"1c4e":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("layout-content",{attrs:{header:e.$t("commons.button.create"),"back-to":{name:"HostList"}}},[n("el-row",[n("el-col",{attrs:{span:4}},[n("br")]),n("el-col",{attrs:{span:10}},[n("div",{staticClass:"grid-content bg-purple-light"},[n("el-form",{ref:"form",attrs:{"label-position":"left",model:e.form,rules:e.rules,"label-width":"160px"}},[n("el-form-item",{attrs:{label:e.$t("commons.table.name"),prop:"name"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),n("div",[n("span",{staticClass:"input-help"},[e._v(e._s(e.$t("commons.validate.name_help")))])])],1),n("el-form-item",{attrs:{label:"IP",prop:"ip"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.ip,callback:function(t){e.$set(e.form,"ip",t)},expression:"form.ip"}})],1),n("el-form-item",{attrs:{label:e.$t("host.port"),prop:"port"}},[n("el-input-number",{attrs:{step:1,max:65535,"step-strictly":"",clearable:""},model:{value:e.form.port,callback:function(t){e.$set(e.form,"port",e._n(t))},expression:"form.port"}})],1),n("el-form-item",{attrs:{label:e.$t("host.project_auth"),prop:"project"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:""},on:{change:e.getClusters},model:{value:e.form.project,callback:function(t){e.$set(e.form,"project",t)},expression:"form.project"}},e._l(e.projectList,(function(e){return n("el-option",{key:e.id,attrs:{value:e.name,label:e.name}})})),1)],1),n("el-form-item",{attrs:{label:e.$t("host.cluster_auth"),prop:"cluster"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:""},model:{value:e.form.cluster,callback:function(t){e.$set(e.form,"cluster",t)},expression:"form.cluster"}},e._l(e.clusterList,(function(e,t){return n("el-option",{key:t,attrs:{value:e,label:e}})})),1),n("div",[n("span",{staticClass:"input-help"},[e._v(e._s(e.$t("host.cluster_auth_help")))])])],1),n("el-form-item",{attrs:{label:e.$t("credential.type"),required:""}},[n("el-radio-group",{on:{change:e.updateCredentialType},model:{value:e.credentialType,callback:function(t){e.credentialType=t},expression:"credentialType"}},[n("el-radio",{attrs:{label:"exists"}},[e._v(e._s(e.$t("host.exists_credential")))]),n("el-radio",{attrs:{label:"new"}},[e._v(e._s(e.$t("host.new_credential")))])],1)],1),"exists"===e.credentialType?n("el-form-item",{attrs:{label:e.$t("host.credential_name"),prop:"credentialId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:""},model:{value:e.form.credentialId,callback:function(t){e.$set(e.form,"credentialId",t)},expression:"form.credentialId"}},e._l(e.credentialList,(function(e){return n("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1):e._e(),"new"===e.credentialType?n("span",[n("el-form-item",{attrs:{label:e.$t("credential.name"),prop:"credential.name"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.credential.name,callback:function(t){e.$set(e.form.credential,"name",t)},expression:"form.credential.name"}})],1),n("el-form-item",{attrs:{label:e.$t("credential.username"),prop:"credential.username"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.credential.username,callback:function(t){e.$set(e.form.credential,"username",t)},expression:"form.credential.username"}})],1),n("el-form-item",{attrs:{label:e.$t("host.credential_type"),prop:"credential.type",required:""}},[n("el-radio-group",{model:{value:e.form.credential.type,callback:function(t){e.$set(e.form.credential,"type",t)},expression:"form.credential.type"}},[n("el-radio",{attrs:{label:"password"}},[e._v(e._s(e.$t("credential.password")))]),n("el-radio",{attrs:{label:"privateKey"}},[e._v(e._s(e.$t("credential.privateKey")))])],1)],1),"password"===e.form.credential.type?n("el-form-item",{attrs:{label:e.$t("credential.password"),prop:"credential.password"}},[n("el-input",{attrs:{type:"password",clearable:""},model:{value:e.form.credential.password,callback:function(t){e.$set(e.form.credential,"password",t)},expression:"form.credential.password"}})],1):e._e(),"privateKey"===e.form.credential.type?n("el-form-item",{attrs:{label:e.$t("credential.privateKey"),prop:"credential.privateKey"}},[n("el-input",{attrs:{type:"textarea",clearable:""},model:{value:e.form.credential.privateKey,callback:function(t){e.$set(e.form.credential,"privateKey",t)},expression:"form.credential.privateKey"}})],1):e._e()],1):e._e(),n("el-form-item",{staticStyle:{float:"right"}},[n("el-button",{on:{click:function(t){return e.onCancel()}}},[e._v(e._s(e.$t("commons.button.cancel")))]),n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("commons.button.create")))])],1)],1)],1)])],1)],1)},c=[],a=n("30d5"),o=(n("f5bd"),n("be17")),i=n("f253"),l=n("fb0a"),s=n("7273"),u=n("7ea2"),f=n("0792"),d={name:"HostCreate",components:{LayoutContent:o["a"]},data:function(){return{credentialType:"exists",form:{name:"",ip:"",port:22,project:"",cluster:"",credentialId:"",credential:{username:"",password:"",name:"",type:"password",privateKey:""}},rules:{name:[f["a"].NameRule],ip:[f["a"].RequiredRule],port:[f["a"].NumberRule],project:[f["a"].RequiredRule],credentialId:[f["a"].RequiredRule],credential:{username:[f["a"].RequiredRule],password:[f["a"].RequiredRule],name:[f["a"].RequiredRule],privateKey:[f["a"].RequiredRule]}},credentialList:[],projectList:[],clusterList:[]}},methods:{onSubmit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return!1;Object(i["a"])(e.form).then((function(){e.$message({type:"success",message:e.$t("commons.msg.create_success")}),e.$router.push({name:"HostList"})}))}))},updateCredentialType:function(){this.form.credentialId="exists"===this.credentialType?this.form.credentialId:""},getCredentials:function(){var e=this;Object(l["d"])().then((function(t){e.credentialList=t.items}))},getProjects:function(){var e=this;Object(s["a"])().then((function(t){e.projectList=t.items}))},getClusters:function(){var e=this;this.clusterList=[],this.form.cluster="",""!==this.form.project&&this.form.project&&Object(u["g"])(this.form.project).then((function(t){e.clusterList=[];var n,r=Object(a["a"])(t);try{for(r.s();!(n=r.n()).done;){var c=n.value;"plan"!==c.provider&&e.clusterList.push(c.name)}}catch(o){r.e(o)}finally{r.f()}}))},onCancel:function(){this.$router.push({name:"HostList"})}},created:function(){this.getCredentials(),this.getProjects()}},p=d,m=n("5d22"),b=Object(m["a"])(p,r,c,!1,null,"df617390",null);t["default"]=b.exports},"7ea2":function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"g",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"q",(function(){return u})),n.d(t,"d",(function(){return f})),n.d(t,"l",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return m})),n.d(t,"m",(function(){return b})),n.d(t,"a",(function(){return h})),n.d(t,"n",(function(){return v})),n.d(t,"r",(function(){return j})),n.d(t,"i",(function(){return y})),n.d(t,"h",(function(){return _})),n.d(t,"j",(function(){return g})),n.d(t,"o",(function(){return $})),n.d(t,"p",(function(){return O})),n.d(t,"k",(function(){return w}));n("a5c9"),n("2769"),n("0756");var r=n("ff66"),c="/api/v1/clusters",a="/api/v1/clusters/logger/{cluster_name}",o="/api/v1/clusters/provisioner/log/{cluster_name}/{log_id}";function i(e){return Object(r["c"])("".concat(c,"/").concat(e))}function l(e){return Object(r["c"])("".concat(c,"/name/").concat(e))}function s(e){return Object(r["c"])("".concat(c,"/existence/").concat(e))}function u(e,t,n){return Object(r["e"])("".concat(c,"/search?pageNum=").concat(e,"&pageSize=").concat(t),n)}function f(e){return Object(r["e"])("".concat(c),e)}function d(e){return Object(r["c"])("".concat(c,"/health/").concat(e))}function p(e){return Object(r["e"])("".concat(c,"/recover/").concat(e),{})}function m(e,t){return Object(r["b"])("".concat(c,"/").concat(e,"?force=").concat(t))}function b(e){return Object(r["e"])("".concat(c,"/import/"),e)}function h(){return Object(r["c"])("".concat(c))}function v(e){return Object(r["e"])("".concat(c,"/init/").concat(e,"/"),{})}function j(e,t){var n={clusterName:e,version:t};return Object(r["e"])("".concat(c,"/upgrade/"),n)}function y(e){return Object(r["c"])("".concat(c,"/status/").concat(e))}function _(e){return Object(r["c"])(a.replace("{cluster_name}",e))}function g(e,t){return Object(r["c"])(o.replace("{cluster_name}",e).replace("{log_id}",t))}function $(e){window.open("/ui/#/logger?clusterName=".concat(e),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function O(e,t){window.open("/ui/#/logger?clusterName=".concat(e,"&logId=").concat(t),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function w(e){return Object(r["c"])("".concat(c,"/secret/").concat(e))}},f253:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return s}));n("a5c9");var r=n("ff66"),c="/api/v1/hosts";function a(e){return Object(r["e"])(c,e)}function o(e){return Object(r["b"])("".concat(c,"/").concat(e))}function i(e,t,n){return Object(r["e"])("".concat(c,"/search?pageNum=").concat(e,"&pageSize=").concat(t),n)}function l(e){var t="".concat(c,"/sync/");return Object(r["e"])(t,e)}function s(e){var t="".concat(c,"/upload");return Object(r["e"])(t,e)}},fb0a:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u}));n("a5c9");var r=n("ff66"),c="/api/v1/credentials";function a(){return Object(r["c"])("".concat(c))}function o(e,t,n){return Object(r["e"])("".concat(c,"/search?pageNum=").concat(e,"&pageSize=").concat(t),n)}function i(e){return Object(r["e"])(c,e)}function l(e,t){return Object(r["d"])("".concat(c,"/").concat(e),t)}function s(e){return Object(r["b"])("".concat(c,"/").concat(e))}function u(){return Object(r["c"])("".concat(c))}}}]);
//# sourceMappingURL=chunk-a9aaa7fc.f8627659.js.map