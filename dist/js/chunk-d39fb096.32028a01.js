(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d39fb096"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"1cdcc":function(e,t,s){"use strict";s("ea4d")},"25f0":function(e,t,s){"use strict";var r=s("6eeb"),i=s("825a"),a=s("577e"),n=s("d039"),o=s("ad6d"),c="toString",l=RegExp.prototype,u=l[c],_=n((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),g=u.name!=c;(_||g)&&r(RegExp.prototype,c,(function(){var e=i(this),t=a(e.source),s=e.flags,r=a(void 0===s&&e instanceof RegExp&&!("flags"in l)?o.call(e):s);return"/"+t+"/"+r}),{unsafe:!0})},"3d5f":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return i}));s("ac1f"),s("5319"),s("4d63"),s("25f0");function r(e){for(var t in e)if(-1!==t.indexOf("_")){var s=t.replace(new RegExp("__","g"),"-").replace(new RegExp("_","g"),".");e[s]=e[t],delete e[t]}return e}function i(e){for(var t in e)if(-1!==t.indexOf("-")||-1!==t.indexOf(".")){var s=t.replace(new RegExp("-","g"),"__").replace(/\./g,"_");e[s]=e[t],delete e[t]}return e}},4379:function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return o}));s("ac1f"),s("5319");var r=s("ff66"),i="/api/v1/clusters/istio/{operation}/{cluster_name}";function a(e){return Object(r["c"])(i.replace("/{operation}","").replace("{cluster_name}",e))}function n(e,t){return Object(r["e"])(i.replace("{operation}","enable").replace("{cluster_name}",e),t)}function o(e,t){return Object(r["e"])(i.replace("{operation}","disable").replace("{cluster_name}",e),t)}},"4d63":function(e,t,s){var r=s("83ab"),i=s("da84"),a=s("94ca"),n=s("7156"),o=s("9112"),c=s("9bf2").f,l=s("241c").f,u=s("44e7"),_=s("577e"),g=s("ad6d"),f=s("9f7f"),p=s("6eeb"),m=s("d039"),b=s("5135"),d=s("69f3").enforce,y=s("2626"),v=s("b622"),h=s("fce3"),w=s("107c"),C=v("match"),x=i.RegExp,O=x.prototype,$=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,k=/a/g,S=/a/g,j=new x(k)!==k,q=f.UNSUPPORTED_Y,R=r&&(!j||q||h||w||m((function(){return S[C]=!1,x(k)!=k||x(S)==S||"/a/i"!=x(k,"i")}))),N=function(e){for(var t,s=e.length,r=0,i="",a=!1;r<=s;r++)t=e.charAt(r),"\\"!==t?a||"."!==t?("["===t?a=!0:"]"===t&&(a=!1),i+=t):i+="[\\s\\S]":i+=t+e.charAt(++r);return i},E=function(e){for(var t,s=e.length,r=0,i="",a=[],n={},o=!1,c=!1,l=0,u="";r<=s;r++){if(t=e.charAt(r),"\\"===t)t+=e.charAt(++r);else if("]"===t)o=!1;else if(!o)switch(!0){case"["===t:o=!0;break;case"("===t:$.test(e.slice(r+1))&&(r+=2,c=!0),i+=t,l++;continue;case">"===t&&c:if(""===u||b(n,u))throw new SyntaxError("Invalid capture group name");n[u]=!0,a.push([u,l]),c=!1,u="";continue}c?u+=t:i+=t}return[i,a]};if(a("RegExp",R)){for(var A=function(e,t){var s,r,i,a,c,l,f=this instanceof A,p=u(e),m=void 0===t,b=[],y=e;if(!f&&p&&m&&e.constructor===A)return e;if((p||e instanceof A)&&(e=e.source,m&&(t="flags"in y?y.flags:g.call(y))),e=void 0===e?"":_(e),t=void 0===t?"":_(t),y=e,h&&"dotAll"in k&&(r=!!t&&t.indexOf("s")>-1,r&&(t=t.replace(/s/g,""))),s=t,q&&"sticky"in k&&(i=!!t&&t.indexOf("y")>-1,i&&(t=t.replace(/y/g,""))),w&&(a=E(e),e=a[0],b=a[1]),c=n(x(e,t),f?this:O,A),(r||i||b.length)&&(l=d(c),r&&(l.dotAll=!0,l.raw=A(N(e),s)),i&&(l.sticky=!0),b.length&&(l.groups=b)),e!==y)try{o(c,"source",""===y?"(?:)":y)}catch(v){}return c},D=function(e){e in A||c(A,e,{configurable:!0,get:function(){return x[e]},set:function(t){x[e]=t}})},I=l(x),L=0;I.length>L;)D(I[L++]);O.constructor=A,A.prototype=O,p(i,"RegExp",A)}y("RegExp")},"7ea2":function(e,t,s){"use strict";s.d(t,"e",(function(){return o})),s.d(t,"f",(function(){return c})),s.d(t,"a",(function(){return l})),s.d(t,"p",(function(){return u})),s.d(t,"c",(function(){return _})),s.d(t,"k",(function(){return g})),s.d(t,"b",(function(){return f})),s.d(t,"d",(function(){return p})),s.d(t,"l",(function(){return m})),s.d(t,"m",(function(){return b})),s.d(t,"q",(function(){return d})),s.d(t,"h",(function(){return y})),s.d(t,"g",(function(){return v})),s.d(t,"i",(function(){return h})),s.d(t,"n",(function(){return w})),s.d(t,"o",(function(){return C})),s.d(t,"j",(function(){return x}));s("99af"),s("ac1f"),s("5319");var r=s("ff66"),i="/api/v1/clusters",a="/api/v1/clusters/logger/{cluster_name}",n="/api/v1/clusters/provisioner/log/{cluster_name}/{log_id}";function o(e){return Object(r["c"])("".concat(i,"/").concat(e))}function c(e){return Object(r["c"])("".concat(i,"/name/").concat(e))}function l(e){return Object(r["c"])("".concat(i,"/existence/").concat(e))}function u(e,t,s){return Object(r["e"])("".concat(i,"/search?pageNum=").concat(e,"&pageSize=").concat(t),s)}function _(e){return Object(r["e"])("".concat(i),e)}function g(e){return Object(r["c"])("".concat(i,"/health/").concat(e))}function f(e){return Object(r["e"])("".concat(i,"/recover/").concat(e),{})}function p(e,t){return Object(r["b"])("".concat(i,"/").concat(e,"?force=").concat(t))}function m(e){return Object(r["e"])("".concat(i,"/import/"),e)}function b(e){return Object(r["e"])("".concat(i,"/init/").concat(e,"/"),{})}function d(e,t){var s={clusterName:e,version:t};return Object(r["e"])("".concat(i,"/upgrade/"),s)}function y(e){return Object(r["c"])("".concat(i,"/status/").concat(e))}function v(e){return Object(r["c"])(a.replace("{cluster_name}",e))}function h(e,t){return Object(r["c"])(n.replace("{cluster_name}",e).replace("{log_id}",t))}function w(e){window.open("/ui/#/logger?clusterName=".concat(e),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function C(e,t){window.open("/ui/#/logger?clusterName=".concat(e,"&logId=").concat(t),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function x(e){return Object(r["c"])("".concat(i,"/secret/").concat(e))}},"841c":function(e,t,s){"use strict";var r=s("d784"),i=s("825a"),a=s("1d80"),n=s("129f"),o=s("577e"),c=s("14c3");r("search",(function(e,t,s){return[function(t){var s=a(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,s):new RegExp(t)[e](o(s))},function(e){var r=i(this),a=o(e),l=s(t,r,a);if(l.done)return l.value;var u=r.lastIndex;n(u,0)||(r.lastIndex=0);var _=c(r,a);return n(r.lastIndex,u)||(r.lastIndex=u),null===_?-1:_.index}]}))},"992c":function(e,t,s){e.exports={theme:"#5354bb"}},a026:function(e,t,s){"use strict";s("992c")},b21e:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));s("caad"),s("2532");var r=s("4360"),i=function(e){var t=r["a"].getters&&r["a"].getters.roles;return t.some((function(t){return e.includes(t)}))}},b85c:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));s("a4d3"),s("e01a"),s("d3b7"),s("d28b"),s("3ca3"),s("ddb0");var r=s("06c5");function i(e,t){var s="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!s){if(Array.isArray(e)||(s=Object(r["a"])(e))||t&&e&&"number"===typeof e.length){s&&(e=s);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,c=!1;return{s:function(){s=s.call(e)},n:function(){var e=s.next();return o=e.done,e},e:function(e){c=!0,n=e},f:function(){try{o||null==s["return"]||s["return"]()}finally{if(c)throw n}}}}},be17:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content-container"},[e.$slots.description||e.description?s("div",{staticClass:"content-container__description"},[s("el-alert",{attrs:{title:e.description,type:"info"}}),s("br")],1):e._e(),e.$slots.header||e.header?s("div",{staticClass:"content-container__header"},[e._t("header",(function(){return[e.showBack?s("back-button",{attrs:{path:e.backPath,name:e.backName,to:e.backTo}}):e._e(),e._v(" "+e._s(e.header)+" ")]}))],2):e._e(),e.$slots.toolbar?s("div",{staticClass:"content-container__toolbar"},[e._t("toolbar")],2):e._e(),e._t("default")],2)},i=[],a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-icon",{staticClass:"back-button",attrs:{name:"back"},nativeOn:{click:function(t){return e.jump.apply(null,arguments)}}})},n=[],o=(s("b0c0"),{name:"BackButton",props:{path:String,name:String,to:Object},methods:{jump:function(){var e=this.path,t=this.name,s=this.to;e&&this.$router.push(e),t&&this.$router.push(t),s&&this.$router.push(s)}}}),c=o,l=(s("eb9f"),s("2877")),u=Object(l["a"])(c,a,n,!1,null,null,null),_=u.exports,g={name:"LayoutContent",components:{BackButton:_},props:{header:String,description:String,backPath:String,backName:String,backTo:Object},computed:{showBack:function(e){var t=e.backPath,s=e.backName,r=e.backTo;return t||s||r}}},f=g,p=(s("a026"),Object(l["a"])(f,r,i,!1,null,null,null));t["a"]=p.exports},e84f:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("layout-content",{attrs:{header:"服务网格"}},[s("span",[e._v("集群名称：")]),s("el-select",{staticStyle:{"margin-bottom":"24px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.cluster,callback:function(t){e.cluster=t},expression:"cluster"}},e._l(e.options,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),"amd64"===e.arch?s("istio",{attrs:{name:e.currCluster.name}}):e._e()],1)},i=[],a=(s("ac1f"),s("841c"),s("4de4"),s("159b"),s("b0c0"),s("be17")),n=s("7ea2"),o=s("b21e"),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("layout-content",[s("div",[s("el-collapse",{staticStyle:{"margin-bottom":"24px"},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[s("el-collapse-item",{attrs:{title:"Istio-Pilot",name:"1"}},[s("el-form",{ref:"pilotCfg",attrs:{model:e.pilotCfg,"label-width":"200px"}},[e.pilotCfg.cluster_istio.message?s("el-form-item",[s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.pilotCfg.cluster_istio.message,placement:"right-end"}},[s("el-button",{staticStyle:{color:"red"},attrs:{icon:"el-icon-error",type:"text"}},[e._v(e._s(e.$t("cluster.detail.istio.err_title")))])],1)],1):e._e(),s("el-row",{attrs:{type:"flex"}},[s("el-form-item",{attrs:{label:e.$t("cluster.detail.istio.cpu_request"),prop:"vars.pilot_resources_requests_cpu",rules:e.numberRules}},[s("el-input-number",{staticStyle:{width:"100%"},attrs:{step:1,"step-strictly":""},model:{value:e.pilotCfg.vars["pilot_resources_requests_cpu"],callback:function(t){e.$set(e.pilotCfg.vars,"pilot_resources_requests_cpu",t)},expression:"pilotCfg.vars['pilot_resources_requests_cpu']"}})],1),s("el-form-item",{attrs:{label:e.$t("cluster.detail.istio.memory_request"),prop:"vars.pilot_resources_requests_memory",rules:e.numberRules}},[s("el-input-number",{staticStyle:{width:"100%"},attrs:{step:1,"step-strictly":""},model:{value:e.pilotCfg.vars["pilot_resources_requests_memory"],callback:function(t){e.$set(e.pilotCfg.vars,"pilot_resources_requests_memory",t)},expression:"pilotCfg.vars['pilot_resources_requests_memory']"}})],1)],1),s("el-row",{attrs:{type:"flex"}},[s("el-form-item",{attrs:{label:e.$t("cluster.detail.istio.cpu_limit"),prop:"vars.pilot_resources_limits_cpu",rules:e.numberRules}},[s("el-input-number",{staticStyle:{width:"100%"},attrs:{step:1,"step-strictly":""},model:{value:e.pilotCfg.vars.pilot_resources_limits_cpu,callback:function(t){e.$set(e.pilotCfg.vars,"pilot_resources_limits_cpu",e._n(t))},expression:"pilotCfg.vars.pilot_resources_limits_cpu"}})],1),s("el-form-item",{attrs:{label:e.$t("cluster.detail.istio.memory_limit"),prop:"vars.pilot_resources_limits_memory",rules:e.numberRules}},[s("el-input-number",{staticStyle:{width:"100%"},attrs:{step:1,"step-strictly":""},model:{value:e.pilotCfg.vars["pilot_resources_limits_memory"],callback:function(t){e.$set(e.pilotCfg.vars,"pilot_resources_limits_memory",t)},expression:"pilotCfg.vars['pilot_resources_limits_memory']"}})],1)],1),s("el-row",{attrs:{type:"flex"}},[s("el-form-item",{attrs:{label:e.$t("cluster.detail.istio.trace"),prop:"vars.pilot_traceSampling",rules:e.numberRules}},[s("el-input-number",{staticStyle:{width:"100%"},attrs:{step:1,"step-strictly":""},model:{value:e.pilotCfg.vars["pilot_traceSampling"],callback:function(t){e.$set(e.pilotCfg.vars,"pilot_traceSampling",t)},expression:"pilotCfg.vars['pilot_traceSampling']"}})],1)],1)],1)],1),s("el-collapse-item",{attrs:{title:"Istio-Ingress",name:"2"}},[s("el-switch",{model:{value:e.ingressCfg.enable,callback:function(t){e.$set(e.ingressCfg,"enable",t)},expression:"ingressCfg.enable"}}),e.ingressCfg.enable?s("div",[s("el-form",{ref:"ingressCfg",attrs:{model:e.ingressCfg,"label-width":"200px"}},[e.ingressCfg.cluster_istio.message?s("el-form-item",[s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.ingressCfg.cluster_istio.message,placement:"right-end"}},[s("el-button",{staticStyle:{color:"red"},attrs:{icon:"el-icon-error",type:"text"}},[e._v(e._s(e.$t("cluster.detail.istio.err_title")))])],1)],1):e._e(),s("el-row",{attrs:{type:"flex"}},[s("el-form-item",{attrs:{label:e.$t("cluster.detail.istio.cpu_request"),prop:"vars.gateways_istio__ingressgateway_resources_requests_cpu",rules:e.numberRules}},[s("el-input-number",{staticStyle:{width:"100%"},attrs:{step:1,"step-strictly":""},model:{value:e.ingressCfg.vars["gateways_istio__ingressgateway_resources_requests_cpu"],callback:function(t){e.$set(e.ingressCfg.vars,"gateways_istio__ingressgateway_resources_requests_cpu",t)},expression:"ingressCfg.vars['gateways_istio__ingressgateway_resources_requests_cpu']"}})],1),s("el-form-item",{attrs:{label:e.$t("cluster.detail.istio.memory_request"),prop:"vars.gateways_istio__ingressgateway_resources_requests_memory",rules:e.numberRules}},[s("el-input-number",{staticStyle:{width:"100%"},attrs:{step:1,"step-strictly":""},model:{value:e.ingressCfg.vars["gateways_istio__ingressgateway_resources_requests_memory"],callback:function(t){e.$set(e.ingressCfg.vars,"gateways_istio__ingressgateway_resources_requests_memory",t)},expression:"ingressCfg.vars['gateways_istio__ingressgateway_resources_requests_memory']"}})],1)],1),s("el-row",{attrs:{type:"flex"}},[s("el-form-item",{attrs:{label:e.$t("cluster.detail.istio.cpu_limit"),prop:"vars.gateways_istio__ingressgateway_resources_limits_cpu",rules:e.numberRules}},[s("el-input-number",{staticStyle:{width:"100%"},attrs:{step:1,"step-strictly":""},model:{value:e.ingressCfg.vars["gateways_istio__ingressgateway_resources_limits_cpu"],callback:function(t){e.$set(e.ingressCfg.vars,"gateways_istio__ingressgateway_resources_limits_cpu",t)},expression:"ingressCfg.vars['gateways_istio__ingressgateway_resources_limits_cpu']"}})],1),s("el-form-item",{attrs:{label:e.$t("cluster.detail.istio.memory_limit"),prop:"vars.gateways_istio__ingressgateway_resources_limits_memory",rules:e.numberRules}},[s("el-input-number",{staticStyle:{width:"100%"},attrs:{step:1,"step-strictly":""},model:{value:e.ingressCfg.vars["gateways_istio__ingressgateway_resources_limits_memory"],callback:function(t){e.$set(e.ingressCfg.vars,"gateways_istio__ingressgateway_resources_limits_memory",t)},expression:"ingressCfg.vars['gateways_istio__ingressgateway_resources_limits_memory']"}})],1)],1),s("el-form-item",{attrs:{label:e.$t("cluster.detail.istio.gateways_type"),prop:"vars.gateways_istio__ingressgateway_type",rules:e.requiredRules}},[s("el-select",{staticStyle:{width:"206px"},attrs:{clearable:""},model:{value:e.ingressCfg.vars["gateways_istio__ingressgateway_type"],callback:function(t){e.$set(e.ingressCfg.vars,"gateways_istio__ingressgateway_type",t)},expression:"ingressCfg.vars['gateways_istio__ingressgateway_type']"}},[s("el-option",{attrs:{value:"NodePort"}},[e._v("NodePort")]),s("el-option",{attrs:{value:"LoadBalancer"}},[e._v("LoadBalancer")])],1)],1)],1)],1):e._e()],1),s("el-collapse-item",{attrs:{title:"Istio-Egress",name:"3"}},[s("el-switch",{model:{value:e.egressCfg.enable,callback:function(t){e.$set(e.egressCfg,"enable",t)},expression:"egressCfg.enable"}}),e.egressCfg.enable?s("div",[s("el-form",{ref:"egressCfg",attrs:{model:e.egressCfg,"label-width":"200px"}},[e.egressCfg.cluster_istio.message?s("el-form-item",[s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.egressCfg.cluster_istio.message,placement:"right-end"}},[s("el-button",{staticStyle:{color:"red"},attrs:{icon:"el-icon-error",type:"text"}},[e._v(e._s(e.$t("cluster.detail.istio.err_title")))])],1)],1):e._e(),s("el-row",{attrs:{type:"flex"}},[s("el-form-item",{attrs:{label:e.$t("cluster.detail.istio.cpu_limit"),prop:"vars.gateways_istio__egressgateway_resources_requests_cpu",rules:e.numberRules}},[s("el-input-number",{staticStyle:{width:"100%"},attrs:{step:1,"step-strictly":""},model:{value:e.egressCfg.vars["gateways_istio__egressgateway_resources_requests_cpu"],callback:function(t){e.$set(e.egressCfg.vars,"gateways_istio__egressgateway_resources_requests_cpu",t)},expression:"egressCfg.vars['gateways_istio__egressgateway_resources_requests_cpu']"}})],1),s("el-form-item",{attrs:{label:e.$t("cluster.detail.istio.memory_request"),prop:"vars.gateways_istio__egressgateway_resources_requests_memory",rules:e.numberRules}},[s("el-input-number",{staticStyle:{width:"100%"},attrs:{step:1,"step-strictly":""},model:{value:e.egressCfg.vars["gateways_istio__egressgateway_resources_requests_memory"],callback:function(t){e.$set(e.egressCfg.vars,"gateways_istio__egressgateway_resources_requests_memory",t)},expression:"egressCfg.vars['gateways_istio__egressgateway_resources_requests_memory']"}})],1)],1),s("el-row",{attrs:{type:"flex"}},[s("el-form-item",{attrs:{label:e.$t("cluster.detail.istio.cpu_limit"),prop:"vars.gateways_istio__egressgateway_resources_limits_cpu",rules:e.numberRules}},[s("el-input-number",{staticStyle:{width:"100%"},attrs:{step:1,"step-strictly":""},model:{value:e.egressCfg.vars["gateways_istio__egressgateway_resources_limits_cpu"],callback:function(t){e.$set(e.egressCfg.vars,"gateways_istio__egressgateway_resources_limits_cpu",t)},expression:"egressCfg.vars['gateways_istio__egressgateway_resources_limits_cpu']"}})],1),s("el-form-item",{attrs:{label:e.$t("cluster.detail.istio.memory_request"),prop:"vars.gateways_istio__egressgateway_resources_limits_memory",rules:e.numberRules}},[s("el-input-number",{staticStyle:{width:"100%"},attrs:{step:1,"step-strictly":""},model:{value:e.egressCfg.vars["gateways_istio__egressgateway_resources_limits_memory"],callback:function(t){e.$set(e.egressCfg.vars,"gateways_istio__egressgateway_resources_limits_memory",t)},expression:"egressCfg.vars['gateways_istio__egressgateway_resources_limits_memory']"}})],1)],1)],1)],1):e._e()],1)],1),"Running"!==e.baseCfg.cluster_istio.status?s("div",[s("el-button",{attrs:{disabled:e.submitLoading,size:"mini"},on:{click:function(t){return e.onSubmit("start")}}},[e._v(e._s(e.$t("commons.button.enable")))])],1):e._e(),"Running"===e.baseCfg.cluster_istio.status?s("div",[s("el-button",{attrs:{disabled:e.submitLoading,size:"mini"},on:{click:function(t){return e.onSubmit("restart")}}},[e._v(e._s(e.$t("cluster.detail.istio.resave")))]),s("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.onDisable()}}},[e._v(e._s(e.$t("commons.button.disable")))])],1):e._e(),s("el-dialog",{attrs:{title:e.$t("cluster.detail.istio.disable_istio"),width:"30%",visible:e.dialogShutupVisible},on:{"update:visible":function(t){e.dialogShutupVisible=t}}},[s("span",[e._v(e._s(e.$t("cluster.detail.istio.ensure_disable_istio")))]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogShutupVisible=!1}}},[e._v(e._s(e.$t("commons.button.cancel")))]),s("el-button",{attrs:{disabled:e.submitLoading},on:{click:function(t){return e.submitDisable()}}},[e._v(e._s(e.$t("commons.button.ok")))])],1)])],1)])},l=[],u=s("b85c"),_=s("4379"),g=s("3d5f"),f=s("0792"),p={name:"ClusterIstio",components:{LayoutContent:a["a"]},props:["name"],data:function(){return{submitLoading:!1,clusterName:"",activeNames:["1","2","3"],accordionLoading:!1,baseCfg:{cluster_istio:{},enable:!1,operation:"",vars:{}},pilotCfg:{cluster_istio:{},enable:!1,operation:"",vars:{}},ingressCfg:{cluster_istio:{},enable:!1,operation:"",vars:{}},egressCfg:{cluster_istio:{},enable:!1,operation:"",vars:{}},numberRules:[f["a"].NumberRule],requiredRules:[f["a"].RequiredRule],dialogShutupVisible:!1}},methods:{search:function(){var e=this;this.loading=!0,Object(_["c"])(this.clusterName).then((function(t){var s,r=Object(u["a"])(t);try{for(r.s();!(s=r.n()).done;){var i=s.value;switch(i.cluster_istio.name){case"base":"Waiting"!==i.cluster_istio.status?e.baseCfg.vars=Object(g["a"])(JSON.parse(i.cluster_istio.vars)):e.setDefaultBaseCfg(),e.baseCfg.enable="Waiting"!==i.cluster_istio.status,e.baseCfg.cluster_istio=i.cluster_istio;break;case"pilot":"Waiting"!==i.cluster_istio.status?e.pilotCfg.vars=Object(g["a"])(JSON.parse(i.cluster_istio.vars)):e.setDefaultPilotCfg(),e.pilotCfg.enable="Waiting"!==i.cluster_istio.status,e.pilotCfg.cluster_istio=i.cluster_istio;break;case"ingress":"Waiting"!==i.cluster_istio.status?e.ingressCfg.vars=Object(g["a"])(JSON.parse(i.cluster_istio.vars)):e.setDefaultIngressCfg(),e.ingressCfg.enable="Waiting"!==i.cluster_istio.status&&"Terminated"!==i.cluster_istio.status,e.ingressCfg.cluster_istio=i.cluster_istio;break;case"egress":"Waiting"!==i.cluster_istio.status?e.egressCfg.vars=Object(g["a"])(JSON.parse(i.cluster_istio.vars)):e.setDefaultEgressCfg(),e.egressCfg.enable="Waiting"!==i.cluster_istio.status&&"Terminated"!==i.cluster_istio.status,e.egressCfg.cluster_istio=i.cluster_istio;break}e.loading=!1}}catch(a){r.e(a)}finally{r.f()}}))},onSubmit:function(e){var t=this;this.submitLoading=!0,Object(g["b"])(this.pilotCfg.vars),Object(g["b"])(this.ingressCfg.vars),Object(g["b"])(this.egressCfg.vars);var s=[];"start"===e&&(this.baseCfg.enable=!0,this.getOperation(s,this.baseCfg)),this.pilotCfg.enable=!0,this.getOperation(s,this.pilotCfg),this.getOperation(s,this.ingressCfg),this.getOperation(s,this.egressCfg),Object(_["b"])(this.clusterName,s).then((function(){"start"===e?t.$message({type:"success",message:t.$t("commons.msg.enable_success")}):t.$message({type:"success",message:t.$t("commons.msg.re_enable_success")}),t.search(),t.submitLoading=!1})).catch((function(){t.submitLoading=!1}))},onDisable:function(){this.dialogShutupVisible=!0},submitDisable:function(){var e=this;this.submitLoading=!0;var t=[];this.disAble(t,this.baseCfg),this.disAble(t,this.pilotCfg),this.disAble(t,this.ingressCfg),this.disAble(t,this.egressCfg),Object(_["a"])(this.clusterName,t).then((function(){e.$message({type:"success",message:e.$t("commons.msg.disable_success")}),e.submitLoading=!1,e.dialogShutupVisible=!1,e.search()})).catch((function(){e.submitLoading=!1}))},disAble:function(e,t){"Waiting"!==t.cluster_istio.status&&(t.operation="disable",t.enable=!1,e.push(t))},getOperation:function(e,t){t.enable?(t.operation="enable",e.push(t)):t.enable||"Waiting"===t.cluster_istio.status||(t.operation="disable",e.push(t))},setDefaultBaseCfg:function(){this.baseCfg.vars={"global.istiod.enableAnalysis":!0}},setDefaultPilotCfg:function(){this.pilotCfg.vars={pilot_resources_requests_cpu:500,pilot_resources_requests_memory:2048,pilot_resources_limits_cpu:500,pilot_resources_limits_memory:2048,pilot_traceSampling:1}},setDefaultIngressCfg:function(){this.ingressCfg.vars={gateways_istio__ingressgateway_type:"NodePort",gateways_istio__ingressgateway_resources_requests_cpu:100,gateways_istio__ingressgateway_resources_requests_memory:128,gateways_istio__ingressgateway_resources_limits_cpu:2e3,gateways_istio__ingressgateway_resources_limits_memory:1024}},setDefaultEgressCfg:function(){this.egressCfg.vars={gateways_istio__egressgateway_resources_requests_cpu:100,gateways_istio__egressgateway_resources_requests_memory:128,gateways_istio__egressgateway_resources_limits_cpu:2e3,gateways_istio__egressgateway_resources_limits_memory:1024}}},created:function(){this.clusterName=this.name,this.search()}},m=p,b=s("2877"),d=Object(b["a"])(m,c,l,!1,null,null,null),y=d.exports,v={name:"serviceMesh",components:{LayoutContent:a["a"],istio:y},data:function(){return{isAdmin:Object(o["a"])("ADMIN"),paginationConfig:{currentPage:1,pageSize:1e4,total:0},cluster:"",options:[],arch:""}},mounted:function(){this.search()},watch:{cluster:function(){this.getDetail()}},computed:{currCluster:function(){var e=this,t=this.options.filter((function(t){return t.value===e.cluster}));return t[0]||[]}},methods:{search:function(e){var t=this;this.loading=!0;var s=this.paginationConfig,r=s.currentPage,i=s.pageSize;Object(n["p"])(r,i,e).then((function(e){t.loading=!1,t.options=e.items,t.options.forEach((function(e){e.value=e.label=e.name})),t.cluster=t.options[0].value}))},getDetail:function(){var e=this;this.loading=!0,Object(n["e"])(this.currCluster.name).then((function(t){t.spec.architectures&&(e.arch=t.spec.architectures,e.loading=!1)})).catch((function(){e.loading=!1}))}}},h=v,w=(s("1cdcc"),Object(b["a"])(h,r,i,!1,null,"037ce02c",null));t["default"]=w.exports},ea4d:function(e,t,s){},eb9f:function(e,t,s){"use strict";s("f574")},f574:function(e,t,s){e.exports={theme:"#5354bb"}}}]);
//# sourceMappingURL=chunk-d39fb096.32028a01.js.map