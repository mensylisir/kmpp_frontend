(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c0820a7"],{2429:function(e,r,a){"use strict";a.d(r,"j",(function(){return p})),a.d(r,"b",(function(){return v})),a.d(r,"l",(function(){return f})),a.d(r,"f",(function(){return d})),a.d(r,"a",(function(){return _})),a.d(r,"i",(function(){return b})),a.d(r,"k",(function(){return h})),a.d(r,"d",(function(){return g})),a.d(r,"h",(function(){return k})),a.d(r,"e",(function(){return $})),a.d(r,"c",(function(){return y})),a.d(r,"g",(function(){return x}));a("2769"),a("0756");var t=a("ff66"),s="/proxy/kubernetes/{cluster_name}/{resource_url}",l=10,o="api/v1/persistentvolumes",n="apis/storage.k8s.io/v1/storageclasses",c="api/v1/persistentvolumes/{name}",i="apis/storage.k8s.io/v1/storageclasses/{name}",u="/api/v1/clusters/provisioner/{cluster_name}",m="api/v1/namespaces/{namespace}/secrets";function p(e){return Object(t["c"])(u.replace("{cluster_name}",e))}function v(e,r){return Object(t["e"])(u.replace("{cluster_name}",e),r)}function f(e,r){var a="/api/v1/clusters/provisioner/sync/{cluster_name}",s=a.replace("{cluster_name}",e);return Object(t["e"])(s,r)}function d(e,r){var a="/api/v1/clusters/provisioner/delete/{cluster_name}",s=a.replace("{cluster_name}",e);return Object(t["e"])(s,r)}function _(e,r){var a=s.replace("{cluster_name}",e).replace("{resource_url}",o);return Object(t["e"])(a,r)}function b(e,r){var a=s.replace("{cluster_name}",e).replace("{resource_url}",o);return a+="?limit="+l,void 0!==r&&null!==r&&(a+="&continue="+r),Object(t["c"])(a)}function h(e,r,a){var o=s.replace("{cluster_name}",e).replace("{resource_url}",n);return a||(o+="?limit="+l),void 0!==r&&null!==r&&(o+="&continue="+r),Object(t["c"])(o)}function g(e,r){var a=s.replace("{cluster_name}",e).replace("{resource_url}",n);return Object(t["e"])(a,r)}function k(e,r){var a=s.replace("{cluster_name}",e).replace("{resource_url}",i).replace("{name}",r);return Object(t["b"])(a)}function $(e,r){var a=s.replace("{cluster_name}",e).replace("{resource_url}",c).replace("{name}",r);return Object(t["b"])(a)}function y(e,r,a){var l=s.replace("{cluster_name}",e).replace("{resource_url}",m.replace("{namespace}",r));return Object(t["e"])(l,a)}function x(e,r,a){var l=s.replace("{cluster_name}",e).replace("{resource_url}",m.replace("{namespace}",r)+"/"+a);return Object(t["b"])(l)}},"52f4":function(e,r,a){"use strict";a.r(r);var t=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("layout-content",[a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:4}},[a("br")]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form",{ref:"form",attrs:{"label-position":"left",model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:e.$t("commons.table.type")}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},on:{change:function(r){return e.changeSelection()}},model:{value:e.createType,callback:function(r){e.createType=r},expression:"createType"}},[a("el-option",{attrs:{value:"nfs",label:"nfs"}},[e._v("nfs")]),a("el-option",{attrs:{value:"external-ceph",label:"external-ceph"}},[e._v("external-ceph")]),a("el-option",{attrs:{value:"rook-ceph",label:"rook-ceph"}},[e._v("rook-ceph")]),a("el-option",{attrs:{value:"cinder",label:"cinder"}},[e._v("cinder")]),a("el-option",{attrs:{value:"vsphere",label:"vsphere"}},[e._v("vsphere")]),a("el-option",{attrs:{value:"glusterfs",label:"glusterfs"}},[e._v("glusterfs")]),a("el-option",{attrs:{value:"oceanstor",label:"oceanstor"}},[e._v("oceanstor")])],1)],1),"nfs"===e.createType?a("div",[a("el-form-item",{attrs:{label:e.$t("commons.table.name"),prop:"name",rules:e.nameRules}},[a("el-input",{attrs:{placeholder:e.$t("commons.validate.common_name_help")},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"Version",prop:"vars.storage_nfs_server_version",rules:e.requiredRules}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.form.vars["storage_nfs_server_version"],callback:function(r){e.$set(e.form.vars,"storage_nfs_server_version",r)},expression:"form.vars['storage_nfs_server_version']"}},[a("el-option",{attrs:{value:"3",label:"3"}},[e._v("3")]),a("el-option",{attrs:{value:"4",label:"4"}},[e._v("4")])],1)],1),a("el-form-item",{attrs:{label:"Server",prop:"vars.storage_nfs_server",rules:e.requiredRules}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.vars["storage_nfs_server"],callback:function(r){e.$set(e.form.vars,"storage_nfs_server",r)},expression:"form.vars['storage_nfs_server']"}})],1),a("el-form-item",{attrs:{label:"Path",prop:"vars.storage_nfs_server_path",rules:e.requiredRules}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.vars["storage_nfs_server_path"],callback:function(r){e.$set(e.form.vars,"storage_nfs_server_path",r)},expression:"form.vars['storage_nfs_server_path']"}})],1)],1):e._e(),"external-ceph"===e.createType?a("div",[a("el-form-item",{attrs:{label:e.$t("commons.table.name")}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1)],1):e._e(),"rook-ceph"===e.createType?a("div",[a("el-form-item",{attrs:{label:e.$t("commons.table.name")}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.disk_name"),prop:"vars.storage_rook_path",rules:e.requiredRules}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.vars["storage_rook_path"],callback:function(r){e.$set(e.form.vars,"storage_rook_path",r)},expression:"form.vars['storage_rook_path']"}}),a("div",[a("span",{staticClass:"input-help"},[e._v(e._s(e.$t("cluster.detail.storage.disk_name_help")))])])],1)],1):e._e(),"cinder"===e.createType?a("div",[a("el-form-item",{attrs:{label:e.$t("commons.table.name")}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"Identity",prop:"vars.cinder_auth_url",rules:e.requiredRules}},[a("el-input",{attrs:{placeholder:" http://128.110.154.166/identity",clearable:""},model:{value:e.form.vars["cinder_auth_url"],callback:function(r){e.$set(e.form.vars,"cinder_auth_url",r)},expression:"form.vars['cinder_auth_url']"}})],1),a("el-form-item",{attrs:{label:"UserName",prop:"vars.cinder_username",rules:e.requiredRules}},[a("el-input",{attrs:{placeholder:" admin",clearable:""},model:{value:e.form.vars["cinder_username"],callback:function(r){e.$set(e.form.vars,"cinder_username",r)},expression:"form.vars['cinder_username']"}})],1),a("el-form-item",{attrs:{label:"Password",prop:"vars.cinder_password",rules:e.passwordRules}},[a("el-input",{attrs:{type:"password",clearable:""},model:{value:e.form.vars["cinder_password"],callback:function(r){e.$set(e.form.vars,"cinder_password",r)},expression:"form.vars['cinder_password']"}})],1),a("el-form-item",{attrs:{label:"Region",prop:"vars.cinder_region",rules:e.requiredRules}},[a("el-input",{attrs:{placeholder:" RegionOne",clearable:""},model:{value:e.form.vars["cinder_region"],callback:function(r){e.$set(e.form.vars,"cinder_region",r)},expression:"form.vars['cinder_region']"}})],1),a("el-form-item",{attrs:{label:"Tenant Name",prop:"vars.cinder_tenant_name",rules:e.requiredRules}},[a("el-input",{attrs:{placeholder:" admin",clearable:""},model:{value:e.form.vars["cinder_tenant_name"],callback:function(r){e.$set(e.form.vars,"cinder_tenant_name",r)},expression:"form.vars['cinder_tenant_name']"}})],1),a("el-form-item",{attrs:{label:"Domain Name",prop:"vars.cinder_domain_name",rules:e.requiredRules}},[a("el-input",{attrs:{placeholder:" Default",clearable:""},model:{value:e.form.vars["cinder_domain_name"],callback:function(r){e.$set(e.form.vars,"cinder_domain_name",r)},expression:"form.vars['cinder_domain_name']"}})],1),a("el-form-item",{attrs:{label:e.$t("cluster.detail.tool.enable_storage")}},[a("el-switch",{staticStyle:{width:"80%"},attrs:{"active-value":"enable","inactive-value":"disable"},model:{value:e.enableBlockStorage,callback:function(r){e.enableBlockStorage=r},expression:"enableBlockStorage"}})],1),"enable"===e.enableBlockStorage?a("div",[a("el-form-item",{attrs:{label:"Version",prop:"vars.cinder_blockstorage_version",rules:e.requiredRules}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.form.vars["cinder_blockstorage_version"],callback:function(r){e.$set(e.form.vars,"cinder_blockstorage_version",r)},expression:"form.vars['cinder_blockstorage_version']"}},[a("el-option",{attrs:{value:"V3",label:"V3"}},[e._v("V3")])],1),a("div",[a("span",{staticClass:"input-help"},[e._v(e._s(e.$t("cluster.detail.storage.cinder_version_help")))])])],1),a("el-form-item",{attrs:{label:"Attach Limit",prop:"vars.node_volume_attach_limit",rules:e.requiredRules}},[a("el-input",{attrs:{placeholder:" 256",clearable:""},model:{value:e.form.vars["node_volume_attach_limit"],callback:function(r){e.$set(e.form.vars,"node_volume_attach_limit",r)},expression:"form.vars['node_volume_attach_limit']"}})],1)],1):e._e()],1):e._e(),"vsphere"===e.createType?a("div",[a("el-form-item",[a("div",[a("span",{staticClass:"input-help"},[e._v(e._s(e.$t("cluster.detail.storage.vsphere_select_help")))])])]),a("el-form-item",{attrs:{label:e.$t("commons.table.name")}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.vcenter_host"),prop:"vars.vc_host",rules:e.requiredRules}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.vars["vc_host"],callback:function(r){e.$set(e.form.vars,"vc_host",r)},expression:"form.vars['vc_host']"}})],1),a("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.vcenter_port"),prop:"vars.vc_port",rules:e.requiredRules}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.vars["vc_port"],callback:function(r){e.$set(e.form.vars,"vc_port",r)},expression:"form.vars['vc_port']"}})],1),a("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.vcenter_username"),prop:"vars.vc_username",rules:e.requiredRules}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.vars["vc_username"],callback:function(r){e.$set(e.form.vars,"vc_username",r)},expression:"form.vars['vc_username']"}})],1),a("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.vcenter_password"),prop:"vars.vc_password",rules:e.requiredRules}},[a("el-input",{attrs:{type:"password",clearable:""},model:{value:e.form.vars["vc_password"],callback:function(r){e.$set(e.form.vars,"vc_password",r)},expression:"form.vars['vc_password']"}})],1),a("el-form-item",{attrs:{label:"Datacenter",prop:"vars.datacenter",rules:e.requiredRules}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.vars["datacenter"],callback:function(r){e.$set(e.form.vars,"datacenter",r)},expression:"form.vars['datacenter']"}})],1),a("el-form-item",{attrs:{label:"Folder",prop:"vars.folder",rules:e.requiredRules}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.vars["folder"],callback:function(r){e.$set(e.form.vars,"folder",r)},expression:"form.vars['folder']"}})],1)],1):e._e(),"glusterfs"===e.createType?a("div",[a("el-form-item",{attrs:{label:e.$t("commons.table.name")}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1)],1):e._e(),"oceanstor"===e.createType?a("div",[a("el-form-item",{attrs:{label:e.$t("commons.table.name")}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.deploy_mode"),prop:"vars.oceanstor_controller_type",rules:e.requiredRules}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.form.vars["oceanstor_controller_type"],callback:function(r){e.$set(e.form.vars,"oceanstor_controller_type",r)},expression:"form.vars['oceanstor_controller_type']"}},[a("el-option",{attrs:{value:"single",label:"single"}},[e._v("single")]),a("el-option",{attrs:{value:"multi",label:"single"}},[e._v("multi")])],1)],1),a("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.multi_path_networking"),prop:"vars.oceanstor_is_multipath",rules:e.requiredRules}},[a("el-switch",{staticStyle:{width:"80%"},attrs:{"active-value":"yes","inactive-value":"no"},model:{value:e.form.vars["oceanstor_is_multipath"],callback:function(r){e.$set(e.form.vars,"oceanstor_is_multipath",r)},expression:"form.vars['oceanstor_is_multipath']"}})],1),a("el-form-item",{attrs:{label:e.$t("commons.table.type"),prop:"vars.oceanstor_type",rules:e.requiredRules}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.form.vars["oceanstor_type"],callback:function(r){e.$set(e.form.vars,"oceanstor_type",r)},expression:"form.vars['oceanstor_type']"}},[a("el-option",{attrs:{value:"nfs",label:"nfs"}},[e._v("nfs")]),a("el-option",{attrs:{value:"iscsi",label:"iscsi"}},[e._v("iscsi")]),a("el-option",{attrs:{value:"fc",label:"fc"}},[e._v("fc")])],1)],1),a("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.product"),prop:"vars.oceanstor_product",rules:e.requiredRules}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.form.vars["oceanstor_product"],callback:function(r){e.$set(e.form.vars,"oceanstor_product",r)},expression:"form.vars['oceanstor_product']"}},[a("el-option",{attrs:{value:"V3",label:"V3"}},[e._v("V3")]),a("el-option",{attrs:{value:"V5",label:"V5"}},[e._v("V5")]),a("el-option",{attrs:{value:"Dorado",label:"Dorado"}},[e._v("Dorado")])],1)],1),a("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.manage_url"),prop:"vars.oceanstor_urls",rules:e.requiredRules}},[a("el-input",{attrs:{placeholder:"10.1.1.1,10.1.1.2",clearable:""},model:{value:e.form.vars["oceanstor_urls"],callback:function(r){e.$set(e.form.vars,"oceanstor_urls",r)},expression:"form.vars['oceanstor_urls']"}})],1),a("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.user_name"),prop:"vars.oceanstor_user",rules:e.requiredRules}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.vars["oceanstor_user"],callback:function(r){e.$set(e.form.vars,"oceanstor_user",r)},expression:"form.vars['oceanstor_user']"}})],1),a("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.password"),prop:"vars.oceanstor_password",rules:e.passwordRules}},[a("el-input",{attrs:{type:"password",clearable:""},model:{value:e.form.vars["oceanstor_password"],callback:function(r){e.$set(e.form.vars,"oceanstor_password",r)},expression:"form.vars['oceanstor_password']"}})],1),a("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.storage_pool"),prop:"vars.oceanstor_pools",rules:e.requiredRules}},[a("el-input",{attrs:{placeholder:"pool1,pool2",clearable:""},model:{value:e.form.vars["oceanstor_pools"],callback:function(r){e.$set(e.form.vars,"oceanstor_pools",r)},expression:"form.vars['oceanstor_pools']"}})],1),"nfs"===e.form.vars["oceanstor_type"]?a("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.logic_port"),prop:"vars.oceanstor_portal",rules:e.requiredRules}},[a("el-input",{attrs:{placeholder:"test1,test2",clearable:""},model:{value:e.form.vars["oceanstor_portal"],callback:function(r){e.$set(e.form.vars,"oceanstor_portal",r)},expression:"form.vars['oceanstor_portal']"}}),a("div",[a("span",{staticClass:"input-help"},[e._v(e._s(e.$t("cluster.detail.storage.logic_port_help")))])])],1):e._e(),"iscsi"===e.form.vars["oceanstor_type"]?a("el-form-item",{attrs:{label:e.$t("cluster.detail.storage.business_ip"),prop:"vars.oceanstor_portal",rules:e.requiredRules}},[a("el-input",{attrs:{placeholder:"10.1.1.1,10.1.1.2",clearable:""},model:{value:e.form.vars["oceanstor_portal"],callback:function(r){e.$set(e.form.vars,"oceanstor_portal",r)},expression:"form.vars['oceanstor_portal']"}}),a("div",[a("span",{staticClass:"input-help"},[e._v(e._s(e.$t("cluster.detail.storage.business_ip_help")))])])],1):e._e()],1):e._e(),a("el-form-item",[a("div",{staticStyle:{float:"right"}},[a("el-button",{on:{click:function(r){return e.onCancel()}}},[e._v(e._s(e.$t("commons.button.cancel")))]),a("el-button",{attrs:{type:"primary",disabled:!e.createType||e.submitLoading},on:{click:e.onSubmit}},[e._v(e._s(e.$t("commons.button.create")))])],1)])],1)],1)])],1)],1)},s=[],l=(a("f5bd"),a("be17")),o=a("2429"),n=a("0792"),c={name:"ClusterStorageProvionerCreate",components:{LayoutContent:l["a"]},data:function(){return{submitLoading:!1,createType:"",form:{name:"",type:"",vars:{}},nameRules:[n["a"].CommonNameRule],requiredRules:[n["a"].RequiredRule],passwordRules:[n["a"].PasswordRule],enableBlockStorage:"disable"}},methods:{onSubmit:function(){var e=this;this.$refs["form"].validate((function(r){if(!r)return!1;e.submitLoading=!0,e.form.type=e.createType,"conder"===e.form.type&&(e.form.vars["enable_blockstorage"]=e.enableBlockStorage),Object(o["b"])(e.clusterName,e.form).then((function(){e.$message({type:"success",message:e.$t("commons.msg.save_success")}),e.$router.push({name:"ClusterStorage"}),e.submitLoading=!0})).catch((function(){e.submitLoading=!1}))}))},onCancel:function(){this.$router.push({name:"ClusterStorage"})},changeSelection:function(){switch(this.$refs["form"].clearValidate(),this.form.vars={},this.form.name="",this.createType){case"external-ceph":this.form.name="external-ceph";break;case"rook-ceph":this.form.name="rook-ceph.rbd.csi.ceph.com";break;case"cinder":this.form.name="cinder.csi.openstack.org",this.enableBlockStorage="disable";break;case"glusterfs":this.form.name="kubernetes.io/glusterfs";break;case"oceanstor":this.form.name="csi.huawei.com",this.form.vars={oceanstor_controller_type:"single",oceanstor_is_multipath:"no"};break;case"vsphere":this.form.name="csi.vsphere.vmware.com";break}}},created:function(){this.clusterName=this.$route.params.name}},i=c,u=a("5d22"),m=Object(u["a"])(i,t,s,!1,null,"880770b0",null);r["default"]=m.exports}}]);
//# sourceMappingURL=chunk-0c0820a7.8a72c8b1.js.map