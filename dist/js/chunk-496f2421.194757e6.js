(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-496f2421"],{"0280":function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"c",(function(){return o})),r.d(t,"e",(function(){return l})),r.d(t,"b",(function(){return i})),r.d(t,"d",(function(){return s}));r("a5c9");var a=r("ff66"),n="/api/v1/backupaccounts";function c(e){return Object(a["e"])("".concat(n),e)}function o(e){return Object(a["e"])("".concat(n,"/buckets"),e)}function l(e,t){return Object(a["d"])("".concat(n,"/").concat(e),t)}function i(e){return Object(a["b"])("".concat(n,"/").concat(e))}function s(e,t,r){return Object(a["e"])("".concat(n,"/search?pageNum=").concat(e,"&pageSize=").concat(t),r)}},8639:function(e,t,r){"use strict";var a=r("6c87"),n=r("7cd8"),c=r("9f69"),o=r("e08f"),l=r("7f45"),i=r("952c"),s=r("a4fc"),u=r("1392"),m=r("eb5b"),f=r("4cee"),d=r("d50e"),p=f.UNSUPPORTED_Y,b=[].push,h=Math.min,k=4294967295,g=!d((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));a("split",(function(e,t,r){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var a=String(o(this)),c=void 0===r?k:r>>>0;if(0===c)return[];if(void 0===e)return[a];if(!n(e))return t.call(a,e,c);var l,i,s,u=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,p=new RegExp(e.source,f+"g");while(l=m.call(p,a)){if(i=p.lastIndex,i>d&&(u.push(a.slice(d,l.index)),l.length>1&&l.index<a.length&&b.apply(u,l.slice(1)),s=l[0].length,d=i,u.length>=c))break;p.lastIndex===l.index&&p.lastIndex++}return d===a.length?!s&&p.test("")||u.push(""):u.push(a.slice(d)),u.length>c?u.slice(0,c):u}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var n=o(this),c=void 0==t?void 0:t[e];return void 0!==c?c.call(t,n,r):a.call(String(n),t,r)},function(e,n){var o=r(a,this,e,n,a!==t);if(o.done)return o.value;var m=c(this),f=String(e),d=l(m,RegExp),b=m.unicode,g=(m.ignoreCase?"i":"")+(m.multiline?"m":"")+(m.unicode?"u":"")+(p?"g":"y"),v=new d(p?"^(?:"+m.source+")":m,g),y=void 0===n?k:n>>>0;if(0===y)return[];if(0===f.length)return null===u(v,f)?[f]:[];var $=0,V=0,x=[];while(V<f.length){v.lastIndex=p?0:V;var _,w=u(v,p?f.slice(V):f);if(null===w||(_=h(s(v.lastIndex+(p?V:0)),f.length))===$)V=i(f,V,b);else{if(x.push(f.slice($,V)),x.length===y)return x;for(var S=1;S<=w.length-1;S++)if(x.push(w[S]),x.length===y)return x;V=$=_}}return x.push(f.slice($)),x}]}),!g,p)},bb56:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("layout-content",{attrs:{header:e.$t("commons.button.edit"),"back-to":{name:"BackupAccount"}}},[r("el-row",[r("el-col",{attrs:{span:4}},[r("br")]),r("el-col",{attrs:{span:10}},[r("div",{staticClass:"grid-content bg-purple-light"},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{"label-position":"left",model:e.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:e.$t("commons.table.name"),"aria-readonly":"true",required:""}},[r("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:e.$t("commons.table.type"),"aria-readonly":"true",required:""}},[r("el-input",{attrs:{disabled:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),"OSS"===e.form.type||"S3"===e.form.type?r("el-form-item",{attrs:{label:"AccessKey",required:""}},[r("el-input",{model:{value:e.form.credentialVars["accessKey"],callback:function(t){e.$set(e.form.credentialVars,"accessKey",t)},expression:"form.credentialVars['accessKey']"}})],1):e._e(),"OSS"===e.form.type||"S3"===e.form.type?r("el-form-item",{attrs:{label:"SecretKey",required:""}},[r("el-input",{attrs:{type:"password"},model:{value:e.form.credentialVars["secretKey"],callback:function(t){e.$set(e.form.credentialVars,"secretKey",t)},expression:"form.credentialVars['secretKey']"}})],1):e._e(),"AZURE"===e.form.type?r("el-form-item",{attrs:{label:e.$t("backup_account.table.accountName"),required:""}},[r("el-input",{model:{value:e.form.credentialVars["accountName"],callback:function(t){e.$set(e.form.credentialVars,"accountName",t)},expression:"form.credentialVars['accountName']"}})],1):e._e(),"AZURE"===e.form.type?r("el-form-item",{attrs:{label:e.$t("backup_account.table.accountKey"),required:""}},[r("el-input",{attrs:{type:"password"},model:{value:e.form.credentialVars["accountKey"],callback:function(t){e.$set(e.form.credentialVars,"accountKey",t)},expression:"form.credentialVars['accountKey']"}})],1):e._e(),"S3"===e.form.type?r("el-form-item",{attrs:{label:e.$t("backup_account.table.region"),required:""}},[r("el-input",{model:{value:e.form.credentialVars["region"],callback:function(t){e.$set(e.form.credentialVars,"region",t)},expression:"form.credentialVars['region']"}})],1):e._e(),"SFTP"!==e.form.type?r("el-form-item",{attrs:{label:e.$t("backup_account.table.endpoint"),required:""}},[r("el-input",{model:{value:e.form.credentialVars["endpoint"],callback:function(t){e.$set(e.form.credentialVars,"endpoint",t)},expression:"form.credentialVars['endpoint']"}})],1):e._e(),"SFTP"!==e.form.type?r("el-form-item",{attrs:{label:e.$t("backup_account.table.bucket"),required:""}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("commons.validate.select")},model:{value:e.form.bucket,callback:function(t){e.$set(e.form,"bucket",t)},expression:"form.bucket"}},e._l(e.buckets,(function(e){return r("el-option",{key:e,attrs:{value:e}})})),1)],1):e._e(),"SFTP"===e.form.type?r("div",[r("el-form-item",{attrs:{label:e.$t("backup_account.table.address"),required:""}},[r("el-input",{model:{value:e.form.credentialVars["address"],callback:function(t){e.$set(e.form.credentialVars,"address",t)},expression:"form.credentialVars['address']"}})],1),r("el-form-item",{attrs:{label:e.$t("backup_account.table.port"),required:""}},[r("el-input-number",{attrs:{min:0,max:65535},model:{value:e.form.credentialVars["port"],callback:function(t){e.$set(e.form.credentialVars,"port",t)},expression:"form.credentialVars['port']"}})],1),r("el-form-item",{attrs:{label:e.$t("backup_account.table.username"),required:""}},[r("el-input",{model:{value:e.form.credentialVars["username"],callback:function(t){e.$set(e.form.credentialVars,"username",t)},expression:"form.credentialVars['username']"}})],1),r("el-form-item",{attrs:{label:e.$t("backup_account.table.password"),required:""}},[r("el-input",{attrs:{type:"password"},model:{value:e.form.credentialVars["password"],callback:function(t){e.$set(e.form.credentialVars,"password",t)},expression:"form.credentialVars['password']"}})],1),r("el-form-item",{attrs:{label:e.$t("backup_account.table.path"),required:""}},[r("el-input",{model:{value:e.form.bucket,callback:function(t){e.$set(e.form,"bucket",t)},expression:"form.bucket"}})],1)],1):e._e(),r("div",{staticStyle:{float:"right"}},[r("el-form-item",["SFTP"!==e.form.type?r("el-button",{attrs:{type:"success",plain:""},on:{click:e.getBuckets}},[e._v(e._s(e.$t("commons.button.getBucket")))]):e._e(),r("el-button",{on:{click:function(t){return e.onCancel()}}},[e._v(e._s(e.$t("commons.button.cancel")))]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.update()}}},[e._v(e._s(e.$t("commons.button.submit")))])],1)],1)],1)],1)]),r("el-col",{attrs:{span:4}},[r("br")])],1)],1)},n=[],c=(r("2769"),r("8639"),r("b1fa"),r("f5bd"),r("be17")),o=r("0280"),l={components:{LayoutContent:c["a"]},props:["data"],name:"BackupAccountEdit",data:function(){return{form:{id:"",name:"",type:"",bucket:"",credentialVars:{}},buckets:[],loading:!1}},methods:{update:function(){var e=this;this.loading=!0;var t=this.form.projects?this.form.projects.split(","):[],r=this.form.clusters?this.form.clusters.split(","):[];Object(o["e"])(this.form.name,{id:this.form.id,bucket:this.form.bucket,credentialVars:this.form.credentialVars,name:this.form.name,type:this.form.type,projects:t,clusters:r}).then((function(){e.loading=!1,e.$message({type:"success",message:e.$t("commons.msg.save_success")}),e.$router.push({name:"BackupAccount"})})).finally((function(){e.loading=!1}))},onCancel:function(){this.$router.push({name:"BackupAccount"})},getBuckets:function(){var e=this;this.loading=!0,Object(o["c"])({name:this.form.name,type:this.form.type,credentialVars:this.form.credentialVars}).then((function(t){e.loading=!1,e.buckets=t})).finally((function(){e.loading=!1}))}},created:function(){this.form=this.data}},i=l,s=r("5d22"),u=Object(s["a"])(i,a,n,!1,null,"35d8a954",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-496f2421.194757e6.js.map