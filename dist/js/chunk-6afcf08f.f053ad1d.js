(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6afcf08f"],{"274d":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"g",(function(){return m}));n("a5c9");var o=n("ff66"),r="/api/v1/regions";function a(e){return Object(o["b"])(r+"/"+e)}function c(e,t,n){return Object(o["e"])("".concat(r,"/search?pageNum=").concat(e,"&pageSize=").concat(t),n)}function l(){return Object(o["c"])("".concat(r))}function i(e){return Object(o["e"])("".concat(r,"/datacenter"),e)}function u(e){return Object(o["e"])("".concat(r),e)}function s(e){return Object(o["c"])("".concat(r,"/").concat(e))}function m(e,t){return Object(o["d"])("".concat(r,"/").concat(e),t)}},c7a8:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"f",(function(){return s}));n("a5c9");var o=n("ff66"),r="/api/v1/plans";function a(e){return Object(o["b"])(r+"/"+e)}function c(e,t,n){return Object(o["e"])("".concat(r,"/search?pageNum=").concat(e,"&pageSize=").concat(t),n)}function l(e){return Object(o["c"])("".concat(r,"/configs/").concat(e))}function i(e){return Object(o["e"])("".concat(r),e)}function u(e){return Object(o["c"])("".concat(r,"/").concat(e))}function s(e,t){return Object(o["d"])("".concat(r,"/").concat(e),t)}},dd3c:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"h",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return i})),n.d(t,"g",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"i",(function(){return d}));n("a5c9");var o=n("ff66"),r="/api/v1/zones";function a(e){return Object(o["b"])(r+"/"+e)}function c(e,t,n){return Object(o["e"])("".concat(r,"/search?pageNum=").concat(e,"&pageSize=").concat(t),n)}function l(e){return Object(o["e"])("".concat(r,"/clusters"),e)}function i(e){return Object(o["e"])("".concat(r,"/datastores"),e)}function u(e){return Object(o["e"])("".concat(r,"/templates"),e)}function s(e){return Object(o["e"])("".concat(r),e)}function m(e){return Object(o["c"])("".concat(r,"/list/").concat(e))}function f(e){return Object(o["c"])("".concat(r,"/").concat(e))}function d(e,t){return Object(o["d"])("".concat(r,"/").concat(e),t)}},e30b:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("layout-content",{attrs:{header:e.$t("commons.button.create"),"back-to":{name:"PlanList"}}},[n("el-row",[n("el-col",{attrs:{span:4}},[n("br")]),n("el-col",{attrs:{span:10}},[n("div",{staticClass:"grid-content bg-purple-light"},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{"label-width":"200px",model:e.form,rules:e.rules,"label-position":"left"}},[n("el-form-item",{attrs:{label:e.$t("commons.table.name"),prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),n("div",[n("span",{staticClass:"input-help"},[e._v(e._s(e.$t("commons.validate.name_help")))])])],1),n("el-form-item",{attrs:{label:e.$t("automatic.region.name"),prop:"region"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","reserve-keyword":""},on:{change:function(t){return e.changeRegion(e.form.region)}},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},e._l(e.regions,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),n("el-form-item",{attrs:{label:e.$t("automatic.plan.deploy_template"),prop:"deployTemplate"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","reserve-keyword":""},on:{change:function(t){return e.changeTemplate()}},model:{value:e.form.deployTemplate,callback:function(t){e.$set(e.form,"deployTemplate",t)},expression:"form.deployTemplate"}},[n("el-option",{attrs:{label:e.$t("automatic.plan.SINGLE"),value:"SINGLE"}}),n("el-option",{attrs:{label:e.$t("automatic.plan.MULTIPLE"),value:"MULTIPLE"}})],1)],1),"SINGLE"===e.form.deployTemplate?n("el-form-item",{attrs:{label:e.$t("automatic.zone.name"),prop:"zone"}},[n("el-select",{key:"zone",staticStyle:{width:"100%"},attrs:{filterable:"","reserve-keyword":""},model:{value:e.form.zone,callback:function(t){e.$set(e.form,"zone",t)},expression:"form.zone"}},e._l(e.zones,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1):e._e(),"MULTIPLE"===e.form.deployTemplate?n("el-form-item",{attrs:{label:e.$t("automatic.zone.name"),prop:"zones"}},[n("el-select",{key:"zones",staticStyle:{width:"100%"},attrs:{filterable:"",multiple:"","reserve-keyword":""},model:{value:e.form.zones,callback:function(t){e.$set(e.form,"zones",t)},expression:"form.zones"}},e._l(e.zones,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1):e._e(),n("el-form-item",{attrs:{label:e.$t("automatic.plan.project_auth"),prop:"projects"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","reserve-keyword":""},model:{value:e.form.projects,callback:function(t){e.$set(e.form,"projects",t)},expression:"form.projects"}},e._l(e.projects,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),n("el-form-item",{attrs:{label:e.$t("automatic.plan.master_model"),prop:"planVars.masterModel"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","reserve-keyword":""},model:{value:e.form.planVars.masterModel,callback:function(t){e.$set(e.form.planVars,"masterModel",t)},expression:"form.planVars.masterModel"}},e._l(e.vmConfigs,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),n("el-form-item",{attrs:{label:e.$t("automatic.plan.worker_model"),prop:"planVars.workerModel"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","reserve-keyword":""},model:{value:e.form.planVars.workerModel,callback:function(t){e.$set(e.form.planVars,"workerModel",t)},expression:"form.planVars.workerModel"}},e._l(e.vmConfigs,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),n("div",[n("h3",[e._v(e._s(e.$t("automatic.plan.config")))]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.vmConfigs}},[n("el-table-column",{attrs:{prop:"name",label:e.$t("commons.table.name")}}),n("el-table-column",{attrs:{prop:"config.cpu",label:e.$t("automatic.vm_config.cpu")}}),n("el-table-column",{attrs:{prop:"config.memory",label:e.$t("automatic.vm_config.memory")}}),"OpenStack"===e.currentProvider?n("el-table-column",{attrs:{prop:"config.disk",label:e.$t("automatic.vm_config.disk")}}):e._e()],1)],1),n("br"),n("el-form-item",[n("div",{staticStyle:{float:"right"}},[n("el-button",{on:{click:function(t){return e.onCancel()}}},[e._v(e._s(e.$t("commons.button.cancel")))]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v(e._s(e.$t("commons.button.submit")))])],1)])],1)],1)])],1)],1)},r=[],a=(n("6afd"),n("f5bd"),n("b1fa"),n("be17")),c=n("274d"),l=n("dd3c"),i=n("c7a8"),u=n("7273"),s=n("0792"),m={name:"PlanCreate",components:{LayoutContent:a["a"]},data:function(){return{form:{name:"",region:"",zone:"",deployTemplate:"SINGLE",projects:[],zones:[],planVars:{masterModel:"",workerModel:""}},rules:{name:[s["a"].LengthRule,s["a"].NameRule],region:[s["a"].RequiredRule],zone:[s["a"].RequiredRule],deployTemplate:[s["a"].RequiredRule],projects:[s["a"].RequiredRule],zones:[s["a"].RequiredRule],planVars:{masterModel:[s["a"].RequiredRule],workerModel:[s["a"].RequiredRule]}},loading:!1,regions:[],zones:[],regionName:"",regionId:"",currentProvider:"",projects:[],vmConfigs:[]}},methods:{changeRegion:function(e){var t=this;this.regions.forEach((function(n){n.name===e&&(t.regionName=n.name,t.regionId=n.id,t.currentProvider=n.provider,t.loading=!0,Object(i["d"])(e).then((function(e){t.loading=!1,t.vmConfigs=e})),Object(l["d"])(e).then((function(e){t.zones=e})))}))},onCancel:function(){this.$router.push({name:"PlanList"})},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;"SINGLE"===t.form.deployTemplate&&(t.form.zones=[t.form.zone]),t.loading=!0,Object(i["a"])(t.form).then((function(){t.loading=!1,t.$message({type:"success",message:t.$t("commons.msg.create_success")}),t.$router.push({name:"PlanList"})})).finally((function(){t.loading=!1}))}))},changeTemplate:function(){this.form.zones=[],this.form.zone=""}},created:function(){var e=this;Object(c["d"])().then((function(t){e.regions=t.items})),Object(u["a"])().then((function(t){e.projects=t.items}))}},f=m,d=n("5d22"),p=Object(d["a"])(f,o,r,!1,null,"432d469c",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-6afcf08f.f053ad1d.js.map