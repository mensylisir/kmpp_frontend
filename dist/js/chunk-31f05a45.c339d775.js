(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31f05a45"],{"1a55":function(t,e,n){"use strict";n("2a6b")},2429:function(t,e,n){"use strict";n.d(e,"j",(function(){return p})),n.d(e,"b",(function(){return f})),n.d(e,"l",(function(){return d})),n.d(e,"f",(function(){return g})),n.d(e,"a",(function(){return b})),n.d(e,"i",(function(){return h})),n.d(e,"k",(function(){return v})),n.d(e,"d",(function(){return _})),n.d(e,"h",(function(){return k})),n.d(e,"e",(function(){return y})),n.d(e,"c",(function(){return $})),n.d(e,"g",(function(){return x}));n("2769"),n("0756");var a=n("ff66"),o="/proxy/kubernetes/{cluster_name}/{resource_url}",i=10,s="api/v1/persistentvolumes",r="apis/storage.k8s.io/v1/storageclasses",c="api/v1/persistentvolumes/{name}",l="apis/storage.k8s.io/v1/storageclasses/{name}",u="/api/v1/clusters/provisioner/{cluster_name}",m="api/v1/namespaces/{namespace}/secrets";function p(t){return Object(a["c"])(u.replace("{cluster_name}",t))}function f(t,e){return Object(a["e"])(u.replace("{cluster_name}",t),e)}function d(t,e){var n="/api/v1/clusters/provisioner/sync/{cluster_name}",o=n.replace("{cluster_name}",t);return Object(a["e"])(o,e)}function g(t,e){var n="/api/v1/clusters/provisioner/delete/{cluster_name}",o=n.replace("{cluster_name}",t);return Object(a["e"])(o,e)}function b(t,e){var n=o.replace("{cluster_name}",t).replace("{resource_url}",s);return Object(a["e"])(n,e)}function h(t,e){var n=o.replace("{cluster_name}",t).replace("{resource_url}",s);return n+="?limit="+i,void 0!==e&&null!==e&&(n+="&continue="+e),Object(a["c"])(n)}function v(t,e,n){var s=o.replace("{cluster_name}",t).replace("{resource_url}",r);return n||(s+="?limit="+i),void 0!==e&&null!==e&&(s+="&continue="+e),Object(a["c"])(s)}function _(t,e){var n=o.replace("{cluster_name}",t).replace("{resource_url}",r);return Object(a["e"])(n,e)}function k(t,e){var n=o.replace("{cluster_name}",t).replace("{resource_url}",l).replace("{name}",e);return Object(a["b"])(n)}function y(t,e){var n=o.replace("{cluster_name}",t).replace("{resource_url}",c).replace("{name}",e);return Object(a["b"])(n)}function $(t,e,n){var i=o.replace("{cluster_name}",t).replace("{resource_url}",m.replace("{namespace}",e));return Object(a["e"])(i,n)}function x(t,e,n){var i=o.replace("{cluster_name}",t).replace("{resource_url}",m.replace("{namespace}",e)+"/"+n);return Object(a["b"])(i)}},"2a6b":function(t,e,n){t.exports={theme:"#5354bb"}},"30d5":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("79fd"),n("45af"),n("b1fa"),n("1ec5"),n("2e6f"),n("af21");var a=n("ec81");function o(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Object(a["a"])(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){c=!0,s=t},f:function(){try{r||null==n["return"]||n["return"]()}finally{if(c)throw s}}}}},"4e53":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{staticStyle:{float:"right"},attrs:{disabled:!t.ko_nextToken||t.ko_btnLoading,size:"mini",icon:"el-icon-caret-right"},on:{click:function(e){return t.getPageNext()}}}),n("span",{staticStyle:{float:"right","margin-top":"7px"}},[t._v(t._s(t.ko_currentPage))]),n("el-button",{staticStyle:{float:"right"},attrs:{disabled:1===t.ko_currentPage||t.ko_btnLoading,size:"mini",icon:"el-icon-caret-left"},on:{click:function(e){return t.getPageAhead()}}})],1)},o=[],i=(n("e1d4"),{name:"K8sPage",props:{nextToken:String,currentPage:Number},watch:{nextToken:{handler:function(t){this.ko_nextToken=t},immediate:!0},currentPage:{handler:function(t){this.ko_currentPage=t||this.ko_currentPage},immediate:!0}},data:function(){return{ko_aheadToken:[],ko_continueToken:"",ko_nextToken:"",ko_currentPage:1,ko_btnLoading:!1}},methods:{getPageAhead:function(){this.ko_btnLoading=!0,this.ko_currentPage--,this.ko_continueToken=this.ko_aheadToken[this.ko_aheadToken.length-1],this.ko_aheadToken.pop(),this.$emit("pageChange",{token:this.ko_continueToken,page:this.ko_currentPage}),this.ko_btnLoading=!1},getPageNext:function(){this.ko_currentPage++,this.ko_aheadToken.push(this.ko_continueToken),this.ko_continueToken=this.ko_nextToken,this.$emit("pageChange",{token:this.ko_continueToken,page:this.ko_currentPage})}}}),s=i,r=n("5d22"),c=Object(r["a"])(s,a,o,!1,null,null,null);e["a"]=c.exports},"78d4":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"7ea2":function(t,e,n){"use strict";n.d(e,"e",(function(){return r})),n.d(e,"a",(function(){return c})),n.d(e,"o",(function(){return l})),n.d(e,"c",(function(){return u})),n.d(e,"j",(function(){return m})),n.d(e,"b",(function(){return p})),n.d(e,"d",(function(){return f})),n.d(e,"k",(function(){return d})),n.d(e,"l",(function(){return g})),n.d(e,"p",(function(){return b})),n.d(e,"g",(function(){return h})),n.d(e,"f",(function(){return v})),n.d(e,"h",(function(){return _})),n.d(e,"m",(function(){return k})),n.d(e,"n",(function(){return y})),n.d(e,"i",(function(){return $}));n("a5c9"),n("2769"),n("0756");var a=n("ff66"),o="/api/v1/clusters",i="/api/v1/clusters/logger/{cluster_name}",s="/api/v1/clusters/provisioner/log/{cluster_name}/{log_id}";function r(t){return Object(a["c"])("".concat(o,"/").concat(t))}function c(t){return Object(a["c"])("".concat(o,"/existence/").concat(t))}function l(t,e,n){return Object(a["e"])("".concat(o,"/search?pageNum=").concat(t,"&pageSize=").concat(e),n)}function u(t){return Object(a["e"])("".concat(o),t)}function m(t){return Object(a["c"])("".concat(o,"/health/").concat(t))}function p(t){return Object(a["e"])("".concat(o,"/recover/").concat(t),{})}function f(t,e){return Object(a["b"])("".concat(o,"/").concat(t,"?force=").concat(e))}function d(t){return Object(a["e"])("".concat(o,"/import/"),t)}function g(t){return Object(a["e"])("".concat(o,"/init/").concat(t,"/"),{})}function b(t,e){var n={clusterName:t,version:e};return Object(a["e"])("".concat(o,"/upgrade/"),n)}function h(t){return Object(a["c"])("".concat(o,"/status/").concat(t))}function v(t){return Object(a["c"])(i.replace("{cluster_name}",t))}function _(t,e){return Object(a["c"])(s.replace("{cluster_name}",t).replace("{log_id}",e))}function k(t){window.open("/ui/#/logger?clusterName=".concat(t),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function y(t,e){window.open("/ui/#/logger?clusterName=".concat(t,"&logId=").concat(e),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function $(t){return Object(a["c"])("".concat(o,"/secret/").concat(t))}},"86ca":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"complex-table"},[t.$slots.header||t.header?n("div",{staticClass:"complex-table__header"},[t._t("header",(function(){return[t._v(t._s(t.header))]})),t.$slots.toolbar||t.searchConfig?n("div",{staticClass:"complex-table__toolbar"},[n("div",[t._t("toolbar")],2),n("fu-search-bar",t._b({on:{exec:t.search},scopedSlots:t._u([{key:"complex",fn:function(){return[t._t("complex")]},proxy:!0}],null,!0)},"fu-search-bar",t.searchConfig,!1),[t._t("buttons"),n("fu-table-column-select",{attrs:{columns:t.columns}})],2)],1):t._e()],2):t._e(),n("div",{staticClass:"complex-table__body"},[n("fu-table",t._g(t._b({attrs:{columns:t.columns,"local-key":t.localKey},on:{"selection-change":t.handleSelectionChange}},"fu-table",t.$attrs,!1),t.$listeners),[t._t("default")],2)],1),t.$slots.pagination||t.paginationConfig?n("div",{staticClass:"complex-table__pagination"},[t._t("pagination",(function(){return[n("fu-table-pagination",t._b({attrs:{"current-page":t.paginationConfig.currentPage,"page-size":t.paginationConfig.pageSize},on:{"update:currentPage":function(e){return t.$set(t.paginationConfig,"currentPage",e)},"update:current-page":function(e){return t.$set(t.paginationConfig,"currentPage",e)},"update:pageSize":function(e){return t.$set(t.paginationConfig,"pageSize",e)},"update:page-size":function(e){return t.$set(t.paginationConfig,"pageSize",e)},change:t.search}},"fu-table-pagination",t.paginationConfig,!1))]}))],2):t._e()])},o=[],i={name:"ComplexTable",props:{columns:{type:Array,default:function(){return[]}},localKey:String,header:String,searchConfig:Object,paginationConfig:Object,selects:Array},data:function(){return{condition:{}}},methods:{search:function(t,e){t&&(this.condition=t),this.$emit("search",this.condition,e)},handleSelectionChange:function(t){this.$emit("update:selects",t)}}},s=i,r=(n("1a55"),n("5d22")),c=Object(r["a"])(s,a,o,!1,null,null,null);e["a"]=c.exports},e7d3:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[""===t.provider?n("el-alert",{attrs:{title:t.$t("cluster.detail.storage.operator_help"),type:"info"}}):t._e(),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-tabs",{staticStyle:{"margin-bottom":"30px"},attrs:{"tab-position":"left"},on:{"tab-click":function(e){return t.handleClick()}},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:t.$t("cluster.detail.storage.pv"),name:"pv"}},[n("el-card",[[n("el-button-group",[n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.pvCreate()}}},[t._v(t._s(t.$t("commons.button.create")))]),n("el-button",{attrs:{size:"small",disabled:t.pvSelection.length<1},on:{click:function(e){return t.onBatchDelete("pv")}}},[t._v(t._s(t.$t("commons.button.delete")))])],1)],n("complex-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{selects:t.pvSelection,data:t.pvDatas},on:{"update:selects":function(e){t.pvSelection=e}}},[n("el-table-column",{attrs:{type:"selection",fix:""}}),n("el-table-column",{attrs:{label:t.$t("commons.table.name"),"min-width":"100",prop:"metadata.name",fix:""}}),n("el-table-column",{attrs:{label:t.$t("cluster.detail.storage.capacity"),"min-width":"100",prop:"spec.capacity.storage",fix:""}}),n("el-table-column",{attrs:{label:"Access Modes","min-width":"100",prop:"spec.accessModes",fix:""}}),n("el-table-column",{attrs:{label:t.$t("cluster.detail.storage.source"),"min-width":"100",prop:"spec.storageClassName",fix:""}}),n("el-table-column",{attrs:{label:t.$t("commons.table.status"),"min-width":"100",prop:"status.phase",fix:""}}),n("el-table-column",{attrs:{label:t.$t("commons.table.create_time")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(t._f("datetimeFormat")(n.metadata.creationTimestamp))+" ")]}}])}),n("fu-table-operations",{attrs:{buttons:t.buttons_pv,label:t.$t("commons.table.action"),fix:""}})],1),n("k8s-page",{attrs:{nextToken:t.pvPage.nextToken},on:{pageChange:t.pvPageChange}})],2)],1),n("el-tab-pane",{attrs:{label:t.$t("cluster.detail.storage.storage_class"),name:"storage_class"}},[n("el-card",[[n("el-button-group",[n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.classCreate()}}},[t._v(t._s(t.$t("commons.button.create")))]),n("el-button",{attrs:{size:"small",disabled:t.classSelection.length<1},on:{click:function(e){return t.onBatchDelete("class")}}},[t._v(t._s(t.$t("commons.button.delete")))])],1)],n("complex-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{selects:t.classSelection,data:t.storageClassDatas},on:{"update:selects":function(e){t.classSelection=e}}},[n("el-table-column",{attrs:{type:"selection",fix:""}}),n("el-table-column",{attrs:{label:t.$t("commons.table.name"),"min-width":"100",prop:"metadata.name",fix:""}}),n("el-table-column",{attrs:{label:t.$t("cluster.detail.storage.provisioner_short"),"min-width":"100",prop:"provisioner",fix:""}}),n("el-table-column",{attrs:{label:t.$t("cluster.detail.storage.reclaim_policy"),"min-width":"100",prop:"reclaimPolicy",fix:""}}),n("el-table-column",{attrs:{label:t.$t("cluster.detail.storage.volume_binding_mode"),"min-width":"100",prop:"volumeBindingMode",fix:""}}),n("el-table-column",{attrs:{label:t.$t("commons.table.create_time")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(t._f("datetimeFormat")(n.metadata.creationTimestamp))+" ")]}}])}),n("fu-table-operations",{attrs:{buttons:t.buttons_class,label:t.$t("commons.table.action"),fix:""}})],1),n("k8s-page",{attrs:{nextToken:t.classPage.nextToken},on:{pageChange:t.classPageChange}})],2)],1),n("el-tab-pane",{attrs:{label:t.$t("cluster.detail.storage.provisioner"),name:"provisioner"}},[n("el-card",[[n("el-button-group",[n("el-button",{attrs:{size:"small",disabled:""===t.provider},on:{click:function(e){return t.provisionerCreate()}}},[t._v(t._s(t.$t("commons.button.create")))]),n("el-button",{attrs:{size:"small",disabled:t.provisionerSelection.length<1},on:{click:function(e){return t.onSync()}}},[t._v(t._s(t.$t("commons.button.sync")))]),n("el-button",{attrs:{size:"small",disabled:t.provisionerSelection.length<1},on:{click:function(e){return t.onBatchDelete("provisioner")}}},[t._v(t._s(t.$t("commons.button.delete")))])],1)],n("complex-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{selects:t.provisionerSelection,data:t.provisionerDatas},on:{"update:selects":function(e){t.provisionerSelection=e}}},[n("el-table-column",{attrs:{type:"selection",fix:""}}),n("el-table-column",{attrs:{label:t.$t("commons.table.name"),"min-width":"100",prop:"name",fix:""}}),n("el-table-column",{attrs:{label:t.$t("commons.table.type"),"min-width":"100",prop:"type",fix:""}}),n("el-table-column",{attrs:{label:t.$t("commons.table.status"),"min-width":"100",prop:"status",fix:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return["Initializing"===a.status?n("div",[n("i",{staticClass:"el-icon-loading"}),t._v("      "),n("el-link",{attrs:{type:"info"},on:{click:function(e){return t.openXterm(a)}}},[t._v(" "+t._s(t.$t("commons.status.initializing")))])],1):t._e(),"Terminating"===a.status?n("div",[n("i",{staticClass:"el-icon-loading"}),t._v("      "),n("el-link",{attrs:{type:"info"},on:{click:function(e){return t.openXterm(a)}}},[t._v(" "+t._s(t.$t("commons.status.terminating")))])],1):t._e(),"Failed"===a.status?n("div",[n("span",{staticClass:"iconfont iconerror",staticStyle:{color:"#FA4147"}}),t._v("       "),n("el-link",{attrs:{type:"info"},on:{click:function(e){return t.getErrorInfo(a)}}},[t._v(t._s(t.$t("commons.status.failed")))])],1):t._e(),"Running"==a.status?n("div",[n("span",{staticClass:"iconfont iconduihao",staticStyle:{color:"#32B350"}}),t._v(" "+t._s(t.$t("commons.status.running"))+" ")]):t._e(),"NotReady"==a.status?n("div",[n("span",{staticClass:"iconfont iconerror",staticStyle:{color:"#FA4147"}}),t._v(" "+t._s(t.$t("commons.status.not_ready"))+" ")]):t._e(),"Synchronizing"===a.status?n("div",[n("i",{staticClass:"el-icon-loading"}),t._v("      "),n("span",[t._v(t._s(t.$t("commons.status.synchronizing")))])]):t._e(),"Creating"===a.status?n("div",[n("i",{staticClass:"el-icon-loading"}),t._v("      "),n("span",[t._v(t._s(t.$t("commons.status.creating")))])]):t._e(),"Waiting"===a.status?n("div",[n("i",{staticClass:"el-icon-loading"}),t._v("      "),n("span",[t._v(t._s(t.$t("commons.status.waiting")))])]):t._e()]}}])}),n("el-table-column",{attrs:{label:t.$t("commons.table.create_time")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(t._f("datetimeFormat")(n.createdAt))+" ")]}}])}),n("fu-table-operations",{attrs:{buttons:t.buttons_provisioner,label:t.$t("commons.table.action"),fix:""}})],1)],2)],1)],1)],1),n("el-dialog",{attrs:{title:t.$t("commons.button.sync"),width:"30%",visible:t.dialogSyncVisible},on:{"update:visible":function(e){t.dialogSyncVisible=e}}},[n("span",[t._v(t._s(t.$t("cluster.detail.storage.ensure_provisioner_sync")))]),t._l(t.provisionerSelection,(function(e){return n("ul",{key:e.name,staticStyle:{"margin-left":"5%"}},[n("li",[t._v(t._s(e.name)+" ("+t._s(e.type)+")")])])})),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogSyncVisible=!1}}},[t._v(t._s(t.$t("commons.button.cancel")))]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitSync()}}},[t._v(t._s(t.$t("commons.button.ok")))])],1)],2),n("el-dialog",{attrs:{title:t.$t("cluster.detail.tool.err_title"),width:"50%",visible:t.dialogErrorVisible},on:{"update:visible":function(e){t.dialogErrorVisible=e}}},[n("div",{staticStyle:{margin:"0 50px"}},[n("span",{staticStyle:{"line-height":"30px"}},[t._v(t._s(t._f("errorFormat")(t.errMsg)))])]),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogErrorVisible=!1}}},[t._v(t._s(t.$t("commons.button.cancel")))])],1)])],1)},o=[],i=n("30d5"),s=(n("2769"),n("ecf1"),n("f5bd"),n("6afd"),n("86ca")),r=n("4e53"),c=n("7ea2"),l=n("2429"),u={name:"ClusterStorage",components:{ComplexTable:s["a"],K8sPage:r["a"]},data:function(){var t=this;return{buttons_pv:[{label:this.$t("commons.button.delete"),icon:"el-icon-delete",click:function(e){t.onDelete(e,"pv",!1)}}],buttons_class:[{label:this.$t("commons.button.delete"),icon:"el-icon-delete",click:function(e){t.onDelete(e,"class",!1)}}],buttons_provisioner:[{label:this.$t("commons.button.delete"),icon:"el-icon-delete",click:function(e){t.onDelete(e,"provisioner",!1)},disabled:function(t){return"Running"!==t.status&&"Failed"!==t.status&&"NotReady"!==t.status}}],pvPage:{continueToken:"",nextToken:""},classPage:{continueToken:"",nextToken:""},provider:null,loading:!1,provisionerDatas:[],pvDatas:[],storageClassDatas:[],clusterName:"",pvSelection:[],classSelection:[],provisionerSelection:[],dialogDeleteVisible:!1,dialogSyncVisible:!1,dialogErrorVisible:!1,errMsg:"",activeName:"pv",timer:{}}},methods:{search:function(){var t=this;this.loading=!0,"pv"===this.activeName?Object(l["i"])(this.clusterName,this.pvPage.continueToken).then((function(e){t.loading=!1,t.pvDatas=e.items,t.pvPage.nextToken=e.metadata["continue"]?e.metadata["continue"]:""})).catch((function(){t.loading=!1})):"storage_class"===this.activeName?Object(l["k"])(this.clusterName,this.classPage.continueToken,!1).then((function(e){t.loading=!1,t.storageClassDatas=e.items,t.classPage.nextToken=e.metadata["continue"]?e.metadata["continue"]:""})).catch((function(){t.loading=!1})):"provisioner"===this.activeName&&Object(l["j"])(this.clusterName).then((function(e){t.loading=!1,t.provisionerDatas=e})).catch((function(){t.loading=!1}))},getCluster:function(){var t=this;Object(c["e"])(this.clusterName).then((function(e){t.provider=e.spec.provider}))},getErrorInfo:function(t){this.dialogErrorVisible=!0,this.errMsg=t.message},classPageChange:function(t){this.classPage.continueToken=t.token,this.search()},pvPageChange:function(t){this.pvPage.continueToken=t.token,this.search()},handleClick:function(){localStorage.setItem("storage_active_name",this.activeName),this.search()},pvCreate:function(){this.$router.push({name:"ClusterStoragePvCreate"})},classCreate:function(){this.$router.push({name:"ClusterStorageClassCreate"})},provisionerCreate:function(){this.$router.push({name:"ClusterStorageProvionerCreate"})},onDelete:function(t,e,n){var a=this;n?this.submitDelete(t,e):this.$confirm(this.$t("commons.confirm_message.delete"),this.$t("commons.button.delete"),{confirmButtonText:this.$t("commons.button.ok"),cancelButtonText:this.$t("commons.button.cancel"),type:"warning"}).then((function(){a.dialogDeleteVisible=!1,a.submitDelete(t,e)}))},submitDelete:function(t,e){var n=this;switch(e){case"provisioner":Object(l["k"])(this.clusterName).then((function(e){var a,o=!1,s=Object(i["a"])(e.items);try{for(s.s();!(a=s.n()).done;){var r=a.value;if(r.provisioner===t.name){o=!0;break}}}catch(c){s.e(c)}finally{s.f()}o?n.$message({type:"error",message:n.$t("cluster.detail.storage.storage_class_exist")}):Object(l["f"])(n.clusterName,t).then((function(){n.$message({type:"success",message:n.$t("commons.msg.op_success")}),n.search()}))}));break;case"class":if("kubernetes.io/glusterfs"===t.provisioner){var a=t.parameters.secretNamespace,o=t.parameters.secretName;Object(l["g"])(this.clusterName,a,o).then((function(){n.deleteClass(t.metadata.name)}))}else this.deleteClass(t.metadata.name);break;case"pv":Object(l["e"])(this.clusterName,t.metadata.name).then((function(){n.$message({type:"success",message:n.$t("commons.msg.op_success")}),n.search()}));break}},onBatchDelete:function(t){var e=this;this.$confirm(this.$t("commons.confirm_message.delete"),this.$t("commons.button.delete"),{confirmButtonText:this.$t("commons.button.ok"),cancelButtonText:this.$t("commons.button.cancel"),type:"warning"}).then((function(){switch(t){case"pv":e.pvSelection.forEach((function(t){e.onDelete(t,"pv",!0)}));break;case"class":e.classSelection.forEach((function(t){e.onDelete(t,"class",!0)}));break;case"provisioner":e.provisionerSelection.forEach((function(t){e.onDelete(t,"provisioner",!0)}));break}}))},deleteClass:function(t){var e=this;Object(l["h"])(this.clusterName,t).then((function(){e.$message({type:"success",message:e.$t("commons.msg.op_success")}),e.search()}))},openXterm:function(t){Object(c["n"])(this.clusterName,t.id)},onSync:function(){this.dialogSyncVisible=!0},submitSync:function(){var t=this;Object(l["l"])(this.clusterName,this.provisionerSelection).then((function(){t.search(),t.$message({type:"success",message:t.$t("cluster.detail.storage.start_provisioner_sync")}),t.dialogSyncVisible=!1,t.provisionerSelection=[]})).catch((function(){t.provisionerSelection=[]}))},polling:function(){var t=this;this.timer=setInterval((function(){var e,n=!1,a=["Initializing","Terminating","Synchronizing","Creating","Waiting"],o=Object(i["a"])(t.provisionerDatas);try{for(o.s();!(e=o.n()).done;){var s=e.value;if(-1!==a.indexOf(s.status)){n=!0;break}}}catch(r){o.e(r)}finally{o.f()}n&&Object(l["j"])(t.clusterName).then((function(e){t.provisionerDatas=e}))}),1e4)}},created:function(){this.clusterName=this.$route.params.name,localStorage.getItem("storage_active_name")&&(this.activeName=localStorage.getItem("storage_active_name")),this.getCluster(),this.search(),this.polling()},destroyed:function(){clearInterval(this.timer)}},m=u,p=n("5d22"),f=Object(p["a"])(m,a,o,!1,null,"2936b669",null);e["default"]=f.exports},ecf1:function(t,e,n){"use strict";var a=n("6c87"),o=n("9f69"),i=n("e08f"),s=n("78d4"),r=n("1392");a("search",(function(t,e,n){return[function(e){var n=i(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,n):new RegExp(e)[t](String(n))},function(t){var a=n(e,this,t);if(a.done)return a.value;var i=o(this),c=String(t),l=i.lastIndex;s(l,0)||(i.lastIndex=0);var u=r(i,c);return s(i.lastIndex,l)||(i.lastIndex=l),null===u?-1:u.index}]}))}}]);
//# sourceMappingURL=chunk-31f05a45.c339d775.js.map