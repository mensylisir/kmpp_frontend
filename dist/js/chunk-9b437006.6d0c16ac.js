(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9b437006"],{"0280":function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"c",(function(){return o})),r.d(t,"e",(function(){return l})),r.d(t,"b",(function(){return s})),r.d(t,"d",(function(){return u}));r("a5c9");var n=r("ff66"),a="/api/v1/backupaccounts";function c(e){return Object(n["e"])("".concat(a),e)}function o(e){return Object(n["e"])("".concat(a,"/buckets"),e)}function l(e,t){return Object(n["d"])("".concat(a,"/").concat(e),t)}function s(e){return Object(n["b"])("".concat(a,"/").concat(e))}function u(e,t,r){return Object(n["e"])("".concat(a,"/search?pageNum=").concat(e,"&pageSize=").concat(t),r)}},2621:function(e,t,r){"use strict";var n=r("e450"),a=r("4582"),c=r("4b3a"),o=r("104f"),l=[].join,s=a!=Object,u=o("join",",");n({target:"Array",proto:!0,forced:s||!u},{join:function(e){return l.call(c(this),void 0===e?",":e)}})},4839:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("layout-content",{attrs:{header:e.$t("commons.button.create"),"back-to":{name:"BackupAccount"}}},[r("el-row",[r("el-col",{attrs:{span:4}},[r("br")]),r("el-col",{attrs:{span:10}},[r("div",{staticClass:"grid-content bg-purple-light"},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{"label-position":"left",rules:e.rules,model:e.form,"label-width":"160px"}},[r("el-form-item",{attrs:{label:e.$t("commons.table.name"),prop:"name"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),r("div",[r("span",{staticClass:"input-help"},[e._v(e._s(e.$t("commons.validate.name_help")))])])],1),r("el-form-item",{attrs:{label:e.$t("commons.table.type"),required:""}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("commons.validate.select")},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeOptions,(function(e){return r("el-option",{key:e.value,attrs:{value:e.value,label:e.label,disabled:e.disabled}})})),1)],1),"OSS"===e.form.type||"S3"===e.form.type?r("el-form-item",{attrs:{label:"AccessKey",prop:"credentialVars.accessKey"}},[r("el-input",{model:{value:e.form.credentialVars["accessKey"],callback:function(t){e.$set(e.form.credentialVars,"accessKey",t)},expression:"form.credentialVars['accessKey']"}})],1):e._e(),"OSS"===e.form.type||"S3"===e.form.type?r("el-form-item",{attrs:{label:"SecretKey",prop:"credentialVars.secretKey"}},[r("el-input",{attrs:{type:"password"},model:{value:e.form.credentialVars["secretKey"],callback:function(t){e.$set(e.form.credentialVars,"secretKey",t)},expression:"form.credentialVars['secretKey']"}})],1):e._e(),"AZURE"===e.form.type?r("el-form-item",{attrs:{label:e.$t("backup_account.table.accountName"),prop:"credentialVars.accountName"}},[r("el-input",{model:{value:e.form.credentialVars["accountName"],callback:function(t){e.$set(e.form.credentialVars,"accountName",t)},expression:"form.credentialVars['accountName']"}})],1):e._e(),"AZURE"===e.form.type?r("el-form-item",{attrs:{label:e.$t("backup_account.table.accountKey"),prop:"credentialVars.accountKey"}},[r("el-input",{attrs:{type:"password"},model:{value:e.form.credentialVars["accountKey"],callback:function(t){e.$set(e.form.credentialVars,"accountKey",t)},expression:"form.credentialVars['accountKey']"}})],1):e._e(),"S3"===e.form.type?r("el-form-item",{attrs:{label:e.$t("backup_account.table.region"),prop:"credentialVars.region"}},[r("el-input",{model:{value:e.form.credentialVars["region"],callback:function(t){e.$set(e.form.credentialVars,"region",t)},expression:"form.credentialVars['region']"}})],1):e._e(),"SFTP"!==e.form.type?r("el-form-item",{attrs:{label:e.$t("backup_account.table.endpoint"),prop:"credentialVars.endpoint"}},[r("el-input",{model:{value:e.form.credentialVars["endpoint"],callback:function(t){e.$set(e.form.credentialVars,"endpoint",t)},expression:"form.credentialVars['endpoint']"}})],1):e._e(),"SFTP"!==e.form.type?r("el-form-item",{attrs:{label:e.$t("backup_account.table.bucket"),prop:"bucket"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("commons.validate.select")},model:{value:e.form.bucket,callback:function(t){e.$set(e.form,"bucket",t)},expression:"form.bucket"}},e._l(e.buckets,(function(e){return r("el-option",{key:e,attrs:{value:e}})})),1)],1):e._e(),"SFTP"===e.form.type?r("div",[r("el-form-item",{attrs:{label:e.$t("backup_account.table.address"),prop:"credentialVars.address"}},[r("el-input",{attrs:{placeholder:"172.16.10.100"},model:{value:e.form.credentialVars["address"],callback:function(t){e.$set(e.form.credentialVars,"address",t)},expression:"form.credentialVars['address']"}})],1),r("el-form-item",{attrs:{label:e.$t("backup_account.table.port"),prop:"credentialVars.port"}},[r("el-input-number",{attrs:{min:0,max:65535},model:{value:e.form.credentialVars["port"],callback:function(t){e.$set(e.form.credentialVars,"port",t)},expression:"form.credentialVars['port']"}})],1),r("el-form-item",{attrs:{label:e.$t("backup_account.table.username"),prop:"credentialVars.username"}},[r("el-input",{model:{value:e.form.credentialVars["username"],callback:function(t){e.$set(e.form.credentialVars,"username",t)},expression:"form.credentialVars['username']"}})],1),r("el-form-item",{attrs:{label:e.$t("backup_account.table.password"),prop:"credentialVars.password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.form.credentialVars["password"],callback:function(t){e.$set(e.form.credentialVars,"password",t)},expression:"form.credentialVars['password']"}})],1),r("el-form-item",{attrs:{label:e.$t("backup_account.table.path"),prop:"bucket"}},[r("el-input",{model:{value:e.form.bucket,callback:function(t){e.$set(e.form,"bucket",t)},expression:"form.bucket"}})],1)],1):e._e(),r("el-form-item",{attrs:{label:e.$t("host.project_auth"),prop:"projects",required:""}},[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","reserve-keyword":""},on:{change:e.getClusters},model:{value:e.form.projects,callback:function(t){e.$set(e.form,"projects",t)},expression:"form.projects"}},e._l(e.projects,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),r("el-form-item",{attrs:{label:e.$t("host.cluster_auth"),prop:"clusters"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","reserve-keyword":""},model:{value:e.form.clusters,callback:function(t){e.$set(e.form,"clusters",t)},expression:"form.clusters"}},e._l(e.clusters,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),r("div",{staticStyle:{float:"right"}},[r("el-form-item",["SFTP"!==e.form.type?r("el-button",{attrs:{plain:""},on:{click:e.getBuckets}},[e._v(e._s(e.$t("commons.button.getBucket")))]):e._e(),r("el-button",{on:{click:function(t){return e.onCancel()}}},[e._v(e._s(e.$t("commons.button.cancel")))]),r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("commons.button.submit")))])],1)],1)],1)],1)]),r("el-col",{attrs:{span:4}},[r("br")])],1)],1)},a=[],c=r("30d5"),o=(r("b1fa"),r("f5bd"),r("2621"),r("be17")),l=r("0280"),s=r("7273"),u=r("7ea2"),i=r("0792"),m={name:"RegistryCreate",components:{LayoutContent:o["a"]},props:["dialogFormVisible"],data:function(){return{form:{projects:[],clusters:[],name:"",type:"",bucket:"",credentialVars:{}},rules:{name:[i["a"].NameRule],bucket:[i["a"].RequiredRule],credentialVars:{accessKey:[i["a"].RequiredRule],secretKey:[i["a"].RequiredRule],accountName:[i["a"].RequiredRule],accountKey:[i["a"].RequiredRule],region:[i["a"].RequiredRule],endpoint:[i["a"].RequiredRule],port:[i["a"].RequiredRule],username:[i["a"].RequiredRule],address:[i["a"].RequiredRule],password:[i["a"].RequiredRule]}},typeOptions:[{value:"OSS"},{value:"S3"},{value:"SFTP"},{label:"Azure",value:"AZURE"}],formLabelWidth:"120px",buckets:[],loading:!1,projects:[],clusters:[]}},methods:{onSubmit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.loading=!0,Object(l["a"])({bucket:e.form.bucket,credentialVars:e.form.credentialVars,name:e.form.name,type:e.form.type,projects:e.form.projects,clusters:e.form.clusters}).then((function(){e.loading=!1,e.$message({type:"success",message:e.$t("commons.msg.create_success")}),e.$router.push({name:"BackupAccount"})})).finally((function(){e.loading=!1}))}))},onCancel:function(){this.$router.push({name:"BackupAccount"})},getClusters:function(){var e=this;if(this.clusters=[],this.form.clusters=[],0!==this.form.projects.length){var t=this.form.projects.join(",");Object(u["g"])(t).then((function(t){e.clusters=[];var r,n=Object(c["a"])(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;e.clusters.push(a.name)}}catch(o){n.e(o)}finally{n.f()}}))}},getBuckets:function(){var e=this;this.loading=!0,Object(l["c"])({name:this.form.name,type:this.form.type,credentialVars:this.form.credentialVars}).then((function(t){e.loading=!1,e.buckets=t})).finally((function(){e.loading=!1}))}},created:function(){var e=this;this.form.type="SFTP",Object(s["a"])().then((function(t){e.projects=t.items}))}},f=m,p=r("5d22"),d=Object(p["a"])(f,n,a,!1,null,"2da58f77",null);t["default"]=d.exports},"7ea2":function(e,t,r){"use strict";r.d(t,"f",(function(){return l})),r.d(t,"g",(function(){return s})),r.d(t,"b",(function(){return u})),r.d(t,"q",(function(){return i})),r.d(t,"d",(function(){return m})),r.d(t,"l",(function(){return f})),r.d(t,"c",(function(){return p})),r.d(t,"e",(function(){return d})),r.d(t,"m",(function(){return b})),r.d(t,"a",(function(){return y})),r.d(t,"n",(function(){return k})),r.d(t,"r",(function(){return v})),r.d(t,"i",(function(){return h})),r.d(t,"h",(function(){return g})),r.d(t,"j",(function(){return V})),r.d(t,"o",(function(){return j})),r.d(t,"p",(function(){return _})),r.d(t,"k",(function(){return $}));r("a5c9"),r("2769"),r("0756");var n=r("ff66"),a="/api/v1/clusters",c="/api/v1/clusters/logger/{cluster_name}",o="/api/v1/clusters/provisioner/log/{cluster_name}/{log_id}";function l(e){return Object(n["c"])("".concat(a,"/").concat(e))}function s(e){return Object(n["c"])("".concat(a,"/name/").concat(e))}function u(e){return Object(n["c"])("".concat(a,"/existence/").concat(e))}function i(e,t,r){return Object(n["e"])("".concat(a,"/search?pageNum=").concat(e,"&pageSize=").concat(t),r)}function m(e){return Object(n["e"])("".concat(a),e)}function f(e){return Object(n["c"])("".concat(a,"/health/").concat(e))}function p(e){return Object(n["e"])("".concat(a,"/recover/").concat(e),{})}function d(e,t){return Object(n["b"])("".concat(a,"/").concat(e,"?force=").concat(t))}function b(e){return Object(n["e"])("".concat(a,"/import/"),e)}function y(){return Object(n["c"])("".concat(a))}function k(e){return Object(n["e"])("".concat(a,"/init/").concat(e,"/"),{})}function v(e,t){var r={clusterName:e,version:t};return Object(n["e"])("".concat(a,"/upgrade/"),r)}function h(e){return Object(n["c"])("".concat(a,"/status/").concat(e))}function g(e){return Object(n["c"])(c.replace("{cluster_name}",e))}function V(e,t){return Object(n["c"])(o.replace("{cluster_name}",e).replace("{log_id}",t))}function j(e){window.open("/ui/#/logger?clusterName=".concat(e),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function _(e,t){window.open("/ui/#/logger?clusterName=".concat(e,"&logId=").concat(t),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function $(e){return Object(n["c"])("".concat(a,"/secret/").concat(e))}}}]);
//# sourceMappingURL=chunk-9b437006.6d0c16ac.js.map