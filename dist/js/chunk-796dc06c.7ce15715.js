(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-796dc06c"],{"0600":function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));n("2769"),n("0756");var c=n("ff66"),r="/proxy/kubernetes/{cluster_name}/{resource_url}",a="api/v1/namespaces",s="api/v1/namespaces/{namespace}";function o(e){var t=r.replace("{cluster_name}",e).replace("{resource_url}",a);return Object(c["c"])(t)}function u(e,t){var n=r.replace("{cluster_name}",e).replace("{resource_url}",a);return Object(c["e"])(n,t)}function l(e,t){var n=r.replace("{cluster_name}",e).replace("{resource_url}",s).replace("{namespace}",t);return Object(c["b"])(n)}},6444:function(e,t,n){"use strict";n("bd10")},"7ea2":function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"q",(function(){return i})),n.d(t,"d",(function(){return p})),n.d(t,"l",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return m})),n.d(t,"m",(function(){return v})),n.d(t,"a",(function(){return _})),n.d(t,"n",(function(){return h})),n.d(t,"r",(function(){return b})),n.d(t,"i",(function(){return g})),n.d(t,"h",(function(){return w})),n.d(t,"j",(function(){return y})),n.d(t,"o",(function(){return N})),n.d(t,"p",(function(){return j})),n.d(t,"k",(function(){return O}));n("a5c9"),n("2769"),n("0756");var c=n("ff66"),r="/api/v1/clusters",a="/api/v1/clusters/logger/{cluster_name}",s="/api/v1/clusters/provisioner/log/{cluster_name}/{log_id}";function o(e){return Object(c["c"])("".concat(r,"/").concat(e))}function u(e){return Object(c["c"])("".concat(r,"/name/").concat(e))}function l(e){return Object(c["c"])("".concat(r,"/existence/").concat(e))}function i(e,t,n){return Object(c["e"])("".concat(r,"/search?pageNum=").concat(e,"&pageSize=").concat(t),n)}function p(e){return Object(c["e"])("".concat(r),e)}function d(e){return Object(c["c"])("".concat(r,"/health/").concat(e))}function f(e){return Object(c["e"])("".concat(r,"/recover/").concat(e),{})}function m(e,t){return Object(c["b"])("".concat(r,"/").concat(e,"?force=").concat(t))}function v(e){return Object(c["e"])("".concat(r,"/import/"),e)}function _(){return Object(c["c"])("".concat(r))}function h(e){return Object(c["e"])("".concat(r,"/init/").concat(e,"/"),{})}function b(e,t){var n={clusterName:e,version:t};return Object(c["e"])("".concat(r,"/upgrade/"),n)}function g(e){return Object(c["c"])("".concat(r,"/status/").concat(e))}function w(e){return Object(c["c"])(a.replace("{cluster_name}",e))}function y(e,t){return Object(c["c"])(s.replace("{cluster_name}",e).replace("{log_id}",t))}function N(e){window.open("/ui/#/logger?clusterName=".concat(e),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function j(e,t){window.open("/ui/#/logger?clusterName=".concat(e,"&logId=").concat(t),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function O(e){return Object(c["c"])("".concat(r,"/secret/").concat(e))}},bd10:function(e,t,n){},cacb:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return p}));n("2769"),n("0756");var c=n("ff66"),r="/proxy/kubernetes/{cluster_name}/{resource_url}",a="apis/apps/v1/deployments",s="apis/apps/v1/namespaces/{namespace}/deployments",o="api/v1/pods",u="api/v1/namespaces/{namespace}/pods/";function l(e,t,n){var o=r.replace("{cluster_name}",e);return o=void 0!==n&&null!==n?o.replace("{resource_url}",s).replace("{namespace}",n):o.replace("{resource_url}",a),Object(c["c"])(o)}function i(e,t,n){var a=r.replace("{cluster_name}",e);return a=void 0!==n&&null!==n?a.replace("{resource_url}",u).replace("{namespace}",n):a.replace("{resource_url}",o),Object(c["c"])(a)}function p(e){return Object(c["c"])("/api/v1/clusters/webkubectl/".concat(e,"?l=zh-CN"))}},ebf3:function(e,t,n){"use strict";n.d(t,"g",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return v})),n.d(t,"e",(function(){return _})),n.d(t,"d",(function(){return h})),n.d(t,"f",(function(){return b})),n.d(t,"h",(function(){return g})),n.d(t,"c",(function(){return w})),n.d(t,"i",(function(){return y}));n("2769"),n("0756"),n("a5c9");var c=n("ff66"),r="/proxy/kubernetes/{cluster_name}/{resource_url}",a=10,s="/api/v1/nodes",o="api/v1/namespaces/{namespace}/pods/{pod}/eviction",u="apis/metrics.k8s.io/v1beta1/nodes",l="/api/v1/clusters/node/{clusterName}",i="/api/v1/clusters/node/detail/{clusterName}/{node}",p="/api/v1/clusters/node/batch/{clusterName}",d="/api/v1/clusters/node/recreate/{clusterName}/{node}";function f(e,t){var n=r.replace("{cluster_name}",e).replace("{resource_url}",u);return n+="?limit="+a,void 0!==t&&null!==t&&(n+="&continue="+t),Object(c["c"])(n)}function m(e,t,n){var a={"Content-Type":"application/strategic-merge-patch+json"},o=r.replace("{cluster_name}",e).replace("{resource_url}",s)+"/"+t;return Object(c["d"])(o,n,a)}function v(e,t,n,a){var s=r.replace("{cluster_name}",e).replace("{resource_url}",o).replace("{namespace}",t).replace("{pod}",n);return Object(c["e"])(s,a)}function _(e){return Object(c["c"])("/api/v1/clusters/node/".concat(e))}function h(e,t){var n=r.replace("{cluster_name}",e).replace("{resource_url}",s);return void 0!==t&&null!==t&&(n+="&continue="+t),Object(c["c"])(n)}function b(e,t,n){return Object(c["c"])(l.replace("{clusterName}",e)+"?pageNum=".concat(t,"&pageSize=").concat(n))}function g(e,t){return Object(c["e"])(p.replace("{clusterName}",e),t)}function w(e,t){return Object(c["c"])(i.replace("{clusterName}",e).replace("{node}",t))}function y(e,t){return Object(c["e"])(d.replace("{clusterName}",e).replace("{node}",t))}},f2d8:function(e,t,n){"use strict";n.r(t);var c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"example"},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-card",{staticStyle:{height:"350px"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v(e._s(e.$t("cluster.detail.overview.base_info")))])]),n("div",[n("el-col",{attrs:{span:12}},[n("ul",[e._v(e._s(e.$t("cluster.creation.name")))]),n("ul",[e._v(e._s(e.$t("cluster.version")))]),n("ul",[e._v(e._s(e.$t("cluster.creation.arch")))]),n("ul",[e._v(e._s(e.$t("cluster.creation.network_type")))]),"local"===e.currentCluster.source?n("div",[n("ul",[e._v(e._s(e.$t("cluster.creation.flannel_backend")))]),n("ul",[e._v(e._s(e.$t("cluster.creation.proxy_mode")))])]):e._e(),n("ul",[e._v(e._s(e.$t("cluster.creation.runtime_type")))]),n("ul",[e._v(e._s(e.$t("cluster.detail.overview.source")))])]),n("el-col",{attrs:{span:12}},[n("ul",[e._v(e._s(e.currentCluster.name))]),n("ul",[e._v(e._s(e.currentCluster.spec.version))]),n("ul",[e._v(e._s(e.currentCluster.spec.architectures))]),n("ul",[e._v(e._s(e.currentCluster.spec.networkType))]),"local"===e.currentCluster.source?n("div",["flannel"===e.currentCluster.spec.networkType?n("ul",[e._v(e._s(e.currentCluster.spec.flannelBackend))]):e._e(),"calico"===e.currentCluster.spec.networkType&&"off"===e.currentCluster.spec.calicoIpv4PoolIpip?n("ul",[e._v("bgp")]):e._e(),"calico"===e.currentCluster.spec.networkType&&"Always"===e.currentCluster.spec.calicoIpv4PoolIpip?n("ul",[e._v("ipip")]):e._e(),n("ul",[e._v(e._s(e.currentCluster.spec.kubeProxyMode))])]):e._e(),n("ul",[e._v(e._s(e.currentCluster.spec.runtimeType))]),n("ul",[e._v(e._s(e.currentCluster.source))])])],1)])],1),n("el-col",{attrs:{span:12}},[n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_chart,expression:"loading_chart"}],staticStyle:{height:"350px"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v(e._s(e.$t("cluster.detail.overview.capacity_info")))])]),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{span:8}},[n("div",{attrs:{align:"center"}},[n("el-progress",{attrs:{"stroke-width":20,type:"circle",width:140,percentage:e.cpuUsagePercent}}),n("br"),n("span",{staticStyle:{"font-size":"24px"}},[e._v(e._s(e.$t("cluster.detail.overview.cpu")))])],1)]),n("el-col",{attrs:{span:8}},[n("div",{attrs:{align:"center"}},[n("el-progress",{attrs:{"stroke-width":20,type:"circle",width:140,percentage:e.memUsagePercent}}),n("br"),n("span",{staticStyle:{"font-size":"24px"}},[e._v(e._s(e.$t("cluster.detail.overview.memory")))])],1)]),n("el-col",{attrs:{span:8}},[n("div",{attrs:{align:"center"}},[n("el-progress",{attrs:{"stroke-width":20,type:"circle",width:140,percentage:e.podUsagePercent}}),n("br"),n("span",{staticStyle:{"font-size":"24px"}},[e._v(e._s(e.$t("cluster.detail.overview.docker")))])],1)])],1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-card",{staticStyle:{height:"350px"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v(e._s(e.$t("cluster.detail.overview.statistical_info")))])]),n("div",[n("el-col",{attrs:{span:12}},[n("ul",[e._v("Nodes")]),n("ul",[e._v("Namespaces")]),n("ul",[e._v("Deployments")]),n("ul",[e._v("Pods")]),n("ul",[e._v("Containers")])]),n("el-col",{attrs:{span:12}},[n("ul",[e._v(e._s(e.nodes.length))]),n("ul",[e._v(e._s(e.namespaces.length))]),n("ul",[e._v(e._s(e.deployments.length))]),n("ul",[e._v(e._s(e.pods.length))]),n("ul",[e._v(e._s(e.containerNumber))])])],1)])],1)],1)],1),n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_xterm,expression:"loading_xterm"}],staticStyle:{"margin-top":"20px"}},[n("div",{staticStyle:{height:"20px"},attrs:{slot:"header"},slot:"header"},[e.opened?e._e():n("el-button",{staticStyle:{float:"right"},on:{click:function(t){return e.onOpen()}}},[e._v(e._s(e.$t("cluster.detail.overview.connect")))]),e.opened?n("el-tooltip",{attrs:{effect:"dark",content:e.$t("cluster.detail.overview.open_in_new_windows"),placement:"bottom"}},[n("el-button",{staticStyle:{float:"right"},on:{click:function(t){return e.newWindow()}}},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#iconchuangkou"}})])])],1):e._e(),"local"===e.currentCluster.source?n("el-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{icon:"el-icon-document"},on:{click:function(t){return e.downloadKubeConfig()}}},[e._v(e._s(e.$t("cluster.detail.overview.download_kube_config")))]):e._e()],1),e.opened?n("div",[n("iframe",{staticStyle:{width:"100%",height:"512px"},attrs:{src:e.url}})]):e._e()])],1)},r=[],a=(n("f5bd"),n("6afd"),n("e1d4"),n("2769"),n("0756"),n("ecf1"),n("cacb")),s=n("ebf3"),o=n("0600"),u=n("7ea2"),l={name:"ClusterOverview",data:function(){return{loading_chart:!1,loading_xterm:!1,clusterName:"",currentCluster:{name:"",spec:{version:"",architectures:"",networkType:"",kubeProxyMode:"",runtimeType:"",flannelBackend:"",calicoIpv4PoolIpip:""},source:""},namespaces:[],pods:[],nodes:[],deployments:[],containerNumber:0,cpuTotal:0,cpuUsage:0,cpuUsagePercent:0,memTotal:0,memUsage:0,memUsagePercent:0,podLimit:0,podUsagePercent:0,opened:!1,url:""}},methods:{downloadKubeConfig:function(){window.open("/api/v1/clusters/kubeconfig/".concat(this.clusterName),"_blank")},search:function(){var e=this;this.loading_chart=!0,this.clusterName=this.$route.params.name,Object(u["f"])(this.clusterName).then((function(t){e.currentCluster=t})),this.loadNameSpaces(),this.loadNodes(),this.loadDeployments()},onOpen:function(){var e=this;this.loading_xterm=!0,this.opened=!0,Object(a["a"])(this.clusterName).then((function(t){e.url="/webkubectl/terminal/?token="+t.token,e.loading_xterm=!1}))},newWindow:function(){var e=this;this.opened=!0,Object(a["a"])(this.clusterName).then((function(t){e.url="/webkubectl/terminal/?token=".concat(t.token),window.open(e.url,"_blank","weight=300,height=200,alwaysRaised=yes,depended=yes")}))},loadNameSpaces:function(){var e=this;Object(o["c"])(this.clusterName).then((function(t){e.namespaces=t.items}))},loadPods:function(){var e=this;Object(a["c"])(this.clusterName).then((function(t){e.pods=t.items,e.pods.forEach((function(t){e.containerNumber=e.containerNumber+t.spec.containers.length})),e.podUsagePercent=Math.round(e.pods.length/e.podLimit*100)}))},loadNodes:function(){var e=this;Object(s["d"])(this.clusterName).then((function(t){e.nodes=t.items,e.nodes.forEach((function(t){e.cpuTotal=e.cpuTotal+Number(t.status.capacity.cpu);var n=t.status.capacity.memory.replace("Ki","");e.memTotal=e.memTotal+Number(n),e.podLimit=e.podLimit+Number(t.status.capacity.pods)})),e.loadNodesUsages(),e.loadPods()}))},loadDeployments:function(){var e=this;Object(a["b"])(this.clusterName).then((function(t){e.deployments=t.items}))},loadNodesUsages:function(){var e=this;Object(s["g"])(this.clusterName).then((function(t){var n=t.items;n.forEach((function(t){var n=t.usage.cpu.replace("n","");e.cpuUsage=e.cpuUsage+Number(n);var c=t.usage.memory.replace("Ki","");e.memUsage=e.memUsage+Number(c)})),e.cpuUsage=e.cpuUsage/1e9,e.memUsagePercent=Math.round(e.memUsage/e.memTotal*100),e.cpuUsagePercent=Math.round(e.cpuUsage/e.cpuTotal*100),e.loading_chart=!1}))}},mounted:function(){this.search()}},i=l,p=(n("6444"),n("5d22")),d=Object(p["a"])(i,c,r,!1,null,"5282fd68",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-796dc06c.7ce15715.js.map