(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7443fa72"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"7cd8":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-card",[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:12}},[a("div",{attrs:{align:"center"}},[a("span",{staticStyle:{"font-size":"144px"}},[t._v(t._s(t.gradeInfo.grade))]),a("br"),a("br")]),a("div",{attrs:{align:"center"}},[a("span",{staticStyle:{"font-size":"24px"}},[t._v(t._s(t.gradeInfo.score))])])]),a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{width:"100%",height:"250px","margin-top":"40px"},attrs:{id:"pieChartOptions"}})])],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-card",[a("div",{staticStyle:{width:"100%",height:"250px","margin-top":"40px"},attrs:{id:"barChartOptions"}})])],1)],1),t._l(t.gradeInfo.results,(function(e){return a("div",{key:e.namespace},[a("el-card",{staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(e.namespace))])]),t._l(e.results,(function(e){return a("el-collapse",{key:e.name},[a("el-collapse-item",{attrs:{title:e.kind+":"+e.name,name:e.name}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticStyle:{"font-size":"24px"}},[t._v("Pod Sec")])]),a("el-col",{attrs:{span:12}},[a("ul",{staticClass:"list-unstyled"},t._l(e.podResults,(function(e){return a("li",{key:e.name},["danger"===e.severity?a("span",[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"red"}}),t._v(t._s(e.message))]):t._e(),"warning"===e.severity?a("span",[a("i",{staticClass:"el-icon-question",staticStyle:{color:"blue"}}),t._v(t._s(e.message))]):t._e(),"pass"===e.severity?a("span",[a("i",{staticClass:"el-icon-success",staticStyle:{color:"green"}}),t._v(t._s(e.message))]):t._e()])})),0)])],1)],1)],1)}))],2)],1)}))],2)},i=[],r=(a("ac1f"),a("5319"),a("b0c0"),a("841c"),a("ff66")),n="/api/v1/clusters/grade";function l(t){var e="".concat(n,"/").concat(t);return Object(r["c"])(e)}var o=a("313e"),d={name:"ClusterGrade",data:function(){return{loading:!1,gradeInfo:{grade:"",score:0,totalSum:0,listSum:[],results:[]}}},methods:{search:function(){var t=this;this.loading=!0,l(this.clusterName).then((function(e){t.gradeInfo=e,t.initPieChart(t.gradeInfo),t.initBarChart(t.gradeInfo),t.gradeInfo.grade=t.getGrade(t.gradeInfo.score),t.loading=!1})).catch((function(){t.loading=!1}))},getGrade:function(t){return t>=97?"A+":t>=93?"A":t>=90?"A-":t>=87?"B+":t>=83?"B":t>=80?"B-":t>=77?"C+":t>=73?"C":t>=70?"C-":t>=67?"D+":t>=63?"D":t>=60?"D-":"F"},initBarChart:function(t){var e=o["init"](document.getElementById("barChartOptions")),a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:[this.$t("cluster.detail.grade.danger"),this.$t("cluster.detail.grade.warning"),this.$t("cluster.detail.grade.pass")]},color:["#F57660","#F8B96A","#90D072"],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:[]},series:[{name:this.$t("cluster.detail.grade.danger"),type:"bar",stack:this.$t("cluster.detail.grade.total"),label:{position:"insideRight"},data:[]},{name:this.$t("cluster.detail.grade.warning"),type:"bar",stack:this.$t("cluster.detail.grade.total"),label:{position:"insideRight"},data:[]},{name:this.$t("cluster.detail.grade.pass"),type:"bar",stack:this.$t("cluster.detail.grade.total"),label:{position:"insideRight"},data:[]}]};for(var s in t.listSum)s&&(a.yAxis.data.push(this.$t("cluster.detail.grade."+s.toLowerCase().replace(" ","_"))),a.series[0].data.push(t.listSum[s].danger),a.series[1].data.push(t.listSum[s].warning),a.series[2].data.push(t.listSum[s].success));e.setOption(a,!0)},initPieChart:function(t){var e=o["init"](document.getElementById("pieChartOptions")),a={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{data:[this.$t("cluster.detail.grade.danger"),this.$t("cluster.detail.grade.warning"),this.$t("cluster.detail.grade.pass")]},color:["#F57660","#F8B96A","#90D072"],series:[{name:this.$t("commons.table.type"),type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:[{value:t.totalSum.danger,name:this.$t("cluster.detail.grade.danger")},{value:t.totalSum.warning,name:this.$t("cluster.detail.grade.warning")},{value:t.totalSum.success,name:this.$t("cluster.detail.grade.pass")}]}]};e.setOption(a,!0)}},mounted:function(){this.clusterName=this.$route.params.name,this.search()}},c=d,u=a("2877"),g=Object(u["a"])(c,s,i,!1,null,"222b1578",null);e["default"]=g.exports},"841c":function(t,e,a){"use strict";var s=a("d784"),i=a("825a"),r=a("1d80"),n=a("129f"),l=a("577e"),o=a("14c3");s("search",(function(t,e,a){return[function(e){var a=r(this),s=void 0==e?void 0:e[t];return void 0!==s?s.call(e,a):new RegExp(e)[t](l(a))},function(t){var s=i(this),r=l(t),d=a(e,s,r);if(d.done)return d.value;var c=s.lastIndex;n(c,0)||(s.lastIndex=0);var u=o(s,r);return n(s.lastIndex,c)||(s.lastIndex=c),null===u?-1:u.index}]}))}}]);
//# sourceMappingURL=chunk-7443fa72.a46b480f.js.map