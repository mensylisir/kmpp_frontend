(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05e29a3e"],{"0dce":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("layout-content",{attrs:{header:t.$t("multi_cluster.multi_cluster")}},[n("relations-management",{attrs:{visible:t.relationManagementOpened,name:t.currentRepositoryName},on:{"update:visible":function(e){t.relationManagementOpened=e}}}),n("repository-error-message",{attrs:{visible:t.repositoryErrorMessageOpened,message:t.errorMessage},on:{"update:visible":function(e){t.repositoryErrorMessageOpened=e}}}),n("complex-table",{attrs:{data:t.data,"local-key":"multi_cluster_columns","search-config":t.searchConfig,"pagination-config":t.paginationConfig},on:{search:t.search},scopedSlots:t._u([{key:"toolbar",fn:function(){return[n("el-button-group",[n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.create()}}},[t._v(t._s(t.$t("commons.button.create")))])],1)]},proxy:!0}])},[n("el-table-column",{attrs:{type:"selection",fix:""}}),n("el-table-column",{attrs:{label:t.$t("commons.table.name"),"mix-width":"100",fix:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(n.name)+" ")]}}])}),n("el-table-column",{attrs:{label:t.$t("multi_cluster.address"),"min-width":"100",prop:"source",fix:""}}),n("el-table-column",{attrs:{label:t.$t("commons.table.status"),"min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return["Running"===o.status?n("div",[n("span",{staticClass:"iconfont iconduihao",staticStyle:{color:"#32B350"}}),t._v(" "+t._s(t.$t("commons.status.running"))+" ")]):t._e(),"Initializing"===o.status?n("div",[n("i",{staticClass:"el-icon-loading"}),t._v("  "+t._s(t.$t("commons.status.initializing"))+" ")]):t._e(),"Failed"===o.status?n("div",[n("span",{staticClass:"iconfont iconerror",staticStyle:{color:"#FA4147"}}),t._v("       "),n("el-link",{attrs:{type:"info"},on:{click:function(e){return t.showErrorMessage(o)}}},[t._v(t._s(t.$t("commons.status.failed")))])],1):t._e()]}}])}),n("el-table-column",{attrs:{label:t.$t("commons.table.create_time")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(t._f("datetimeFormat")(n.createdAt))+" ")]}}])}),n("fu-table-operations",{attrs:{buttons:t.buttons,label:t.$t("commons.table.action"),fix:""}})],1)],1)},c=[],a=n("30d5"),i=(n("f5bd"),n("2769"),n("ecf1"),n("a5c9"),n("b1fa"),n("2e6f"),n("af21"),n("be17")),r=n("86ca"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.$t("multi_cluster.relation_management"),visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("el-transfer",{attrs:{sty:"",titles:[t.$t("multi_cluster.cluster_list"),t.$t("multi_cluster.cluster_list")],data:t.data},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(t._s(t.$t("commons.button.cancel")))]),n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(t._s(t.$t("commons.button.submit")))])],1)],1)},u=[],l=(n("6afd"),n("471b")),m=n("7ea2"),f={name:"RelationsManagement",props:{visible:Boolean,name:String},data:function(){return{loading:!1,data:[],value:[]}},watch:{visible:function(t){t&&this.generateData()}},methods:{generateData:function(){var t=this;this.loading=!0,this.data=[],this.value=[],Object(m["a"])().then((function(e){e.items.forEach((function(e){"Running"===e.status&&t.data.push({label:e.name,key:e.name})})),Object(l["g"])(t.name).then((function(e){e.items.forEach((function(e){t.value.push(e.clusterName)})),t.loading=!1}))}))},onSubmit:function(){var t=this;Object(l["i"])(this.name,{clusterNames:this.value}).then((function(){t.dialogVisible=!1})).catch((function(){t.generateData()}))}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},created:function(){}},d=f,b=n("5d22"),p=Object(b["a"])(d,s,u,!1,null,null,null),g=p.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.$t("commons.status.error"),visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-row",[t._v(" "+t._s(t.message)+" ")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(t._s(t.$t("commons.button.cancel")))])],1)],1)},v=[],_={name:"RepositoryErrorMessage",props:{visible:Boolean,message:String},data:function(){return{loading:!1}},watch:{},methods:{},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},created:function(){}},$=_,O=Object(b["a"])($,h,v,!1,null,null,null),y=O.exports,j={name:"MultiClusterRepositoriesList",components:{RepositoryErrorMessage:y,RelationsManagement:g,ComplexTable:r["a"],LayoutContent:i["a"]},data:function(){var t=this;return{relationManagementOpened:!1,repositoryErrorMessageOpened:!1,currentRepositoryName:"",errorMessage:"123",buttons:[{label:this.$t("commons.button.edit"),icon:"el-icon-edit",click:function(e){t.$router.push({name:"MultiClusterRepositoryEdit",params:{name:e.name}})}},{label:this.$t("commons.button.relation"),icon:"el-icon-connection",click:function(e){t.relationManagementOpened=!0,t.currentRepositoryName=e.name}},{label:this.$t("commons.button.log"),icon:"el-icon-notebook-2",click:function(e){t.$router.push({name:"MultiClusterRepositoryLog",params:{name:e.name}})}},{label:this.$t("commons.button.delete"),icon:"el-icon-delete",click:function(e){t.del(e.name)}}],searchConfig:{quickPlaceholder:this.$t("commons.search.quickSearch"),components:[{field:"name",label:this.$t("commons.table.name"),component:"FuComplexInput",defaultOperator:"eq"},{field:"is_active",label:this.$t("commons.table.status"),component:"FuComplexSelect",options:[{label:this.$t("commons.status.active"),value:1},{label:this.$t("commons.status.passive"),value:0}],multiple:!0},{field:"is_admin",label:this.$t("user.role"),component:"FuComplexSelect",options:[{label:this.$t("commons.role.admin"),value:1},{label:this.$t("commons.role.user"),value:0}],multiple:!0},{field:"created_at",label:this.$t("commons.table.create_time"),component:"FuComplexDateTime",valueFormat:"yyyy-MM-dd"}]},paginationConfig:{currentPage:1,pageSize:5,total:0},data:[]}},methods:{select:function(t){console.log(t)},showErrorMessage:function(t){this.errorMessage=t.message,this.repositoryErrorMessageOpened=!0},create:function(){this.$router.push({name:"MultiClusterRepositoryCreate"})},search:function(){var t=this,e=this.paginationConfig,n=e.currentPage,o=e.pageSize;Object(l["f"])(n,o).then((function(e){t.data=e.items,t.paginationConfig.total=e.total}))},del:function(t){var e=this;this.$confirm(this.$t("commons.confirm_message.delete"),this.$t("commons.message_box.prompt"),{confirmButtonText:this.$t("commons.button.confirm"),cancelButtonText:this.$t("commons.button.cancel"),type:"warning"}).then((function(){if(t)Object(l["b"])(t).then((function(){e.search(),e.$message({type:"success",message:"".concat(t).concat(e.$t("commons.msg.op_success"),"!")})}));else{var n,o=[],c=Object(a["a"])(e.selects);try{for(c.s();!(n=c.n()).done;){var i=n.value;o.push(Object(l["b"])(i.name))}}catch(r){c.e(r)}finally{c.f()}Promise.all(o).then((function(){e.search(),e.$message({type:"success",message:e.$t("commons.msg.op_success")})}))}}))}},created:function(){this.search()}},w=j,k=Object(b["a"])(w,o,c,!1,null,"3f37508a",null);e["default"]=k.exports},"471b":function(t,e,n){"use strict";n.d(e,"f",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s})),n.d(e,"h",(function(){return u})),n.d(e,"g",(function(){return l})),n.d(e,"i",(function(){return m})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return d}));n("a5c9");var o=n("ff66"),c="/api/v1/multicluster";function a(t,e){return Object(o["c"])("".concat(c,"/repositories?pageNum=").concat(t,"&pageSize=").concat(e))}function i(t){return Object(o["c"])("".concat(c,"/repositories/").concat(t))}function r(t){return Object(o["e"])("".concat(c,"/repositories"),t)}function s(t){return Object(o["b"])("".concat(c,"/repositories/").concat(t))}function u(t,e){return Object(o["d"])("".concat(c,"/repositories/").concat(t),e)}function l(t){return Object(o["c"])("".concat(c,"/repositories/relations/").concat(t))}function m(t,e){return Object(o["e"])("".concat(c,"/repositories/relations/").concat(t),e)}function f(t,e,n){return Object(o["c"])("".concat(c,"/repositories/logs/").concat(t,"?pageNum=").concat(e,"&pageSize=").concat(n))}function d(t,e){return Object(o["c"])("".concat(c,"/repositories/logs/detail/").concat(t,"/").concat(e))}},"7ea2":function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"g",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"q",(function(){return l})),n.d(e,"d",(function(){return m})),n.d(e,"l",(function(){return f})),n.d(e,"c",(function(){return d})),n.d(e,"e",(function(){return b})),n.d(e,"m",(function(){return p})),n.d(e,"a",(function(){return g})),n.d(e,"n",(function(){return h})),n.d(e,"r",(function(){return v})),n.d(e,"i",(function(){return _})),n.d(e,"h",(function(){return $})),n.d(e,"j",(function(){return O})),n.d(e,"o",(function(){return y})),n.d(e,"p",(function(){return j})),n.d(e,"k",(function(){return w}));n("a5c9"),n("2769"),n("0756");var o=n("ff66"),c="/api/v1/clusters",a="/api/v1/clusters/logger/{cluster_name}",i="/api/v1/clusters/provisioner/log/{cluster_name}/{log_id}";function r(t){return Object(o["c"])("".concat(c,"/").concat(t))}function s(t){return Object(o["c"])("".concat(c,"/name/").concat(t))}function u(t){return Object(o["c"])("".concat(c,"/existence/").concat(t))}function l(t,e,n){return Object(o["e"])("".concat(c,"/search?pageNum=").concat(t,"&pageSize=").concat(e),n)}function m(t){return Object(o["e"])("".concat(c),t)}function f(t){return Object(o["c"])("".concat(c,"/health/").concat(t))}function d(t){return Object(o["e"])("".concat(c,"/recover/").concat(t),{})}function b(t,e){return Object(o["b"])("".concat(c,"/").concat(t,"?force=").concat(e))}function p(t){return Object(o["e"])("".concat(c,"/import/"),t)}function g(){return Object(o["c"])("".concat(c))}function h(t){return Object(o["e"])("".concat(c,"/init/").concat(t,"/"),{})}function v(t,e){var n={clusterName:t,version:e};return Object(o["e"])("".concat(c,"/upgrade/"),n)}function _(t){return Object(o["c"])("".concat(c,"/status/").concat(t))}function $(t){return Object(o["c"])(a.replace("{cluster_name}",t))}function O(t,e){return Object(o["c"])(i.replace("{cluster_name}",t).replace("{log_id}",e))}function y(t){window.open("/ui/#/logger?clusterName=".concat(t),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function j(t,e){window.open("/ui/#/logger?clusterName=".concat(t,"&logId=").concat(e),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function w(t){return Object(o["c"])("".concat(c,"/secret/").concat(t))}}}]);
//# sourceMappingURL=chunk-05e29a3e.a8b52485.js.map