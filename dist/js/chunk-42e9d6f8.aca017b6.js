(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42e9d6f8"],{"0600":function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u}));n("2769"),n("0756");var a=n("ff66"),c="/proxy/kubernetes/{cluster_name}/{resource_url}",r="api/v1/namespaces",s="api/v1/namespaces/{namespace}";function o(e){var t=c.replace("{cluster_name}",e).replace("{resource_url}",r);return Object(a["c"])(t)}function i(e,t){var n=c.replace("{cluster_name}",e).replace("{resource_url}",r);return Object(a["e"])(n,t)}function u(e,t){var n=c.replace("{cluster_name}",e).replace("{resource_url}",s).replace("{namespace}",t);return Object(a["b"])(n)}},"4e53":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{staticStyle:{float:"right"},attrs:{disabled:!e.ko_nextToken||e.ko_btnLoading,size:"mini",icon:"el-icon-caret-right"},on:{click:function(t){return e.getPageNext()}}}),n("span",{staticStyle:{float:"right","margin-top":"7px"}},[e._v(e._s(e.ko_currentPage))]),n("el-button",{staticStyle:{float:"right"},attrs:{disabled:1===e.ko_currentPage||e.ko_btnLoading,size:"mini",icon:"el-icon-caret-left"},on:{click:function(t){return e.getPageAhead()}}})],1)},c=[],r=(n("e1d4"),{name:"K8sPage",props:{nextToken:String,currentPage:Number},watch:{nextToken:{handler:function(e){this.ko_nextToken=e},immediate:!0},currentPage:{handler:function(e){this.ko_currentPage=e||this.ko_currentPage},immediate:!0}},data:function(){return{ko_aheadToken:[],ko_continueToken:"",ko_nextToken:"",ko_currentPage:1,ko_btnLoading:!1}},methods:{getPageAhead:function(){this.ko_btnLoading=!0,this.ko_currentPage--,this.ko_continueToken=this.ko_aheadToken[this.ko_aheadToken.length-1],this.ko_aheadToken.pop(),this.$emit("pageChange",{token:this.ko_continueToken,page:this.ko_currentPage}),this.ko_btnLoading=!1},getPageNext:function(){this.ko_currentPage++,this.ko_aheadToken.push(this.ko_continueToken),this.ko_continueToken=this.ko_nextToken,this.$emit("pageChange",{token:this.ko_continueToken,page:this.ko_currentPage})}}}),s=r,o=n("5d22"),i=Object(o["a"])(s,a,c,!1,null,null,null);t["a"]=i.exports},5442:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("el-form",{attrs:{inline:!0}},[n("el-form-item",[n("el-select",{attrs:{size:"small","allow-create":"",filterable:""},on:{change:function(t){return e.changeNamespace()}},model:{value:e.currentNamespace,callback:function(t){e.currentNamespace=t},expression:"currentNamespace"}},e._l(e.namespaces,(function(e){return n("el-option",{key:e["metadata"].name,attrs:{label:e["metadata"].name,value:e["metadata"].name}})})),1)],1),n("el-form-item",{staticStyle:{float:"right"}},[n("el-switch",{attrs:{"active-text":e.$t("cluster.detail.event.enable_npd")},on:{change:function(t){return e.changeNpd()}},model:{value:e.isNPDon,callback:function(t){e.isNPDon=t},expression:"isNPDon"}})],1)],1),n("complex-table",{attrs:{data:e.data}},[n("el-table-column",{attrs:{label:e.$t("cluster.detail.event.msg_info"),"show-overflow-tooltip":"","min-width":"150",prop:"message",fix:""}}),n("el-table-column",{attrs:{label:e.$t("cluster.detail.event.msg_type"),"min-width":"80",prop:"type",fix:""}}),n("el-table-column",{attrs:{label:e.$t("cluster.detail.event.component"),"min-width":"80",prop:"source.component",fix:""}}),n("el-table-column",{attrs:{label:"Namespace","min-width":"80",prop:"metadata.namespace",fix:""}}),n("el-table-column",{attrs:{label:e.$t("cluster.detail.log.time")},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(e._f("datetimeFormat")(n.firstTimestamp))+" ")]}}])})],1),n("k8s-page",{attrs:{currentPage:e.page.currentPage,nextToken:e.page.nextToken},on:{pageChange:e.pageChange}})],1)},c=[],r=n("30d5"),s=(n("f5bd"),n("2769"),n("ecf1"),n("86ca")),o=n("0600"),i=n("cacb"),u=n("4e53"),l=(n("0756"),n("ff66")),p="/proxy/kubernetes/{cluster_name}/{resource_url}",m="api/v1/namespaces/{namespace}/events",d="/api/v1/clusters/events",h=10;function g(e,t,n){var a=p.replace("{cluster_name}",e);return a+="?limit="+h,t&&(a+="&continue="+t),a=n?a.replace("{resource_url}",m).replace("{namespace}",n):a.replace("{resource_url}",d),Object(l["c"])(a)}function f(e,t){var n="".concat(d,"/npd/").concat(t,"/")+e;return Object(l["e"])(n,{})}var k={name:"ClusterEvent",components:{ComplexTable:s["a"],K8sPage:u["a"]},data:function(){return{loading:!1,page:{continueToken:"",currentPage:1,nextToken:""},clusterName:"",namespaces:[],currentNamespace:"",isNPDon:!1,data:[]}},methods:{search:function(){var e=this;this.loading=!0,Object(o["c"])(this.clusterName).then((function(t){e.namespaces=t.items,t.items.length>0&&(e.currentNamespace=e.currentNamespace?e.currentNamespace:e.namespaces[0].metadata.name,e.loadEvents(e.currentNamespace))})).catch((function(){e.loading=!1})),this.getNpdExists()},pageChange:function(e){this.page.continueToken=e.token,this.page.currentPage=e.page,this.search()},loadEvents:function(e){var t=this;g(this.clusterName,this.page.continueToken,e).then((function(e){t.loading=!1,t.data=e.items,t.page.nextToken=e.metadata["continue"]?e.metadata["continue"]:""})).catch((function(){t.loading=!1}))},getNpdExists:function(){var e=this;Object(i["c"])(this.clusterName).then((function(t){var n,a=t.items,c=!1,s=Object(r["a"])(a);try{for(s.s();!(n=s.n()).done;){var o=n.value;if("node-problem-detector-"===o.metadata.generateName&&(c=!0,"Terminating"===o.status.phase)){e.isNPDon=!1,c=!1;break}}}catch(i){s.e(i)}finally{s.f()}c&&(e.isNPDon=!0)}))},changeNpd:function(){var e=this,t=this.isNPDon?"create":"delete";f(this.clusterName,t).then((function(){"delete"!==t?e.$message({type:"success",message:e.$t("cluster.detail.event.enable_npd_success")}):e.$message({type:"success",message:e.$t("cluster.detail.event.disable_npd_success")})}))},changeNamespace:function(){this.loading=!0,this.page.currentPage=1,this.page.continueToken="",this.loadEvents(this.currentNamespace)}},created:function(){this.clusterName=this.$route.params.name,this.search()}},_=k,b=n("5d22"),v=Object(b["a"])(_,a,c,!1,null,"69891b17",null);t["default"]=v.exports},cacb:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return p}));n("2769"),n("0756");var a=n("ff66"),c="/proxy/kubernetes/{cluster_name}/{resource_url}",r="apis/apps/v1/deployments",s="apis/apps/v1/namespaces/{namespace}/deployments",o="api/v1/pods",i="api/v1/namespaces/{namespace}/pods/";function u(e,t,n){var o=c.replace("{cluster_name}",e);return o=void 0!==n&&null!==n?o.replace("{resource_url}",s).replace("{namespace}",n):o.replace("{resource_url}",r),Object(a["c"])(o)}function l(e,t,n){var r=c.replace("{cluster_name}",e);return r=void 0!==n&&null!==n?r.replace("{resource_url}",i).replace("{namespace}",n):r.replace("{resource_url}",o),Object(a["c"])(r)}function p(e){return Object(a["c"])("/api/v1/clusters/webkubectl/".concat(e,"?l=zh-CN"))}}}]);
//# sourceMappingURL=chunk-42e9d6f8.aca017b6.js.map