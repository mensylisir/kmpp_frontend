(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b15034e"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"1a55":function(t,e,n){"use strict";n("648b")},"3e1b":function(t,e,n){"use strict";n("e2e8")},"648b":function(t,e,n){t.exports={theme:"#5354bb"}},"7ea2":function(t,e,n){"use strict";n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return r})),n.d(e,"a",(function(){return l})),n.d(e,"p",(function(){return u})),n.d(e,"c",(function(){return d})),n.d(e,"k",(function(){return g})),n.d(e,"b",(function(){return h})),n.d(e,"d",(function(){return f})),n.d(e,"l",(function(){return m})),n.d(e,"m",(function(){return b})),n.d(e,"q",(function(){return p})),n.d(e,"h",(function(){return v})),n.d(e,"g",(function(){return _})),n.d(e,"i",(function(){return k})),n.d(e,"n",(function(){return y})),n.d(e,"o",(function(){return C})),n.d(e,"j",(function(){return $}));n("99af"),n("ac1f"),n("5319");var a=n("ff66"),i="/api/v1/clusters",o="/api/v1/clusters/logger/{cluster_name}",c="/api/v1/clusters/provisioner/log/{cluster_name}/{log_id}";function s(t){return Object(a["c"])("".concat(i,"/").concat(t))}function r(t){return Object(a["c"])("".concat(i,"/name/").concat(t))}function l(t){return Object(a["c"])("".concat(i,"/existence/").concat(t))}function u(t,e,n){return Object(a["e"])("".concat(i,"/search?pageNum=").concat(t,"&pageSize=").concat(e),n)}function d(t){return Object(a["e"])("".concat(i),t)}function g(t){return Object(a["c"])("".concat(i,"/health/").concat(t))}function h(t){return Object(a["e"])("".concat(i,"/recover/").concat(t),{})}function f(t,e){return Object(a["b"])("".concat(i,"/").concat(t,"?force=").concat(e))}function m(t){return Object(a["e"])("".concat(i,"/import/"),t)}function b(t){return Object(a["e"])("".concat(i,"/init/").concat(t,"/"),{})}function p(t,e){var n={clusterName:t,version:e};return Object(a["e"])("".concat(i,"/upgrade/"),n)}function v(t){return Object(a["c"])("".concat(i,"/status/").concat(t))}function _(t){return Object(a["c"])(o.replace("{cluster_name}",t))}function k(t,e){return Object(a["c"])(c.replace("{cluster_name}",t).replace("{log_id}",e))}function y(t){window.open("/ui/#/logger?clusterName=".concat(t),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function C(t,e){window.open("/ui/#/logger?clusterName=".concat(t,"&logId=").concat(e),"_blank","height=865, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")}function $(t){return Object(a["c"])("".concat(i,"/secret/").concat(t))}},"841c":function(t,e,n){"use strict";var a=n("d784"),i=n("825a"),o=n("1d80"),c=n("129f"),s=n("577e"),r=n("14c3");a("search",(function(t,e,n){return[function(e){var n=o(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,n):new RegExp(e)[t](s(n))},function(t){var a=i(this),o=s(t),l=n(e,a,o);if(l.done)return l.value;var u=a.lastIndex;c(u,0)||(a.lastIndex=0);var d=r(a,o);return c(a.lastIndex,u)||(a.lastIndex=u),null===d?-1:d.index}]}))},"86ca":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"complex-table"},[t.$slots.header||t.header?n("div",{staticClass:"complex-table__header"},[t._t("header",(function(){return[t._v(t._s(t.header))]})),t.$slots.toolbar||t.searchConfig?n("div",{staticClass:"complex-table__toolbar"},[n("div",[t._t("toolbar")],2),n("fu-search-bar",t._b({on:{exec:t.search},scopedSlots:t._u([{key:"complex",fn:function(){return[t._t("complex")]},proxy:!0}],null,!0)},"fu-search-bar",t.searchConfig,!1),[t._t("buttons"),n("fu-table-column-select",{attrs:{columns:t.columns}})],2)],1):t._e()],2):t._e(),n("div",{staticClass:"complex-table__body"},[n("fu-table",t._g(t._b({attrs:{columns:t.columns,"local-key":t.localKey},on:{"selection-change":t.handleSelectionChange}},"fu-table",t.$attrs,!1),t.$listeners),[t._t("default")],2)],1),t.$slots.pagination||t.paginationConfig?n("div",{staticClass:"complex-table__pagination"},[t._t("pagination",(function(){return[n("fu-table-pagination",t._b({attrs:{"current-page":t.paginationConfig.currentPage,"page-size":t.paginationConfig.pageSize},on:{"update:currentPage":function(e){return t.$set(t.paginationConfig,"currentPage",e)},"update:current-page":function(e){return t.$set(t.paginationConfig,"currentPage",e)},"update:pageSize":function(e){return t.$set(t.paginationConfig,"pageSize",e)},"update:page-size":function(e){return t.$set(t.paginationConfig,"pageSize",e)},change:t.search}},"fu-table-pagination",t.paginationConfig,!1))]}))],2):t._e()])},i=[],o={name:"ComplexTable",props:{columns:{type:Array,default:function(){return[]}},localKey:String,header:String,searchConfig:Object,paginationConfig:Object,selects:Array},data:function(){return{condition:{}}},methods:{search:function(t,e){t&&(this.condition=t),this.$emit("search",this.condition,e)},handleSelectionChange:function(t){this.$emit("update:selects",t)}}},c=o,s=(n("1a55"),n("2877")),r=Object(s["a"])(c,a,i,!1,null,null,null);e["a"]=r.exports},"992c":function(t,e,n){t.exports={theme:"#5354bb"}},a026:function(t,e,n){"use strict";n("992c")},b21e:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("caad"),n("2532");var a=n("4360"),i=function(t){var e=a["a"].getters&&a["a"].getters.roles;return e.some((function(e){return t.includes(e)}))}},b85c:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");var a=n("06c5");function i(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Object(a["a"])(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,c=t},f:function(){try{s||null==n["return"]||n["return"]()}finally{if(r)throw c}}}}},be17:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-container"},[t.$slots.description||t.description?n("div",{staticClass:"content-container__description"},[n("el-alert",{attrs:{title:t.description,type:"info"}}),n("br")],1):t._e(),t.$slots.header||t.header?n("div",{staticClass:"content-container__header"},[t._t("header",(function(){return[t.showBack?n("back-button",{attrs:{path:t.backPath,name:t.backName,to:t.backTo}}):t._e(),t._v(" "+t._s(t.header)+" ")]}))],2):t._e(),t.$slots.toolbar?n("div",{staticClass:"content-container__toolbar"},[t._t("toolbar")],2):t._e(),t._t("default")],2)},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-icon",{staticClass:"back-button",attrs:{name:"back"},nativeOn:{click:function(e){return t.jump.apply(null,arguments)}}})},c=[],s=(n("b0c0"),{name:"BackButton",props:{path:String,name:String,to:Object},methods:{jump:function(){var t=this.path,e=this.name,n=this.to;t&&this.$router.push(t),e&&this.$router.push(e),n&&this.$router.push(n)}}}),r=s,l=(n("eb9f"),n("2877")),u=Object(l["a"])(r,o,c,!1,null,null,null),d=u.exports,g={name:"LayoutContent",components:{BackButton:d},props:{header:String,description:String,backPath:String,backName:String,backTo:Object},computed:{showBack:function(t){var e=t.backPath,n=t.backName,a=t.backTo;return e||n||a}}},h=g,f=(n("a026"),Object(l["a"])(h,a,i,!1,null,null,null));e["a"]=f.exports},c43c:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("99af");var a=n("ff66"),i="/api/v1/settings";function o(){return Object(a["c"])("".concat(i,"/registry"))}},e2e8:function(t,e,n){},eb9f:function(t,e,n){"use strict";n("f574")},f574:function(t,e,n){t.exports={theme:"#5354bb"}},fcfb:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("layout-content",{attrs:{header:"集群管理"}},[n("complex-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"local-key":"cluster_columns",selects:t.clusterSelection,"search-config":t.searchConfig,data:t.data,"pagination-config":t.paginationConfig},on:{"update:selects":function(e){t.clusterSelection=e},"selection-change":t.selectChange,search:t.search},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","PROJECT_MANAGER"],expression:"['ADMIN','PROJECT_MANAGER']"}],attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.onCreate()}}},[t._v(t._s(t.$t("commons.button.create")))]),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","PROJECT_MANAGER"],expression:"['ADMIN','PROJECT_MANAGER']"}],attrs:{size:"small"},on:{click:function(e){return t.onImport()}}},[t._v(" "+t._s(t.$t("commons.button.import"))+" ")]),n("el-button",{attrs:{size:"small",disabled:1!==t.clusterSelection.length||t.isDeleteButtonDisable},on:{click:function(e){return t.onUpgrade()}}},[t._v(" "+t._s(t.$t("commons.button.upgrade"))+" ")]),n("el-button",{attrs:{size:"small",disabled:1!==t.clusterSelection.length||t.isDeleteButtonDisable},on:{click:function(e){return t.onHealthCheck()}}},[t._v(" "+t._s(t.$t("commons.button.check"))+" ")]),n("el-button",{attrs:{size:"small",disabled:t.clusterSelection.length<1||t.isDeleteButtonDisable},on:{click:function(e){return t.onDelete()}}},[t._v(" "+t._s(t.$t("commons.button.delete"))+" ")])],1)]},proxy:!0}])},[n("el-table-column",{attrs:{type:"selection",fix:""}}),n("el-table-column",{attrs:{label:t.$t("commons.table.name"),"min-width":"100",prop:"name",fix:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return["Running"===a.status?n("el-link",{attrs:{type:"info"},on:{click:function(e){return t.goForDetail(a)}}},[t._v(t._s(a.name))]):t._e(),"Running"!==a.status?n("span",[t._v(t._s(a.name))]):t._e()]}}])}),n("el-table-column",{attrs:{label:t.$t("cluster.version"),"min-width":"80",prop:"spec.version",fix:""}}),n("el-table-column",{attrs:{label:t.$t("cluster.node_size"),"min-width":"50",prop:"nodeSize"}}),n("el-table-column",{attrs:{label:t.$t("commons.table.status"),"min-width":"100",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return["Running"===a.status?n("div",[n("span",{staticClass:"iconfont icon-checkbox-circle-fill2",staticStyle:{color:"#32B350"}}),t._v(" "+t._s(t.$t("commons.status.running"))+" ")]):t._e(),"Failed"===a.status?n("div",[n("span",{staticClass:"iconfont icon-checkbox-circle-fill",staticStyle:{color:"#FA4147"}}),t._v("       "),n("el-link",{attrs:{type:"info"},on:{click:function(e){return t.getStatus(a)}}},[t._v(t._s(t.$t("commons.status.failed")))])],1):t._e(),"Initializing"===a.status?n("div",[n("i",{staticClass:"iconfont icon-refresh-fill"}),t._v("      "),n("el-link",{attrs:{type:"info"},on:{click:function(e){return t.getStatus(a)}}},[t._v(" "+t._s(t.$t("commons.status.initializing")))])],1):t._e(),"Upgrading"===a.status?n("div",[n("i",{staticClass:"el-icon-loading"}),t._v("       "),n("el-link",{attrs:{type:"info"},on:{click:function(e){return t.getStatus(a)}}},[t._v(" "+t._s(t.$t("commons.status.upgrading"))+" ")])],1):t._e(),"Terminating"===a.status&&"bareMetal"===a.provider?n("div",[n("i",{staticClass:"el-icon-loading"}),t._v("       "),n("el-link",{attrs:{type:"info"},on:{click:function(e){return t.getStatus(a)}}},[t._v(t._s(t.$t("commons.status.terminating"))+" ")])],1):t._e(),"Terminating"===a.status&&"bareMetal"!==a.provider?n("div",[n("i",{staticClass:"el-icon-loading"}),t._v("       "),n("span",[t._v(t._s(t.$t("commons.status.terminating"))+" ")])]):t._e(),"Creating"===a.status?n("div",[n("i",{staticClass:"el-icon-loading"}),t._v(t._s(t.$t("commons.status.creating"))+" ")]):t._e()]}}])}),n("el-table-column",{attrs:{width:"150px",label:t.$t("commons.table.create_time")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(t._f("datetimeFormat")(n.createdAt))+" ")]}}])}),n("fu-table-operations",{attrs:{buttons:t.buttons,label:t.$t("commons.table.action"),fix:""}})],1),n("el-dialog",{attrs:{"before-close":t.closeDialogLog,title:t.$t("cluster.condition.condition_detail"),width:"50%",visible:t.dialogLogVisible},on:{close:function(e){return t.search()},"update:visible":function(e){t.dialogLogVisible=e}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.conditionLoading,expression:"conditionLoading"}],staticClass:"dialog",style:{height:t.dialogHeight},attrs:{"element-loading-text":t.$t("cluster.condition.condition_loading"),"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 1)"}},[n("el-scrollbar",{staticStyle:{height:"100%"}},[t.log.conditions&&0===t.log.conditions.length?n("span",[t._v(t._s(t._f("errorFormat")(t.log.message)))]):t._e(),n("div",[n("el-steps",{staticStyle:{margin:"0 50px"},attrs:{space:50,direction:"vertical",active:t.activeName}},t._l(t.log.conditions,(function(e){return n("el-step",{key:e.name,attrs:{title:t.$t("cluster.condition."+e.name),description:t._f("errorFormat")(e.message)}},[n("i",{class:t.loadStepIcon(e.status),attrs:{slot:"icon"},slot:"icon"})])})),1)],1)])],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.goForLogs()}}},[t._v(t._s(t.$t("commons.button.log")))]),"Failed"===t.log.phase?n("el-button",{attrs:{size:"small","v-loading":t.retryLoadding},on:{click:function(e){return t.onRetry()}}},[t._v(" "+t._s(t.$t("commons.button.retry"))+" ")]):t._e()],1)]),n("el-dialog",{attrs:{title:t.$t("cluster.delete.delete_cluster"),width:"30%",visible:t.dialogDeleteVisible},on:{"update:visible":function(e){t.dialogDeleteVisible=e}}},[n("el-form",{attrs:{"label-width":"120px"}},[n("el-form-item",{attrs:{label:t.$t("cluster.delete.is_force")}},[n("el-switch",{model:{value:t.isForce,callback:function(e){t.isForce=e},expression:"isForce"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogDeleteVisible=!1}}},[t._v(t._s(t.$t("commons.button.cancel")))]),n("el-button",{attrs:{size:"small","v-loading":t.deleteLoadding},on:{click:function(e){return t.submitDelete()}}},[t._v(" "+t._s(t.$t("commons.button.submit"))+" ")])],1)],1),n("el-dialog",{attrs:{title:t.$t("cluster.health_check.health_check"),width:"50%",visible:t.dialogCheckVisible},on:{"update:visible":function(e){t.dialogCheckVisible=e}}},[n("div",{staticStyle:{"margin-top":"15px"},attrs:{align:"center"}},[t.isRecover?t._e():n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.checkLoading,expression:"checkLoading"}],staticStyle:{width:"90%"},attrs:{data:t.checkData.hooks,border:""}},[n("el-table-column",{attrs:{prop:"name",label:t.$t("commons.table.name")}}),n("el-table-column",{attrs:{prop:"level",label:t.$t("cluster.health_check.level")}}),n("el-table-column",{attrs:{prop:"msg",label:t.$t("cluster.health_check.message")}})],1)],1),n("div",{staticStyle:{"margin-top":"15px"},attrs:{align:"center"}},[t.isRecover?n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.checkLoading,expression:"checkLoading"}],staticStyle:{width:"90%"},attrs:{data:t.recoverItems,border:""}},[n("el-table-column",{attrs:{prop:"hookName",label:t.$t("commons.table.name")}}),n("el-table-column",{attrs:{prop:"name",label:t.$t("cluster.health_check.method")}}),n("el-table-column",{attrs:{prop:"result",label:t.$t("cluster.health_check.result")}}),n("el-table-column",{attrs:{prop:"msg",label:t.$t("cluster.health_check.message")}})],1):t._e()],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["error"==t.checkData.level?n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.onRecover()}}},[t._v(" "+t._s(t.$t("cluster.health_check.recover"))+" ")]):t._e()],1)])],1)},i=[],o=n("b85c"),c=(n("b0c0"),n("d3b7"),n("3ca3"),n("ddb0"),n("ac1f"),n("841c"),n("be17")),s=n("86ca"),r=n("7ea2"),l=n("c43c"),u=n("b21e"),d={name:"ClusterList",components:{ComplexTable:s["a"],LayoutContent:c["a"]},data:function(){var t=this;return{buttons:[{label:this.$t("commons.button.upgrade"),icon:"iconfont icon-update-line",click:function(e){t.onUpgrade(e)},disabled:function(t){return"Running"!==t.status}},{label:this.$t("commons.button.check"),icon:"iconfont icon-diagnostics-line",click:function(e){t.onHealthCheck(e)},disabled:function(t){return"Running"!==t.status&&"Failed"!==t.status}},{label:this.$t("commons.button.delete"),icon:"iconfont icon-delete-line",click:function(e){t.onDelete(e)},disabled:function(t){return"Running"!==t.status&&"Failed"!==t.status}}],isAdmin:Object(u["a"])("ADMIN"),paginationConfig:{currentPage:1,pageSize:10,total:0},clusterName:"",currentCluster:{},clusterSelection:[],data:[],dialogCheckVisible:!1,checkLoading:!0,isRecover:!1,recoverItems:[],checkData:{},dialogLogVisible:!1,dialogHeight:"400px",log:{phase:"",prePhase:"",message:"",conditions:[]},activeName:1,retryLoadding:!1,conditionLoading:!1,isForce:!1,deleteLoadding:!1,dialogDeleteVisible:!1,isDeleteButtonDisable:!1,deleteName:"",searchConfig:{quickPlaceholder:this.$t("commons.search.quickSearch"),components:[{field:"name",label:this.$t("commons.table.name"),component:"FuComplexInput",defaultOperator:"eq"},{field:"created_at",label:this.$t("commons.table.create_time"),component:"FuComplexDateTime",valueFormat:"yyyy-MM-dd HH:mm:ss"}]},loading:!1,timer:{},timer2:{}}},methods:{search:function(t){var e=this;this.loading=!0;var n=this.paginationConfig,a=n.currentPage,i=n.pageSize;Object(r["p"])(a,i,t).then((function(t){e.loading=!1,e.data=t.items,e.paginationConfig.total=t.total}))},searchForPolling:function(t){var e=this,n=this.paginationConfig,a=n.currentPage,i=n.pageSize;Object(r["p"])(a,i,t).then((function(t){e.data=t.items,e.paginationConfig.total=t.total}))},onCreate:function(){this.$router.push({name:"ClusterCreate"})},onImport:function(){this.$router.push({name:"ClusterImport"})},onUpgrade:function(t){t||(t=this.clusterSelection[0]),this.$router.push({name:"ClusterUpgrade",params:{name:t.name}})},goForDetail:function(t){var e=this;Object(l["a"])().then((function(n){var a=null===n.items?[]:n.items;switch(t.spec.architectures){case"amd64":var i,c=Object(o["a"])(a);try{for(c.s();!(i=c.n()).done;){var s=i.value;if("x86_64"===s.architecture)break}}catch(f){c.e(f)}finally{c.f()}break;case"arm64":var r,l=Object(o["a"])(a);try{for(l.s();!(r=l.n()).done;){var u=r.value;if("aarch64"===u.architecture)break}}catch(f){l.e(f)}finally{l.f()}break;case"all":var d,g=Object(o["a"])(a);try{for(g.s();!(d=g.n()).done;){var h=d.value;"x86_64"!==h.architecture&&h.architecture}}catch(f){g.e(f)}finally{g.f()}break}e.$router.push({name:"ClusterOverview",params:{name:t.name}})}))},selectChange:function(){var t=!0;if(0!==this.clusterSelection.length){var e,n=Object(o["a"])(this.clusterSelection);try{for(n.s();!(e=n.n()).done;){var a=e.value;if("Running"!==a.status&&"Failed"!==a.status){t=!1;break}}}catch(i){n.e(i)}finally{n.f()}this.isDeleteButtonDisable=!t}else this.isDeleteButtonDisable=!0},onDelete:function(t){this.isForce=!1,this.dialogDeleteVisible=!0,t&&(this.deleteName=t.name)},submitDelete:function(){var t=this;this.deleteLoadding=!0,this.$confirm(this.$t("commons.confirm_message.delete"),this.$t("commons.message_box.prompt"),{confirmButtonText:this.$t("commons.button.confirm"),cancelButtonText:this.$t("commons.button.cancel"),type:"warning"}).then((function(){var e=[];if(t.deleteName)e.push(Object(r["d"])(t.deleteName,t.isForce));else{var n,a=Object(o["a"])(t.clusterSelection);try{for(a.s();!(n=a.n()).done;){var i=n.value;e.push(Object(r["d"])(i.name,t.isForce))}}catch(c){a.e(c)}finally{a.f()}}Promise.all(e).then((function(){t.search(),t.$message({type:"success",message:t.$t("commons.msg.op_success")}),t.dialogDeleteVisible=!1,t.deleteLoadding=!1})).catch((function(){t.search(),t.dialogDeleteVisible=!1,t.deleteLoadding=!1}))}))},onHealthCheck:function(t){var e=this;t||(t=this.clusterSelection[0]),this.currentCluster=t,this.dialogCheckVisible=!0,this.checkLoading=!0,this.isRecover=!1,this.recoverItems=[],Object(r["k"])(this.currentCluster.name).then((function(t){e.checkData=t,e.checkLoading=!1}))},onRecover:function(){var t=this;this.checkLoading=!0,this.isRecover=!0,this.checkData={hooks:[],level:""},Object(r["b"])(this.currentCluster.name).then((function(e){t.recoverItems=e,t.checkLoading=!1}))},getStatus:function(t){var e=this;this.dialogHeight="Terminating"===t.status?"100px":"400px",this.currentCluster=t,this.dialogLogVisible=!0,this.clusterName=t.name,this.dialogPolling(),Object(r["h"])(t.name).then((function(t){e.log=t,e.activeName=e.log.conditions.length+1}))},loadStepIcon:function(t){switch(t){case"True":return"el-icon-check";case"False":return"el-icon-close";case"Unknown":return"el-icon-loading"}},goForLogs:function(){Object(r["n"])(this.clusterName)},onRetry:function(){var t=this;switch(this.retryLoadding=!0,this.log.prePhase){case"Upgrading":Object(r["q"])(this.clusterName,this.currentCluster.spec.upgradeVersion).then((function(){t.retryLoadding=!1,t.log.phase="Upgrading"}));break;case"Initializing":Object(r["m"])(this.clusterName).then((function(){t.retryLoadding=!1,t.log.phase="Initializing"}));break;case"Terminating":Object(r["d"])(this.clusterName,!0).then((function(){t.retryLoadding=!1,t.log.phase="Terminating"}));break;case"Creating":Object(r["m"])(this.clusterName).then((function(){t.retryLoadding=!1,t.dialogLogVisible=!1,t.log.phase="Creating"}));break;case"Waiting":Object(r["m"])(this.clusterName).then((function(){t.retryLoadding=!1,t.log.phase="Waiting"}));break}},closeDialogLog:function(){clearInterval(this.timer2),this.dialogLogVisible=!1},dialogPolling:function(){var t=this;this.timer2=setInterval((function(){0===t.log.conditions.length&&"Failed"!==t.currentCluster.status||(t.conditionLoading=!1),"Running"!==t.log.phase&&"Failed"!==t.log.phase&&Object(r["h"])(t.clusterName).then((function(e){t.activeName=t.log.conditions.length+1,t.log.conditions=e.conditions,t.log.phase!==e.phase&&(t.log.phase=e.phase),t.log.prePhase!==e.prePhase&&(t.log.prePhase=e.prePhase)})).catch((function(){t.dialogLogVisible=!1,clearInterval(t.timer2)}))}),3e3)},polling:function(){var t=this;this.timer=setInterval((function(){var e,n=!1,a=["Initializing","Terminating","Creating","Waiting","Upgrading"],i=Object(o["a"])(t.data);try{for(i.s();!(e=i.n()).done;){var c=e.value;if(-1!==a.indexOf(c.status)){n=!0;break}}}catch(s){i.e(s)}finally{i.f()}n&&t.searchForPolling()}),1e4)}},mounted:function(){this.search(),this.polling()},destroyed:function(){clearInterval(this.timer),clearInterval(this.timer2)}},g=d,h=(n("3e1b"),n("2877")),f=Object(h["a"])(g,a,i,!1,null,"1a0f0442",null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2b15034e.9c19ec65.js.map